This file is a merged representation of the entire codebase, combined into a single document. The content has been processed where empty lines have been removed, security check has been disabled.
Generated by Repomix on: 2025-02-10T12:00:54.396Z

# File Summary

## Purpose
This file contains a packed representation of the entire repository's contents.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.

## File Format
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Multiple file entries, each consisting of:
  a. A header with the file path (## File: path/to/file)
  b. The full contents of the file in a code block

## Usage Guidelines
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.

## Notes
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Empty lines have been removed from all files
- Security check has been disabled - content may contain sensitive information

## Additional Info

# Directory Structure
```
src/
  api/
    generateQuestions.ts
  components/
    admin/
      AdminAnalytics.tsx
      AdminAssessments.tsx
      AdminChatBot.tsx
      AdminContent.tsx
      AdminSettings.tsx
      AdminSidebar.tsx
      AdminUsers.tsx
      AssessmentManagement.tsx
    assessment/
      AssessmentModal.tsx
      questions.ts
    auth/
      AuthModalContent.tsx
    learning/
      LearningPath.tsx
    onboarding/
      ProfileSetup.tsx
    settings/
      NotificationSettings.tsx
      ProfileSettings.tsx
    skills/
      AnalysisResult.tsx
      CodeEditor.tsx
    AuthModal.tsx
    Features.tsx
    Hero.tsx
    Navbar.tsx
    Profile.tsx
    VerticalNav.tsx
  config/
    firebase.ts
  contexts/
    AuthContext.tsx
  pages/
    admin/
      AdminDashboard.tsx
    api/
      generateQuestions.ts
    AchievementsPage.tsx
    AnalyticsPage.tsx
    AssessmentPage.tsx
    KnowledgeAssessmentPage.tsx
    LearningPathPage.tsx
    LearningPathsPage.tsx
    LearningStyleAssessmentPage.tsx
    LibraryPage.tsx
    MentoringPage.tsx
    ProfilePage.tsx
    SkillsAssessmentPage.tsx
  services/
    ai/
      api.ts
      config.ts
      defaults.ts
      types.ts
      utils.ts
    admin.service.ts
    ai.service.ts
    auth.service.ts
    DatabaseService.ts
    firebase.service.ts
    knowledgeAssessmentService.ts
    learningPathService.ts
    profile.service.ts
    questionService.ts
    skillAssessmentService.ts
    user.service.ts
    VectorDBService.ts
  utils/
    modelConfig.ts
  App.tsx
  index.css
  index.tsx
  main.tsx
  vite-env.d.ts
.gitignore
eslint.config.js
firebase.rules
index.html
next.config.js
package.json
postcss.config.js
README.md
tailwind.config.js
tsconfig.app.json
tsconfig.json
tsconfig.node.json
vite.config.ts
```

# Files

## File: src/api/generateQuestions.ts
````typescript
import OpenAI from 'openai';
import { NextApiRequest, NextApiResponse } from 'next';
// Initialize OpenAI with environment variables
const GLHF_API_KEY = import.meta.env.VITE_GLHF_API_KEY;
const GLHF_API_URL = import.meta.env.VITE_GLHF_API_URL || 'https://glhf.chat/api/openai/v1';
// Validate required environment variables
if (!GLHF_API_KEY) {
  throw new Error('VITE_GLHF_API_KEY is not set in environment variables');
}
const openai = new OpenAI({
  apiKey: GLHF_API_KEY,
  baseURL: GLHF_API_URL,
});
const generateSystemPrompt = (domain: string) => {
  return `You are an expert assessment generator for ${domain}. Create 5 multiple-choice questions to test knowledge in ${domain}. 
  Each question should:
  1. Be relevant to ${domain}
  2. Have 4 options (A, B, C, D)
  3. Include one correct answer
  4. Be challenging but fair
  Format your response as a JSON array of questions, where each question has:
  - text: the question text
  - options: array of 4 possible answers
  - correctAnswer: the correct option (A, B, C, or D)`;
};
export default async function handler(
  req: NextApiRequest,
  res: NextApiResponse
) {
  if (req.method !== 'POST') {
    return res.status(405).json({ error: 'Method not allowed' });
  }
  try {
    const { domain } = req.body;
    if (!domain) {
      return res.status(400).json({ error: 'Domain is required' });
    }
    const completion = await openai.chat.completions.create({
      model: "hf:mistralai/Mistral-7B-Instruct-v0.3",
      messages: [
        { 
          role: "system", 
          content: generateSystemPrompt(domain)
        }
      ],
      temperature: 0.7,
      max_tokens: 2000,
    });
    const response = completion.choices[0]?.message?.content;
    if (!response) {
      return res.status(500).json({ error: 'No response from AI' });
    }
    let questions;
    try {
      const parsedQuestions = JSON.parse(response);
      questions = parsedQuestions.map((q: any, index: number) => ({
        id: `q${index + 1}`,
        text: q.text,
        options: q.options,
        correctAnswer: q.correctAnswer
      }));
    } catch (error) {
      console.error('Error parsing AI response:', error);
      return res.status(500).json({ error: 'Failed to parse AI response' });
    }
    return res.status(200).json({ questions });
  } catch (error) {
    console.error('Error generating questions:', error);
    return res.status(500).json({ error: 'Failed to generate questions' });
  }
}
````

## File: src/components/admin/AdminAnalytics.tsx
````typescript
import React, { useState, useEffect } from 'react';
import { Users, BookOpen, Award, TrendingUp } from 'lucide-react';
import { getAnalytics } from '../../services/admin.service';
import type { Analytics } from '../../services/admin.service';
export const AdminAnalytics: React.FC = () => {
  const [analytics, setAnalytics] = useState<Analytics | null>(null);
  const [loading, setLoading] = useState(true);
  useEffect(() => {
    const fetchAnalytics = async () => {
      try {
        const data = await getAnalytics();
        setAnalytics(data);
      } catch (error) {
        console.error('Error fetching analytics:', error);
      } finally {
        setLoading(false);
      }
    };
    fetchAnalytics();
  }, []);
  if (loading) {
    return (
      <div className="flex items-center justify-center h-64">
        <div className="animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"></div>
      </div>
    );
  }
  if (!analytics) return null;
  return (
    <div>
      <div className="mb-6">
        <h1 className="text-2xl font-bold text-gray-900">Dashboard</h1>
        <p className="text-gray-600">Platform overview and analytics</p>
      </div>
      <div className="grid gap-6 md:grid-cols-2 lg:grid-cols-4 mb-8">
        {[
          { label: 'Total Users', value: analytics.totalUsers, icon: Users, change: '+12%' },
          { label: 'Active Courses', value: analytics.activeCourses, icon: BookOpen, change: '+5%' },
          { label: 'Completion Rate', value: '78%', icon: Award, change: '+3%' },
          { label: 'User Growth', value: '+25%', icon: TrendingUp, change: '+8%' }
        ].map((stat, index) => (
          <div key={index} className="bg-white p-6 rounded-lg shadow">
            <div className="flex items-center justify-between mb-4">
              <div className="h-12 w-12 bg-indigo-100 rounded-lg flex items-center justify-center">
                <stat.icon className="h-6 w-6 text-indigo-600" />
              </div>
              <span className="text-sm text-green-600">{stat.change}</span>
            </div>
            <h3 className="text-sm text-gray-600">{stat.label}</h3>
            <p className="text-2xl font-bold text-gray-900">{stat.value}</p>
          </div>
        ))}
      </div>
      <div className="grid gap-6 md:grid-cols-2">
        <div className="bg-white p-6 rounded-lg shadow">
          <h2 className="text-lg font-semibold mb-4">User Activity</h2>
          <div className="h-64 flex items-center justify-center text-gray-500">
            Activity chart will be displayed here
          </div>
        </div>
        <div className="bg-white p-6 rounded-lg shadow">
          <h2 className="text-lg font-semibold mb-4">Popular Resources</h2>
          <div className="space-y-4">
            {analytics.popularResources.map((resource, index) => (
              <div key={index} className="flex items-center justify-between">
                <span className="text-gray-700">{resource.title}</span>
                <span className="text-indigo-600">{resource.views} views</span>
              </div>
            ))}
          </div>
        </div>
      </div>
    </div>
  );
};
````

## File: src/components/admin/AdminAssessments.tsx
````typescript
import React from 'react';
export const AdminAssessments: React.FC = () => {
  return (
    <div className="p-6">
      <h2 className="text-2xl font-bold mb-4">Assessment Management</h2>
      <div className="bg-white rounded-lg shadow p-6">
        <p className="text-gray-600">Assessment management features coming soon...</p>
      </div>
    </div>
  );
};
````

## File: src/components/admin/AdminChatBot.tsx
````typescript
import React, { useState, useRef, useEffect } from 'react';
import { vectorDB } from '../../services/VectorDBService';
interface Message {
  text: string;
  isUser: boolean;
  timestamp: Date;
}
const ADMIN_EMAIL = 'naik97059@gmail.com';
export const AdminChatBot: React.FC = () => {
  const [messages, setMessages] = useState<Message[]>([]);
  const [input, setInput] = useState('');
  const [isOpen, setIsOpen] = useState(false);
  const [isLoading, setIsLoading] = useState(false);
  const messagesEndRef = useRef<HTMLDivElement>(null);
  const [isAdmin, setIsAdmin] = useState(false);
  const [isInitialized, setIsInitialized] = useState(false);
  useEffect(() => {
    const initializeChat = async () => {
      try {
        // Check if current user is admin
        const userEmail = localStorage.getItem('userEmail');
        const isAdminUser = userEmail === ADMIN_EMAIL;
        setIsAdmin(isAdminUser);
        if (isAdminUser) {
          // Add welcome message
          setMessages([{
            text: `Welcome to the Admin Assistant! I can help you with:
- Student information and progress
- Teacher information
- Course statistics
- Platform usage
- Assessment statistics
- Add domain (try "add domain [name]" or "add domain [name] [description]")
- Delete domain (try "delete domain [name]")
- Delete user (try "delete user [email]")
Just ask me what you'd like to know!`,
            isUser: false,
            timestamp: new Date()
          }]);
        }
      } catch (error) {
        console.error('Error initializing chat:', error);
      } finally {
        setIsInitialized(true);
      }
    };
    initializeChat();
  }, []);
  const scrollToBottom = () => {
    messagesEndRef.current?.scrollIntoView({ behavior: "smooth" });
  };
  useEffect(() => {
    scrollToBottom();
  }, [messages]);
  const processQuery = async (query: string): Promise<string> => {
    const normalizedQuery = query.toLowerCase().trim();
    try {
      // Help command
      if (normalizedQuery === 'help') {
        return `I can help you with:
- View all users (try "show all users" or "list users")
- View user statistics (try "show statistics")
- View domains (try "show domains" or "list domains")
- View assessments (try "show assessments" or "assessment stats")
- View assessment results (try "show results" or "result stats")
- View user results (try "show results for [userId]")
- Add domain (try "add domain [name]" or "add domain [name] [description]")
- Delete domain (try "delete domain [name]")
- Delete user (try "delete user [email]")
Just ask what you'd like to know!`;
      }
      // Handle add domain command
      const addDomainMatch = normalizedQuery.match(/^add domain\s+(\w+)(?:\s+(.+))?$/);
      if (addDomainMatch) {
        const [_, name, description = ''] = addDomainMatch;
        const success = await vectorDB.addDomain(name, description);
        if (success) {
          return `Successfully added domain: ${name}${description ? ` with description: ${description}` : ''}`;
        }
        return `Failed to add domain: ${name}`;
      }
      // Handle delete domain command
      const deleteDomainMatch = normalizedQuery.match(/^delete domain\s+(\w+)$/);
      if (deleteDomainMatch) {
        const [_, name] = deleteDomainMatch;
        const success = await vectorDB.deleteDomain(name);
        if (success) {
          return `Successfully deleted domain: ${name}`;
        }
        return `Failed to delete domain: ${name}. Domain not found.`;
      }
      // Handle delete user command
      const deleteUserMatch = normalizedQuery.match(/^delete user\s+(.+@.+)$/);
      if (deleteUserMatch) {
        const [_, email] = deleteUserMatch;
        const success = await vectorDB.deleteUser(email);
        if (success) {
          return `Successfully deleted user: ${email}`;
        }
        return `Failed to delete user: ${email}. User not found.`;
      }
      // Handle assessment result queries
      if (normalizedQuery.includes('result')) {
        // Check for user-specific results
        const userMatch = normalizedQuery.match(/results? for (\w+)/i);
        if (userMatch) {
          const userId = userMatch[1];
          const summary = await vectorDB.getUserAssessmentSummary(userId);
          return formatUserAssessmentSummary(userId, summary);
        }
        // Check for general result statistics
        if (normalizedQuery.includes('stats') || normalizedQuery.includes('statistics')) {
          const stats = await vectorDB.getAssessmentResultStatistics();
          return formatResultStatistics(stats);
        }
        // Show all results
        const results = await vectorDB.getAssessmentResults();
        return formatResultsList(results);
      }
      // Handle assessment queries
      if (normalizedQuery.includes('assessment')) {
        if (normalizedQuery.includes('stats') || normalizedQuery.includes('statistics')) {
          const stats = await vectorDB.getAssessmentStatistics();
          return formatAssessmentStatistics(stats);
        }
        const assessments = await vectorDB.getAssessments();
        return formatAssessmentList(assessments);
      }
      // Handle domain queries
      if (normalizedQuery.includes('domain')) {
        const domains = await vectorDB.getDomains();
        if (!domains || domains.length === 0) {
          return 'No domains found in the system.';
        }
        return formatDomainList(domains);
      }
      // Handle user listing and searching
      if (normalizedQuery.includes('user') || normalizedQuery.includes('list') || normalizedQuery.includes('show')) {
        const users = await vectorDB.getAllUsers();
        console.log('Retrieved users for listing:', users);
        if (!users || users.length === 0) {
          return 'No users found in the system.';
        }
        return formatUserList('All Users', users);
      }
      // Handle content and domain queries
      if (normalizedQuery.includes('content') || normalizedQuery.includes('domain')) {
        const users = await vectorDB.getAllUsers();
        const domains = new Set(users.map(user => user.email?.split('@')[1]).filter(Boolean));
        const roles = new Set(users.map(user => user.role).filter(Boolean));
        return `Platform Overview:
Domains: ${domains.size > 0 ? Array.from(domains).join(', ') : 'No domains found'}
User Types: ${roles.size > 0 ? Array.from(roles).join(', ') : 'No user types found'}
Total Users: ${users.length}`;
      }
      // Handle statistics
      if (normalizedQuery.includes('statistics') || normalizedQuery.includes('stats')) {
        const stats = await vectorDB.getUserStatistics();
        return formatStatistics(stats);
      }
      // Default to user search
      const searchResults = await vectorDB.searchSimilar(query, 5);
      if (searchResults && searchResults.length > 0) {
        return formatUserList('Search Results', searchResults);
      }
      return 'No matching results found. Try "help" to see available commands.';
    } catch (error) {
      console.error('Error processing query:', error);
      return 'Sorry, there was an error processing your request. Please try again.';
    }
  };
  const formatUserList = (title: string, users: any[]): string => {
    return `${title}:
${users.map((user, index) => formatUserEntry(user, index + 1)).join('\n\n')}`;
  };
  const formatUserEntry = (user: any, index: number): string => {
    const details = [];
    details.push(`${index}. ${user.name}`);
    details.push(`   Role: ${user.role}`);
    if (user.email && user.email !== 'No email provided') {
      details.push(`   Email: ${user.email}`);
    }
    if (user.metadata.lastActive !== 'Never') {
      details.push(`   Last Active: ${user.metadata.lastActive}`);
    }
    if (user.metadata.joinDate !== 'Unknown') {
      details.push(`   Joined: ${user.metadata.joinDate}`);
    }
    // Add notification preferences if they exist
    const emailPrefs = user.metadata.notifications?.email;
    if (emailPrefs && Object.keys(emailPrefs).length > 0) {
      details.push('   Email Notifications:');
      if (emailPrefs.courseUpdates) details.push('     • Course Updates');
      if (emailPrefs.newFeatures) details.push('     • New Features');
      if (emailPrefs.progressReports) details.push('     • Progress Reports');
    }
    return details.join('\n');
  };
  const formatDomainList = (domains: any[]): string => {
    if (domains.length === 0) return 'No domains available.';
    return `Available Domains:
${domains.map((domain, index) => {
  const description = domain.description && domain.description.trim() 
    ? domain.description 
    : 'No description available';
  return `${index + 1}. ${domain.name.toLowerCase()}
   Description: ${description}`;
}).join('\n\n')}`;
  };
  const formatAssessmentList = (assessments: any[]): string => {
    if (assessments.length === 0) return 'No assessments available.';
    return `Recent Assessments:
${assessments.map((assessment, index) => 
`${index + 1}. ${assessment.type}
   Score: ${assessment.score}
   Improvement: ${assessment.improvement}
   Completed: ${assessment.completedAt}
   Created: ${assessment.createdAt}`
).join('\n\n')}`;
  };
  const formatAssessmentStatistics = (stats: any): string => {
    const completionRate = Math.round((stats.completed / stats.total) * 100);
    let response = `Assessment Statistics:
Overview:
• Total Assessments: ${stats.total}
• Completed: ${stats.completed} (${completionRate}%)
• Average Score: ${Math.round(stats.averageScore * 10) / 10}
Improvements:
• Positive: ${stats.improvements.positive}
• No Change: ${stats.improvements.noChange}
• Negative: ${stats.improvements.negative}
By Type:`;
    Object.entries(stats.byType).forEach(([type, data]: [string, any]) => {
      response += `\n• ${type}:
  - Count: ${data.count}
  - Average Score: ${Math.round(data.avgScore * 10) / 10}`;
    });
    return response;
  };
  const formatStatistics = (stats: any): string => {
    const total = stats.total || 0;
    const percentages = {
      active: total > 0 ? Math.round((stats.active / total) * 100) : 0,
      students: total > 0 ? Math.round((stats.students / total) * 100) : 0,
      teachers: total > 0 ? Math.round((stats.teachers / total) * 100) : 0,
      admins: total > 0 ? Math.round((stats.admins / total) * 100) : 0,
      users: total > 0 ? Math.round((stats.users / total) * 100) : 0
    };
    return `Platform Statistics:
Total Users: ${total}
Active Users (last 30 days): ${stats.active} (${percentages.active}%)
User Breakdown:
• Students: ${stats.students} (${percentages.students}%)
• Teachers: ${stats.teachers} (${percentages.teachers}%)
• Admins: ${stats.admins} (${percentages.admins}%)
• Regular Users: ${stats.users} (${percentages.users}%)`;
  };
  const formatResultsList = (results: any[]): string => {
    if (results.length === 0) return 'No assessment results available.';
    return `Recent Assessment Results:
${results.map((result, index) => 
`${index + 1}. Assessment ID: ${result.assessmentId}
   Language: ${result.language}
   Score: ${result.score}
   Completed: ${result.completedAt}
   User ID: ${result.userId}`
).join('\n\n')}`;
  };
  const formatUserAssessmentSummary = (userId: string, summary: any): string => {
    let response = `Assessment Summary for User ${userId}:
Overview:
• Total Assessments: ${summary.totalAssessments}
• Average Score: ${Math.round(summary.averageScore * 10) / 10}
Performance by Language:`;
    Object.entries(summary.byLanguage).forEach(([lang, data]: [string, any]) => {
      response += `\n• ${lang}:
  - Assessments: ${data.count}
  - Average Score: ${Math.round(data.averageScore * 10) / 10}`;
    });
    response += '\n\nRecent Results:';
    summary.recentResults.forEach((result: any, index: number) => {
      response += `\n${index + 1}. ${result.language} Assessment
   Score: ${result.score}
   Completed: ${result.completedAt}`;
    });
    return response;
  };
  const formatResultStatistics = (stats: any): string => {
    let response = `Assessment Result Statistics:
Overview:
• Total Results: ${stats.total}
• Average Score: ${Math.round(stats.averageScore * 10) / 10}
Score Distribution:
• Excellent (>90%): ${stats.scoreDistribution.excellent}
• Good (70-90%): ${stats.scoreDistribution.good}
• Average (50-70%): ${stats.scoreDistribution.average}
• Poor (<50%): ${stats.scoreDistribution.poor}
Performance by Language:`;
    Object.entries(stats.byLanguage).forEach(([lang, data]: [string, any]) => {
      response += `\n• ${lang}:
  - Total Attempts: ${data.count}
  - Average Score: ${Math.round(data.averageScore * 10) / 10}
  - Highest Score: ${data.highestScore}`;
    });
    return response;
  };
  const handleSend = async () => {
    if (!input.trim() || !isAdmin) return;
    const userMessage: Message = {
      text: input,
      isUser: true,
      timestamp: new Date()
    };
    setMessages(prev => [...prev, userMessage]);
    setInput('');
    setIsLoading(true);
    try {
      const response = await processQuery(input);
      const botMessage: Message = {
        text: response,
        isUser: false,
        timestamp: new Date()
      };
      setMessages(prev => [...prev, botMessage]);
    } catch (error) {
      console.error('Error handling message:', error);
      const errorMessage: Message = {
        text: 'Sorry, I encountered an error. Please try again.',
        isUser: false,
        timestamp: new Date()
      };
      setMessages(prev => [...prev, errorMessage]);
    } finally {
      setIsLoading(false);
    }
  };
  if (!isAdmin || !isInitialized) {
    return null;
  }
  return (
    <div className="fixed bottom-4 right-4 z-50">
      {isOpen ? (
        <div className="bg-white rounded-lg shadow-xl w-96 h-[600px] flex flex-col">
          <div className="p-4 bg-blue-600 text-white rounded-t-lg flex justify-between items-center">
            <h3 className="font-semibold">Admin Assistant</h3>
            <button
              onClick={() => setIsOpen(false)}
              className="text-white hover:text-gray-200"
            >
              ×
            </button>
          </div>
          <div className="flex-1 overflow-y-auto p-4 space-y-4">
            {messages.map((message, index) => (
              <div
                key={index}
                className={`flex ${message.isUser ? 'justify-end' : 'justify-start'}`}
              >
                <div
                  className={`max-w-[80%] p-3 rounded-lg ${
                    message.isUser
                      ? 'bg-blue-600 text-white'
                      : 'bg-gray-100 text-gray-800'
                  }`}
                >
                  <p className="whitespace-pre-wrap">{message.text}</p>
                  <p className="text-xs mt-1 opacity-70">
                    {message.timestamp.toLocaleTimeString()}
                  </p>
                </div>
              </div>
            ))}
            {isLoading && (
              <div className="flex justify-start">
                <div className="bg-gray-100 p-3 rounded-lg">
                  <p>Thinking...</p>
                </div>
              </div>
            )}
            <div ref={messagesEndRef} />
          </div>
          <div className="p-4 border-t">
            <div className="flex space-x-2">
              <input
                type="text"
                value={input}
                onChange={(e) => setInput(e.target.value)}
                onKeyPress={(e) => e.key === 'Enter' && handleSend()}
                placeholder="Ask me anything about the platform..."
                className="flex-1 p-2 border rounded-lg focus:outline-none focus:border-blue-500"
              />
              <button
                onClick={handleSend}
                disabled={isLoading}
                className="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50"
              >
                Send
              </button>
            </div>
          </div>
        </div>
      ) : (
        <button
          onClick={() => setIsOpen(true)}
          className="bg-blue-600 text-white p-4 rounded-full shadow-lg hover:bg-blue-700 flex items-center justify-center w-16 h-16"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
            className="w-8 h-8"
          >
            <path
              strokeLinecap="round"
              strokeLinejoin="round"
              strokeWidth={2}
              d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"
            />
          </svg>
        </button>
      )}
    </div>
  );
};
````

## File: src/components/admin/AdminContent.tsx
````typescript
import React, { useState, useEffect } from 'react';
import { Plus, Search, Edit, Trash2, X } from 'lucide-react';
import { getResources, addResource, updateResource, deleteResource } from '../../services/firebase.service';
import type { Resource } from '../../services/firebase.service';
interface ResourceFormData {
  title: string;
  description: string;
  url: string;
  type: 'video' | 'article' | 'tutorial' | 'course';
  level: string;
  duration: string;
  tags: string[];
}
const initialFormData: ResourceFormData = {
  title: '',
  description: '',
  url: '',
  type: 'course',
  level: 'beginner',
  duration: '1 hour',
  tags: []
};
export const AdminContent: React.FC = () => {
  const [resources, setResources] = useState<Resource[]>([]);
  const [search, setSearch] = useState('');
  const [loading, setLoading] = useState(true);
  const [isAddModalOpen, setIsAddModalOpen] = useState(false);
  const [editingResource, setEditingResource] = useState<Resource | null>(null);
  const [formData, setFormData] = useState<ResourceFormData>(initialFormData);
  const [error, setError] = useState<string | null>(null);
  const [success, setSuccess] = useState<string | null>(null);
  useEffect(() => {
    const unsubscribe = getResources((data) => {
      setResources(data);
      setLoading(false);
    });
    return () => unsubscribe();
  }, []);
  const filteredResources = resources.filter(resource =>
    resource.title.toLowerCase().includes(search.toLowerCase())
  );
  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement>) => {
    const { name, value } = e.target;
    setFormData(prev => ({
      ...prev,
      [name]: value
    }));
  };
  const handleTagsChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    const tags = e.target.value.split(',').map(tag => tag.trim()).filter(Boolean);
    setFormData(prev => ({
      ...prev,
      tags
    }));
  };
  const handleAddResource = async (e: React.FormEvent) => {
    e.preventDefault();
    setError(null);
    setSuccess(null);
    try {
      if (editingResource) {
        await updateResource(editingResource.id, formData);
        setSuccess('Resource updated successfully');
      } else {
        await addResource(formData);
        setSuccess('Resource added successfully');
      }
      setFormData(initialFormData);
      setIsAddModalOpen(false);
      setEditingResource(null);
      setTimeout(() => setSuccess(null), 3000);
    } catch (err) {
      setError('Failed to save resource');
      setTimeout(() => setError(null), 3000);
    }
  };
  const handleEditResource = (resource: Resource) => {
    setEditingResource(resource);
    setFormData({
      title: resource.title,
      description: resource.description,
      url: resource.url,
      type: resource.type,
      level: resource.level,
      duration: resource.duration,
      tags: resource.tags
    });
    setIsAddModalOpen(true);
  };
  const handleDeleteResource = async (id: string) => {
    if (window.confirm('Are you sure you want to delete this resource?')) {
      setError(null);
      setSuccess(null);
      try {
        await deleteResource(id);
        setSuccess('Resource deleted successfully');
        setTimeout(() => setSuccess(null), 3000);
      } catch (err) {
        setError('Failed to delete resource');
        setTimeout(() => setError(null), 3000);
      }
    }
  };
  const ResourceModal = () => (
    <div className="fixed inset-0 bg-black/50 flex items-center justify-center z-50">
      <div className="bg-white rounded-lg p-6 w-full max-w-md">
        <div className="flex justify-between items-center mb-4">
          <h3 className="text-lg font-semibold">
            {editingResource ? 'Edit Resource' : 'Add New Resource'}
          </h3>
          <button
            onClick={() => {
              setIsAddModalOpen(false);
              setEditingResource(null);
              setFormData(initialFormData);
            }}
            className="text-gray-400 hover:text-gray-600"
          >
            <X className="h-5 w-5" />
          </button>
        </div>
        <form onSubmit={handleAddResource} className="space-y-4">
          <div>
            <label className="block text-sm font-medium text-gray-700">Title</label>
            <input
              type="text"
              name="title"
              value={formData.title}
              onChange={handleInputChange}
              className="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"
              required
            />
          </div>
          <div>
            <label className="block text-sm font-medium text-gray-700">Description</label>
            <textarea
              name="description"
              value={formData.description}
              onChange={handleInputChange}
              rows={3}
              className="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"
              required
            />
          </div>
          <div>
            <label className="block text-sm font-medium text-gray-700">URL</label>
            <input
              type="url"
              name="url"
              value={formData.url}
              onChange={handleInputChange}
              className="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"
              required
            />
          </div>
          <div>
            <label className="block text-sm font-medium text-gray-700">Type</label>
            <select
              name="type"
              value={formData.type}
              onChange={handleInputChange}
              className="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"
            >
              <option value="course">Course</option>
              <option value="video">Video</option>
              <option value="article">Article</option>
              <option value="tutorial">Tutorial</option>
            </select>
          </div>
          <div>
            <label className="block text-sm font-medium text-gray-700">Level</label>
            <select
              name="level"
              value={formData.level}
              onChange={handleInputChange}
              className="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"
            >
              <option value="beginner">Beginner</option>
              <option value="intermediate">Intermediate</option>
              <option value="advanced">Advanced</option>
            </select>
          </div>
          <div>
            <label className="block text-sm font-medium text-gray-700">Duration</label>
            <input
              type="text"
              name="duration"
              value={formData.duration}
              onChange={handleInputChange}
              className="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"
              placeholder="e.g., 1 hour, 30 minutes"
              required
            />
          </div>
          <div>
            <label className="block text-sm font-medium text-gray-700">Tags (comma-separated)</label>
            <input
              type="text"
              value={formData.tags.join(', ')}
              onChange={handleTagsChange}
              className="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"
              placeholder="react, frontend, beginner"
            />
          </div>
          <button
            type="submit"
            className="w-full bg-indigo-600 text-white py-2 px-4 rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
          >
            {editingResource ? 'Update Resource' : 'Add Resource'}
          </button>
        </form>
      </div>
    </div>
  );
  return (
    <div className="p-6">
      {error && (
        <div className="mb-4 p-4 bg-red-50 border border-red-200 text-red-700 rounded-md">
          {error}
        </div>
      )}
      {success && (
        <div className="mb-4 p-4 bg-green-50 border border-green-200 text-green-700 rounded-md">
          {success}
        </div>
      )}
      <div className="flex justify-between items-center mb-6">
        <div className="relative">
          <Search className="absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400" />
          <input
            type="text"
            placeholder="Search resources..."
            value={search}
            onChange={(e) => setSearch(e.target.value)}
            className="pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
          />
        </div>
        <button
          onClick={() => setIsAddModalOpen(true)}
          className="bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 flex items-center"
        >
          <Plus className="h-5 w-5 mr-2" />
          Add Resource
        </button>
      </div>
      {loading ? (
        <div className="text-center py-12">
          <div className="animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto"></div>
        </div>
      ) : (
        <div className="grid gap-6 md:grid-cols-2 lg:grid-cols-3">
          {filteredResources.map((resource) => (
            <div
              key={resource.id}
              className="bg-white p-6 rounded-lg shadow-sm border border-gray-200"
            >
              <h3 className="text-lg font-semibold mb-2">{resource.title}</h3>
              <p className="text-gray-600 mb-4">{resource.description}</p>
              <div className="flex flex-wrap gap-2 mb-4">
                {resource.tags.map((tag, index) => (
                  <span
                    key={index}
                    className="px-2 py-1 bg-gray-100 text-gray-600 text-sm rounded-md"
                  >
                    {tag}
                  </span>
                ))}
              </div>
              <div className="flex justify-between items-center mt-4">
                <div className="flex space-x-2">
                  <button
                    onClick={() => handleEditResource(resource)}
                    className="text-gray-600 hover:text-indigo-600"
                  >
                    <Edit className="h-5 w-5" />
                  </button>
                  <button
                    onClick={() => handleDeleteResource(resource.id)}
                    className="text-gray-600 hover:text-red-600"
                  >
                    <Trash2 className="h-5 w-5" />
                  </button>
                </div>
                <a
                  href={resource.url}
                  target="_blank"
                  rel="noopener noreferrer"
                  className="text-indigo-600 hover:text-indigo-700 text-sm font-medium"
                >
                  View Resource →
                </a>
              </div>
            </div>
          ))}
        </div>
      )}
      {isAddModalOpen && <ResourceModal />}
    </div>
  );
};
````

## File: src/components/admin/AdminSettings.tsx
````typescript
import React, { useState } from 'react';
import { Save, AlertCircle, CheckCircle } from 'lucide-react';
import { useAuth } from '../../contexts/AuthContext';
export const AdminSettings: React.FC = () => {
  const { user } = useAuth();
  const [settings, setSettings] = useState({
    emailNotifications: true,
    maintenanceMode: false,
    userRegistration: true,
    contentModeration: true,
    analyticsTracking: true,
    backupFrequency: 'daily'
  });
  const [saving, setSaving] = useState(false);
  const [success, setSuccess] = useState(false);
  const [error, setError] = useState<string | null>(null);
  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    setSaving(true);
    setError(null);
    setSuccess(false);
    try {
      // In a real app, you would save these settings to Firebase
      await new Promise(resolve => setTimeout(resolve, 1000)); // Simulate API call
      setSuccess(true);
      setTimeout(() => setSuccess(false), 3000);
    } catch (err: any) {
      setError(err.message || 'Failed to save settings');
    } finally {
      setSaving(false);
    }
  };
  return (
    <div>
      <div className="mb-6">
        <h1 className="text-2xl font-bold text-gray-900">Platform Settings</h1>
        <p className="text-gray-600">Configure global platform settings and preferences</p>
      </div>
      {error && (
        <div className="mb-4 p-3 bg-red-50 border border-red-200 rounded-lg flex items-center text-red-700">
          <AlertCircle className="h-5 w-5 mr-2" />
          {error}
        </div>
      )}
      {success && (
        <div className="mb-4 p-3 bg-green-50 border border-green-200 rounded-lg flex items-center text-green-700">
          <CheckCircle className="h-5 w-5 mr-2" />
          Settings saved successfully
        </div>
      )}
      <div className="bg-white rounded-lg shadow">
        <form onSubmit={handleSubmit} className="p-6 space-y-6">
          <div className="grid gap-6 md:grid-cols-2">
            <div>
              <h3 className="text-lg font-medium text-gray-900 mb-4">General Settings</h3>
              <div className="space-y-4">
                <label className="flex items-center justify-between">
                  <span className="text-gray-700">Email Notifications</span>
                  <input
                    type="checkbox"
                    checked={settings.emailNotifications}
                    onChange={(e) => setSettings(prev => ({
                      ...prev,
                      emailNotifications: e.target.checked
                    }))}
                    className="rounded text-indigo-600 focus:ring-indigo-500"
                  />
                </label>
                <label className="flex items-center justify-between">
                  <span className="text-gray-700">Maintenance Mode</span>
                  <input
                    type="checkbox"
                    checked={settings.maintenanceMode}
                    onChange={(e) => setSettings(prev => ({
                      ...prev,
                      maintenanceMode: e.target.checked
                    }))}
                    className="rounded text-indigo-600 focus:ring-indigo-500"
                  />
                </label>
                <label className="flex items-center justify-between">
                  <span className="text-gray-700">User Registration</span>
                  <input
                    type="checkbox"
                    checked={settings.userRegistration}
                    onChange={(e) => setSettings(prev => ({
                      ...prev,
                      userRegistration: e.target.checked
                    }))}
                    className="rounded text-indigo-600 focus:ring-indigo-500"
                  />
                </label>
              </div>
            </div>
            <div>
              <h3 className="text-lg font-medium text-gray-900 mb-4">Security & Privacy</h3>
              <div className="space-y-4">
                <label className="flex items-center justify-between">
                  <span className="text-gray-700">Content Moderation</span>
                  <input
                    type="checkbox"
                    checked={settings.contentModeration}
                    onChange={(e) => setSettings(prev => ({
                      ...prev,
                      contentModeration: e.target.checked
                    }))}
                    className="rounded text-indigo-600 focus:ring-indigo-500"
                  />
                </label>
                <label className="flex items-center justify-between">
                  <span className="text-gray-700">Analytics Tracking</span>
                  <input
                    type="checkbox"
                    checked={settings.analyticsTracking}
                    onChange={(e) => setSettings(prev => ({
                      ...prev,
                      analyticsTracking: e.target.checked
                    }))}
                    className="rounded text-indigo-600 focus:ring-indigo-500"
                  />
                </label>
                <div>
                  <label className="block text-sm font-medium text-gray-700 mb-1">
                    Backup Frequency
                  </label>
                  <select
                    value={settings.backupFrequency}
                    onChange={(e) => setSettings(prev => ({
                      ...prev,
                      backupFrequency: e.target.value
                    }))}
                    className="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md"
                  >
                    <option value="hourly">Hourly</option>
                    <option value="daily">Daily</option>
                    <option value="weekly">Weekly</option>
                    <option value="monthly">Monthly</option>
                  </select>
                </div>
              </div>
            </div>
          </div>
          <div className="flex justify-end pt-4">
            <button
              type="submit"
              disabled={saving}
              className="bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors flex items-center disabled:opacity-50"
            >
              {saving ? (
                <>
                  <div className="animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"></div>
                  Saving...
                </>
              ) : (
                <>
                  <Save className="h-5 w-5 mr-2" />
                  Save Settings
                </>
              )}
            </button>
          </div>
        </form>
      </div>
    </div>
  );
};
````

## File: src/components/admin/AdminSidebar.tsx
````typescript
import React from 'react';
import { NavLink, useNavigate } from 'react-router-dom';
import { Users, BookOpen, BarChart2, Settings, Shield, LogOut, Brain, FileText } from 'lucide-react';
import { useAuth } from '../../contexts/AuthContext';
export const AdminSidebar: React.FC = () => {
  const { signOut } = useAuth();
  const navigate = useNavigate();
  const navItems = [
    { path: '/admin', icon: BarChart2, label: 'Dashboard', exact: true },
    { path: '/admin/users', icon: Users, label: 'Users' },
    { path: '/admin/content', icon: FileText, label: 'Content' },
    { path: '/admin/assessments/management', icon: Brain, label: 'Assessment Management' },
    { path: '/admin/settings', icon: Settings, label: 'Settings' }
  ];
  const handleSignOut = async () => {
    try {
      await signOut();
      navigate('/', { replace: true });
    } catch (error) {
      console.error('Error signing out:', error);
    }
  };
  return (
    <div className="fixed left-0 top-0 h-screen w-64 bg-white border-r border-gray-200 p-4">
      <div className="flex items-center space-x-2 mb-8">
        <Shield className="h-8 w-8 text-indigo-600" />
        <span className="text-xl font-bold">Admin Panel</span>
      </div>
      <nav className="space-y-2">
        {navItems.map((item) => (
          <NavLink
            key={item.path}
            to={item.path}
            end={item.exact}
            className={({ isActive }) => `
              flex items-center space-x-2 px-4 py-2 rounded-lg transition-colors
              ${isActive 
                ? 'bg-indigo-50 text-indigo-600' 
                : 'text-gray-600 hover:bg-gray-50'}
            `}
          >
            <item.icon className="h-5 w-5" />
            <span>{item.label}</span>
          </NavLink>
        ))}
        <button
          onClick={handleSignOut}
          className="w-full flex items-center space-x-2 px-4 py-2 rounded-lg transition-colors text-red-600 hover:bg-red-50"
        >
          <LogOut className="h-5 w-5" />
          <span>Sign Out</span>
        </button>
      </nav>
    </div>
  );
};
````

## File: src/components/admin/AdminUsers.tsx
````typescript
import React, { useState, useEffect } from 'react';
import { User, Trash2, Edit, Search, Shield } from 'lucide-react';
import { getAllUsers, updateUserRole, deleteUser, grantAdminPrivileges } from '../../services/admin.service';
import type { AdminUser } from '../../services/admin.service';
export const AdminUsers: React.FC = () => {
  const [users, setUsers] = useState<AdminUser[]>([]);
  const [search, setSearch] = useState('');
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState<string | null>(null);
  const [success, setSuccess] = useState<string | null>(null);
  useEffect(() => {
    const unsubscribe = getAllUsers((data) => {
      setUsers(data);
      setLoading(false);
    });
    return () => unsubscribe();
  }, []);
  const filteredUsers = users.filter(user => 
    (user.name?.toLowerCase().includes(search.toLowerCase()) || 
     user.email?.toLowerCase().includes(search.toLowerCase()))
  );
  const handleRoleChange = async (userId: string, newRole: string) => {
    try {
      await updateUserRole(userId, newRole);
      setSuccess('User role updated successfully');
      setTimeout(() => setSuccess(null), 3000);
    } catch (error) {
      setError('Error updating user role');
      setTimeout(() => setError(null), 3000);
    }
  };
  const handleDeleteUser = async (userId: string) => {
    if (window.confirm('Are you sure you want to delete this user?')) {
      try {
        await deleteUser(userId);
        setSuccess('User deleted successfully');
        setTimeout(() => setSuccess(null), 3000);
      } catch (error) {
        setError('Error deleting user');
        setTimeout(() => setError(null), 3000);
      }
    }
  };
  const handleGrantAdmin = async () => {
    try {
      await grantAdminPrivileges('naik97059@gmail.com');
      setSuccess('Admin privileges granted successfully');
      setTimeout(() => setSuccess(null), 3000);
    } catch (error) {
      setError('Error granting admin privileges');
      setTimeout(() => setError(null), 3000);
    }
  };
  if (loading) {
    return (
      <div className="flex items-center justify-center h-64">
        <div className="animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"></div>
      </div>
    );
  }
  return (
    <div>
      <div className="mb-6">
        <h1 className="text-2xl font-bold text-gray-900">User Management</h1>
        <p className="text-gray-600">Manage user accounts and permissions</p>
      </div>
      {error && (
        <div className="mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700">
          {error}
        </div>
      )}
      {success && (
        <div className="mb-4 p-3 bg-green-50 border border-green-200 rounded-lg text-green-700">
          {success}
        </div>
      )}
      <div className="mb-6 flex justify-between items-center">
        <div className="relative flex-1 mr-4">
          <Search className="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5" />
          <input
            type="text"
            placeholder="Search users..."
            value={search}
            onChange={(e) => setSearch(e.target.value)}
            className="w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500"
          />
        </div>
        <button
          onClick={handleGrantAdmin}
          className="bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors flex items-center"
        >
          <Shield className="h-5 w-5 mr-2" />
          Grant Admin Access
        </button>
      </div>
      <div className="bg-white rounded-lg shadow">
        <table className="min-w-full divide-y divide-gray-200">
          <thead>
            <tr>
              <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                User
              </th>
              <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                Role
              </th>
              <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                Status
              </th>
              <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                Actions
              </th>
            </tr>
          </thead>
          <tbody className="bg-white divide-y divide-gray-200">
            {filteredUsers.map((user) => (
              <tr key={user.id}>
                <td className="px-6 py-4 whitespace-nowrap">
                  <div className="flex items-center">
                    <div className="h-10 w-10 rounded-full bg-gray-100 flex items-center justify-center">
                      <User className="h-5 w-5 text-gray-500" />
                    </div>
                    <div className="ml-4">
                      <div className="text-sm font-medium text-gray-900">{user.name || 'N/A'}</div>
                      <div className="text-sm text-gray-500">{user.email || 'N/A'}</div>
                    </div>
                  </div>
                </td>
                <td className="px-6 py-4 whitespace-nowrap">
                  <select
                    value={user.role || 'user'}
                    onChange={(e) => handleRoleChange(user.id, e.target.value)}
                    className="border rounded px-2 py-1 text-sm"
                  >
                    <option value="user">User</option>
                    <option value="admin">Admin</option>
                    <option value="moderator">Moderator</option>
                  </select>
                </td>
                <td className="px-6 py-4 whitespace-nowrap">
                  <span className={`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${
                    user.active
                      ? 'bg-green-100 text-green-800'
                      : 'bg-red-100 text-red-800'
                  }`}>
                    {user.active ? 'Active' : 'Inactive'}
                  </span>
                </td>
                <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                  <button
                    onClick={() => handleDeleteUser(user.id)}
                    className="text-red-600 hover:text-red-900 mr-2"
                  >
                    <Trash2 className="h-5 w-5" />
                  </button>
                  <button className="text-indigo-600 hover:text-indigo-900">
                    <Edit className="h-5 w-5" />
                  </button>
                </td>
              </tr>
            ))}
          </tbody>
        </table>
      </div>
    </div>
  );
};
````

## File: src/components/admin/AssessmentManagement.tsx
````typescript
import React, { useState, useEffect } from 'react';
import { collection, addDoc, updateDoc, deleteDoc, doc, getDocs } from 'firebase/firestore';
import { db } from '../../config/firebase';
import { PlusCircle, Edit2, Trash2 } from 'lucide-react';
interface Domain {
  id: string;
  name: string;
  description: string;
}
export const AssessmentManagement: React.FC = () => {
  const [domains, setDomains] = useState<Domain[]>([]);
  const [newDomain, setNewDomain] = useState({ name: '', description: '' });
  const [editingDomain, setEditingDomain] = useState<Domain | null>(null);
  const [isEditing, setIsEditing] = useState(false);
  useEffect(() => {
    fetchDomains();
  }, []);
  const fetchDomains = async () => {
    try {
      const domainsCollection = collection(db, 'domains');
      const domainsSnapshot = await getDocs(domainsCollection);
      const domainsList = domainsSnapshot.docs.map(doc => ({
        id: doc.id,
        ...doc.data()
      } as Domain));
      setDomains(domainsList);
    } catch (error) {
      console.error('Error fetching domains:', error);
    }
  };
  const handleAddDomain = async (e: React.FormEvent) => {
    e.preventDefault();
    try {
      const domainsCollection = collection(db, 'domains');
      await addDoc(domainsCollection, {
        name: newDomain.name,
        description: newDomain.description
      });
      setNewDomain({ name: '', description: '' });
      fetchDomains();
    } catch (error) {
      console.error('Error adding domain:', error);
    }
  };
  const handleEditDomain = async (e: React.FormEvent) => {
    e.preventDefault();
    if (!editingDomain) return;
    try {
      const domainRef = doc(db, 'domains', editingDomain.id);
      await updateDoc(domainRef, {
        name: editingDomain.name,
        description: editingDomain.description
      });
      setIsEditing(false);
      setEditingDomain(null);
      fetchDomains();
    } catch (error) {
      console.error('Error updating domain:', error);
    }
  };
  const handleDeleteDomain = async (domainId: string) => {
    if (window.confirm('Are you sure you want to delete this domain?')) {
      try {
        const domainRef = doc(db, 'domains', domainId);
        await deleteDoc(domainRef);
        fetchDomains();
      } catch (error) {
        console.error('Error deleting domain:', error);
      }
    }
  };
  return (
    <div className="p-6">
      <h2 className="text-2xl font-bold mb-6">Assessment Domain Management</h2>
      {/* Add/Edit Domain Form */}
      <form onSubmit={isEditing ? handleEditDomain : handleAddDomain} className="mb-8 bg-white p-6 rounded-lg shadow">
        <h3 className="text-lg font-semibold mb-4">
          {isEditing ? 'Edit Domain' : 'Add New Domain'}
        </h3>
        <div className="grid grid-cols-1 gap-4">
          <div>
            <label className="block text-sm font-medium text-gray-700">Domain Name</label>
            <input
              type="text"
              value={isEditing ? editingDomain?.name : newDomain.name}
              onChange={(e) => isEditing 
                ? setEditingDomain(prev => prev ? { ...prev, name: e.target.value } : null)
                : setNewDomain(prev => ({ ...prev, name: e.target.value }))
              }
              className="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"
              required
            />
          </div>
          <div>
            <label className="block text-sm font-medium text-gray-700">Description</label>
            <textarea
              value={isEditing ? editingDomain?.description : newDomain.description}
              onChange={(e) => isEditing
                ? setEditingDomain(prev => prev ? { ...prev, description: e.target.value } : null)
                : setNewDomain(prev => ({ ...prev, description: e.target.value }))
              }
              className="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"
              rows={3}
              required
            />
          </div>
          <div className="flex justify-end gap-2">
            {isEditing && (
              <button
                type="button"
                onClick={() => {
                  setIsEditing(false);
                  setEditingDomain(null);
                }}
                className="px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200"
              >
                Cancel
              </button>
            )}
            <button
              type="submit"
              className="px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-md hover:bg-indigo-700"
            >
              {isEditing ? 'Update Domain' : 'Add Domain'}
            </button>
          </div>
        </div>
      </form>
      {/* Domains List */}
      <div className="bg-white rounded-lg shadow overflow-hidden">
        <table className="min-w-full divide-y divide-gray-200">
          <thead className="bg-gray-50">
            <tr>
              <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Domain Name</th>
              <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Description</th>
              <th className="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
            </tr>
          </thead>
          <tbody className="bg-white divide-y divide-gray-200">
            {domains.map((domain) => (
              <tr key={domain.id}>
                <td className="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">{domain.name}</td>
                <td className="px-6 py-4 text-sm text-gray-500">{domain.description}</td>
                <td className="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                  <button
                    onClick={() => {
                      setEditingDomain(domain);
                      setIsEditing(true);
                    }}
                    className="text-indigo-600 hover:text-indigo-900 mr-3"
                  >
                    <Edit2 className="h-4 w-4" />
                  </button>
                  <button
                    onClick={() => handleDeleteDomain(domain.id)}
                    className="text-red-600 hover:text-red-900"
                  >
                    <Trash2 className="h-4 w-4" />
                  </button>
                </td>
              </tr>
            ))}
          </tbody>
        </table>
      </div>
    </div>
  );
};
````

## File: src/components/assessment/AssessmentModal.tsx
````typescript
import React, { useState, useEffect } from 'react';
import { X, Brain, ArrowRight, CheckCircle2, AlertCircle, Clock } from 'lucide-react';
import { useAuth } from '../../contexts/AuthContext';
import { addAssessment, getAssessmentQuestions } from '../../services/firebase.service';
import type { AssessmentQuestion } from '../../services/firebase.service';
interface AssessmentModalProps {
  isOpen: boolean;
  onClose: () => void;
}
const AssessmentModal = ({ isOpen, onClose }: AssessmentModalProps) => {
  const { user } = useAuth();
  const [currentQuestion, setCurrentQuestion] = useState(0);
  const [answers, setAnswers] = useState<string[]>([]);
  const [questions, setQuestions] = useState<AssessmentQuestion[]>([]);
  const [difficulty, setDifficulty] = useState<'easy' | 'medium' | 'hard'>('medium');
  const [completed, setCompleted] = useState(false);
  const [timeLeft, setTimeLeft] = useState(30 * 60); // 30 minutes in seconds
  const [isSubmitting, setIsSubmitting] = useState(false);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState<string | null>(null);
  useEffect(() => {
    if (!isOpen) return;
    const unsubscribe = getAssessmentQuestions((data) => {
      const filteredQuestions = data.filter(q => q.difficulty === difficulty);
      setQuestions(filteredQuestions);
      setLoading(false);
    });
    return () => unsubscribe();
  }, [isOpen, difficulty]);
  useEffect(() => {
    let timer: NodeJS.Timeout;
    if (isOpen && !completed && timeLeft > 0) {
      timer = setInterval(() => {
        setTimeLeft(prev => {
          if (prev <= 1) {
            clearInterval(timer);
            setCompleted(true);
            return 0;
          }
          return prev - 1;
        });
      }, 1000);
    }
    return () => clearInterval(timer);
  }, [isOpen, completed, timeLeft]);
  if (!isOpen) return null;
  if (loading) {
    return (
      <div className="fixed inset-0 bg-black/50 flex items-center justify-center z-50">
        <div className="bg-white rounded-xl p-8 max-w-2xl w-full mx-4">
          <div className="flex items-center justify-center">
            <div className="animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"></div>
          </div>
        </div>
      </div>
    );
  }
  if (questions.length === 0) {
    return (
      <div className="fixed inset-0 bg-black/50 flex items-center justify-center z-50">
        <div className="bg-white rounded-xl p-8 max-w-2xl w-full mx-4">
          <div className="text-center">
            <AlertCircle className="h-12 w-12 text-yellow-500 mx-auto mb-4" />
            <h3 className="text-lg font-medium text-gray-900 mb-2">No Questions Available</h3>
            <p className="text-gray-600 mb-4">There are no questions available for this difficulty level.</p>
            <button
              onClick={onClose}
              className="bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors"
            >
              Close
            </button>
          </div>
        </div>
      </div>
    );
  }
  const currentQuestionData = questions[currentQuestion];
  if (!currentQuestionData) return null;
  const formatTime = (seconds: number) => {
    const minutes = Math.floor(seconds / 60);
    const remainingSeconds = seconds % 60;
    return `${minutes}:${remainingSeconds.toString().padStart(2, '0')}`;
  };
  const handleAnswer = async (answer: string) => {
    const newAnswers = [...answers, answer];
    setAnswers(newAnswers);
    // Adapt difficulty based on correct answers
    const correctCount = newAnswers.filter(
      (a, i) => questions[i] && a === questions[i].correctAnswer
    ).length;
    const accuracy = correctCount / newAnswers.length;
    if (accuracy > 0.7) {
      setDifficulty('hard');
    } else if (accuracy < 0.4) {
      setDifficulty('easy');
    } else {
      setDifficulty('medium');
    }
    if (currentQuestion < questions.length - 1) {
      setCurrentQuestion(prev => prev + 1);
    } else {
      setCompleted(true);
      if (user) {
        setIsSubmitting(true);
        try {
          const score = Math.round((correctCount / newAnswers.length) * 100);
          await addAssessment({
            userId: user.id,
            type: currentQuestionData.category === 'knowledge' ? 'Knowledge Assessment' :
                  currentQuestionData.category === 'skills' ? 'Skills Assessment' : 
                  'Learning Style Assessment',
            score,
            improvement: '+12%',
            completedAt: new Date()
          });
        } catch (error) {
          console.error('Error saving assessment:', error);
          setError('Failed to save assessment results');
        } finally {
          setIsSubmitting(false);
        }
      }
    }
  };
  const score = answers.filter(
    (answer, index) => questions[index] && answer === questions[index].correctAnswer
  ).length;
  const scorePercentage = Math.round((score / questions.length) * 100);
  return (
    <div className="fixed inset-0 bg-black/50 flex items-center justify-center z-50">
      <div className="bg-white rounded-xl p-8 max-w-2xl w-full mx-4 relative animate-fadeIn">
        <button
          onClick={onClose}
          className="absolute right-4 top-4 text-gray-400 hover:text-gray-600"
        >
          <X className="h-5 w-5" />
        </button>
        {error && (
          <div className="mb-4 p-3 bg-red-50 border border-red-200 rounded-lg flex items-center text-red-700">
            <AlertCircle className="h-5 w-5 mr-2" />
            {error}
          </div>
        )}
        {!completed ? (
          <>
            <div className="flex items-center justify-between mb-6">
              <div className="flex items-center space-x-2">
                <Brain className="h-6 w-6 text-indigo-600" />
                <h2 className="text-2xl font-bold text-gray-900">
                  Smart Assessment
                </h2>
              </div>
              <div className="flex items-center text-gray-600">
                <Clock className="h-5 w-5 mr-2" />
                {formatTime(timeLeft)}
              </div>
            </div>
            <div className="mb-4">
              <div className="w-full bg-gray-200 rounded-full h-2">
                <div
                  className="bg-indigo-600 h-2 rounded-full transition-all duration-300"
                  style={{
                    width: `${((currentQuestion + 1) / questions.length) * 100}%`,
                  }}
                />
              </div>
              <div className="flex justify-between mt-2 text-sm text-gray-600">
                <span>Question {currentQuestion + 1} of {questions.length}</span>
                <span>Difficulty: {difficulty}</span>
              </div>
            </div>
            <div className="mb-8">
              <h3 className="text-lg font-medium text-gray-900 mb-4">
                {currentQuestionData.question}
              </h3>
              <div className="space-y-3">
                {currentQuestionData.options.map((option, index) => (
                  <button
                    key={index}
                    onClick={() => handleAnswer(option)}
                    className="w-full text-left p-4 rounded-lg border border-gray-200 hover:border-indigo-500 hover:bg-indigo-50 transition-colors"
                  >
                    <span className="font-medium text-gray-700">{option}</span>
                  </button>
                ))}
              </div>
            </div>
          </>
        ) : (
          <div className="text-center">
            <div className="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
              <CheckCircle2 className="h-8 w-8 text-green-600" />
            </div>
            <h2 className="text-2xl font-bold text-gray-900 mb-2">
              Assessment Complete!
            </h2>
            <p className="text-gray-600 mb-6">
              You scored {scorePercentage}% ({score} out of {questions.length} correct)
            </p>
            <div className="bg-indigo-50 rounded-lg p-4 mb-6 text-left">
              <h3 className="font-semibold text-indigo-900 mb-2">Performance Analysis</h3>
              <ul className="space-y-2 text-indigo-700">
                <li className="flex items-center">
                  <CheckCircle2 className="h-4 w-4 mr-2" />
                  Strong performance in: {currentQuestionData.category}
                </li>
                <li className="flex items-center">
                  <AlertCircle className="h-4 w-4 mr-2" />
                  Areas for improvement: Time management
                </li>
              </ul>
            </div>
            <div className="flex space-x-4">
              <button
                onClick={onClose}
                className="flex-1 px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors"
              >
                Close
              </button>
              <button
                onClick={() => {
                  setCurrentQuestion(0);
                  setAnswers([]);
                  setCompleted(false);
                  setTimeLeft(30 * 60);
                  setError(null);
                }}
                className="flex-1 bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700 transition-colors inline-flex items-center justify-center"
                disabled={isSubmitting}
              >
                {isSubmitting ? 'Saving...' : (
                  <>
                    Retake Assessment
                    <ArrowRight className="h-4 w-4 ml-2" />
                  </>
                )}
              </button>
            </div>
          </div>
        )}
      </div>
    </div>
  );
};
export default AssessmentModal;
````

## File: src/components/assessment/questions.ts
````typescript
export interface Question {
  question: string;
  options: string[];
  correctAnswer: string;
  difficulty: 'easy' | 'medium' | 'hard';
}
export const questions: Question[] = [
  {
    question: "What is the primary purpose of a variable in programming?",
    options: [
      "To store and manage data",
      "To create visual effects",
      "To connect to the internet",
      "To print text on screen"
    ],
    correctAnswer: "To store and manage data",
    difficulty: "easy"
  },
  {
    question: "Which of these is NOT a common programming data type?",
    options: [
      "Integer",
      "String",
      "Picture",
      "Boolean"
    ],
    correctAnswer: "Picture",
    difficulty: "easy"
  },
  {
    question: "What does HTML stand for?",
    options: [
      "Hyper Text Markup Language",
      "High Tech Modern Language",
      "Hyper Transfer Machine Language",
      "Home Tool Markup Language"
    ],
    correctAnswer: "Hyper Text Markup Language",
    difficulty: "easy"
  },
  {
    question: "What is the difference between '==' and '===' in JavaScript?",
    options: [
      "They are exactly the same",
      "'===' checks both value and type, while '==' only checks value",
      "'==' is used for numbers, '===' for strings",
      "'===' is deprecated and shouldn't be used"
    ],
    correctAnswer: "'===' checks both value and type, while '==' only checks value",
    difficulty: "medium"
  },
  {
    question: "What is a closure in JavaScript?",
    options: [
      "A function that has access to variables in its outer scope",
      "A way to close browser windows",
      "A method to end program execution",
      "A type of loop structure"
    ],
    correctAnswer: "A function that has access to variables in its outer scope",
    difficulty: "medium"
  },
  {
    question: "What is the purpose of the 'async/await' keywords in JavaScript?",
    options: [
      "To handle asynchronous operations more elegantly",
      "To make code run faster",
      "To create loops",
      "To define variables"
    ],
    correctAnswer: "To handle asynchronous operations more elegantly",
    difficulty: "medium"
  },
  {
    question: "What is the time complexity of binary search?",
    options: [
      "O(log n)",
      "O(n)",
      "O(n²)",
      "O(1)"
    ],
    correctAnswer: "O(log n)",
    difficulty: "hard"
  },
  {
    question: "What is the difference between process and thread?",
    options: [
      "Processes share memory space, threads don't",
      "Threads share memory space, processes don't",
      "They are exactly the same",
      "Threads can only run on Windows"
    ],
    correctAnswer: "Threads share memory space, processes don't",
    difficulty: "hard"
  },
  {
    question: "What is a memory leak?",
    options: [
      "When a program fails to release memory that is no longer needed",
      "When a computer runs out of RAM",
      "When data is stolen from memory",
      "When memory chips physically leak"
    ],
    correctAnswer: "When a program fails to release memory that is no longer needed",
    difficulty: "hard"
  }
];
````

## File: src/components/auth/AuthModalContent.tsx
````typescript
import React, { useState } from 'react';
import { Mail, Lock, Loader2, AlertCircle } from 'lucide-react';
interface AuthModalContentProps {
  mode: 'signin' | 'signup';
  onSubmit: (data: { email: string; password: string }) => Promise<void>;
  onSwitchMode: () => void;
  isLoading: boolean;
  error?: string;
}
const AuthModalContent = ({ 
  mode, 
  onSubmit, 
  onSwitchMode, 
  isLoading,
  error 
}: AuthModalContentProps) => {
  const [formData, setFormData] = useState({
    email: '',
    password: '',
  });
  const [validationErrors, setValidationErrors] = useState<Record<string, string>>({});
  const validateForm = () => {
    const errors: Record<string, string> = {};
    if (!formData.email.trim()) {
      errors.email = 'Email is required';
    } else if (!/\S+@\S+\.\S+/.test(formData.email)) {
      errors.email = 'Invalid email address';
    }
    if (!formData.password) {
      errors.password = 'Password is required';
    } else if (formData.password.length < 6) {
      errors.password = 'Password must be at least 6 characters';
    }
    setValidationErrors(errors);
    return Object.keys(errors).length === 0;
  };
  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    if (!validateForm()) return;
    await onSubmit(formData);
  };
  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    const { name, value } = e.target;
    setFormData(prev => ({ ...prev, [name]: value }));
    if (validationErrors[name]) {
      setValidationErrors(prev => ({ ...prev, [name]: '' }));
    }
  };
  return (
    <>
      <h2 className="text-2xl font-bold text-gray-900 mb-6">
        {mode === 'signin' ? 'Welcome Back!' : 'Create Your Account'}
      </h2>
      {error && (
        <div className="mb-4 p-3 bg-red-50 border border-red-200 rounded-lg flex items-center text-red-700">
          <AlertCircle className="h-5 w-5 mr-2" />
          <span className="text-sm">{error}</span>
        </div>
      )}
      <form onSubmit={handleSubmit} className="space-y-4">
        <div>
          <label className="block text-sm font-medium text-gray-700 mb-1">
            Email Address
          </label>
          <div className="relative">
            <div className="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
              <Mail className="h-5 w-5 text-gray-400" />
            </div>
            <input
              type="email"
              name="email"
              value={formData.email}
              onChange={handleChange}
              className={`block w-full pl-10 pr-3 py-2 border ${
                validationErrors.email ? 'border-red-300' : 'border-gray-300'
              } rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent`}
              placeholder="you@example.com"
            />
          </div>
          {validationErrors.email && (
            <p className="mt-1 text-sm text-red-600">{validationErrors.email}</p>
          )}
        </div>
        <div>
          <label className="block text-sm font-medium text-gray-700 mb-1">
            Password
          </label>
          <div className="relative">
            <div className="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
              <Lock className="h-5 w-5 text-gray-400" />
            </div>
            <input
              type="password"
              name="password"
              value={formData.password}
              onChange={handleChange}
              className={`block w-full pl-10 pr-3 py-2 border ${
                validationErrors.password ? 'border-red-300' : 'border-gray-300'
              } rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent`}
              placeholder="••••••"
            />
          </div>
          {validationErrors.password && (
            <p className="mt-1 text-sm text-red-600">{validationErrors.password}</p>
          )}
        </div>
        <button
          type="submit"
          disabled={isLoading}
          className="w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed"
        >
          {isLoading ? (
            <Loader2 className="h-5 w-5 animate-spin" />
          ) : mode === 'signin' ? (
            'Sign In'
          ) : (
            'Create Account'
          )}
        </button>
        <div className="text-sm text-center mt-4">
          {mode === 'signin' ? (
            <p>
              Don't have an account?{' '}
              <button
                type="button"
                onClick={onSwitchMode}
                className="text-indigo-600 hover:text-indigo-500 font-medium"
              >
                Sign up
              </button>
            </p>
          ) : (
            <p>
              Already have an account?{' '}
              <button
                type="button"
                onClick={onSwitchMode}
                className="text-indigo-600 hover:text-indigo-500 font-medium"
              >
                Sign in
              </button>
            </p>
          )}
        </div>
      </form>
    </>
  );
};
export default AuthModalContent;
````

## File: src/components/learning/LearningPath.tsx
````typescript
import React, { useState, useEffect, useCallback } from 'react';
import { learningPathService } from '../../services/learningPathService';
interface LearningStep {
  id: string;
  title: string;
  description: string;
  difficulty: 'beginner' | 'intermediate' | 'advanced';
  duration: string;
  modules: string[];
  prerequisites: string[];
  learningOutcomes: string[];
  relevanceScore?: number;
}
interface LearningProfile {
  completedCourses: string[];
  interests: string[];
  currentSkillLevel: string;
  preferredLearningStyle: string;
  goals: string[];
}
export const LearningPath: React.FC = () => {
  const [learningPath, setLearningPath] = useState<LearningStep[]>([]);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState<string | null>(null);
  const [profile, setProfile] = useState<LearningProfile>({
    completedCourses: [],
    interests: [],
    currentSkillLevel: 'beginner',
    preferredLearningStyle: 'visual',
    goals: []
  });
  const generateLearningPath = useCallback(async () => {
    if (profile.interests.length === 0 && profile.goals.length === 0) {
      return; // Don't generate if no interests or goals are set
    }
    try {
      setLoading(true);
      setError(null);
      const steps = await learningPathService.generateRecommendedPaths(profile);
      setLearningPath(steps);
    } catch (err) {
      setError('Failed to generate learning path. Please try again.');
      console.error('Error generating learning path:', err);
    } finally {
      setLoading(false);
    }
  }, [profile]);
  // Auto-generate learning path when profile changes
  useEffect(() => {
    const debounceTimer = setTimeout(() => {
      generateLearningPath();
    }, 1000); // Wait 1 second after changes before generating
    return () => clearTimeout(debounceTimer);
  }, [generateLearningPath]);
  const handleProfileChange = (field: keyof LearningProfile, value: string | string[]) => {
    setProfile(prev => ({
      ...prev,
      [field]: value
    }));
  };
  const handleArrayInput = (field: keyof LearningProfile) => (e: React.KeyboardEvent<HTMLInputElement>) => {
    const input = e.currentTarget;
    if (e.key === 'Enter' && input.value.trim()) {
      handleProfileChange(field, [...(profile[field] as string[]), input.value.trim()]);
      input.value = '';
    }
  };
  const removeItem = (field: keyof LearningProfile, index: number) => {
    const newArray = [...(profile[field] as string[])];
    newArray.splice(index, 1);
    handleProfileChange(field, newArray);
  };
  const getDifficultyColor = (difficulty: string) => {
    switch (difficulty) {
      case 'beginner':
        return 'text-green-600';
      case 'intermediate':
        return 'text-yellow-600';
      case 'advanced':
        return 'text-red-600';
      default:
        return 'text-gray-600';
    }
  };
  return (
    <div className="max-w-4xl mx-auto p-4">
      <div className="mb-8">
        <h2 className="text-2xl font-bold text-gray-800 mb-4">AI Learning Path Recommendations</h2>
        <div className="space-y-6 bg-white p-6 rounded-lg shadow-md">
          <div>
            <label className="block text-sm font-medium text-gray-700 mb-2">
              Current Skill Level
            </label>
            <select
              value={profile.currentSkillLevel}
              onChange={(e) => handleProfileChange('currentSkillLevel', e.target.value)}
              className="w-full px-3 py-2 border border-gray-300 rounded-md"
            >
              <option value="beginner">Beginner</option>
              <option value="intermediate">Intermediate</option>
              <option value="advanced">Advanced</option>
            </select>
          </div>
          <div>
            <label className="block text-sm font-medium text-gray-700 mb-2">
              Preferred Learning Style
            </label>
            <select
              value={profile.preferredLearningStyle}
              onChange={(e) => handleProfileChange('preferredLearningStyle', e.target.value)}
              className="w-full px-3 py-2 border border-gray-300 rounded-md"
            >
              <option value="visual">Visual</option>
              <option value="auditory">Auditory</option>
              <option value="reading">Reading/Writing</option>
              <option value="kinesthetic">Hands-on</option>
            </select>
          </div>
          <div>
            <label className="block text-sm font-medium text-gray-700 mb-2">
              Completed Courses (Press Enter to add)
            </label>
            <input
              type="text"
              placeholder="Enter completed course names"
              onKeyDown={handleArrayInput('completedCourses')}
              className="w-full px-3 py-2 border border-gray-300 rounded-md"
            />
            <div className="mt-2 flex flex-wrap gap-2">
              {profile.completedCourses.map((course, index) => (
                <span
                  key={index}
                  className="bg-blue-100 text-blue-800 px-2 py-1 rounded-md text-sm flex items-center"
                >
                  {course}
                  <button
                    onClick={() => removeItem('completedCourses', index)}
                    className="ml-2 text-blue-600 hover:text-blue-800"
                  >
                    ×
                  </button>
                </span>
              ))}
            </div>
          </div>
          <div>
            <label className="block text-sm font-medium text-gray-700 mb-2">
              Interests (Press Enter to add)
            </label>
            <input
              type="text"
              placeholder="Enter your interests"
              onKeyDown={handleArrayInput('interests')}
              className="w-full px-3 py-2 border border-gray-300 rounded-md"
            />
            <div className="mt-2 flex flex-wrap gap-2">
              {profile.interests.map((interest, index) => (
                <span
                  key={index}
                  className="bg-green-100 text-green-800 px-2 py-1 rounded-md text-sm flex items-center"
                >
                  {interest}
                  <button
                    onClick={() => removeItem('interests', index)}
                    className="ml-2 text-green-600 hover:text-green-800"
                  >
                    ×
                  </button>
                </span>
              ))}
            </div>
          </div>
          <div>
            <label className="block text-sm font-medium text-gray-700 mb-2">
              Learning Goals (Press Enter to add)
            </label>
            <input
              type="text"
              placeholder="Enter your learning goals"
              onKeyDown={handleArrayInput('goals')}
              className="w-full px-3 py-2 border border-gray-300 rounded-md"
            />
            <div className="mt-2 flex flex-wrap gap-2">
              {profile.goals.map((goal, index) => (
                <span
                  key={index}
                  className="bg-purple-100 text-purple-800 px-2 py-1 rounded-md text-sm flex items-center"
                >
                  {goal}
                  <button
                    onClick={() => removeItem('goals', index)}
                    className="ml-2 text-purple-600 hover:text-purple-800"
                  >
                    ×
                  </button>
                </span>
              ))}
            </div>
          </div>
          <button
            onClick={generateLearningPath}
            disabled={loading || (profile.interests.length === 0 && profile.goals.length === 0)}
            className={`w-full px-6 py-3 rounded-md text-white font-medium ${
              loading || (profile.interests.length === 0 && profile.goals.length === 0)
                ? 'bg-gray-400'
                : 'bg-blue-500 hover:bg-blue-600'
            }`}
          >
            {loading ? 'Generating Recommendations...' : 'Generate Personalized Learning Path'}
          </button>
        </div>
        {error && (
          <div className="mt-4 p-4 bg-red-100 text-red-700 rounded-md">
            {error}
          </div>
        )}
      </div>
      {loading && (
        <div className="flex items-center justify-center p-8">
          <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"></div>
        </div>
      )}
      {learningPath.length > 0 && (
        <div className="space-y-6">
          <h3 className="text-xl font-bold text-gray-800">Your Personalized Learning Path</h3>
          <div className="space-y-4">
            {learningPath.map((step, index) => (
              <div
                key={step.id}
                className="bg-white p-6 rounded-lg shadow-md border border-gray-200"
              >
                <div className="flex items-center justify-between">
                  <div className="flex items-center gap-4">
                    <div className="bg-blue-500 text-white rounded-full w-8 h-8 flex items-center justify-center">
                      {index + 1}
                    </div>
                    <h4 className="text-xl font-semibold text-gray-800">{step.title}</h4>
                  </div>
                  <div className="flex items-center gap-3">
                    <span className={`px-3 py-1 rounded-full text-sm ${getDifficultyColor(step.difficulty)} bg-opacity-10`}>
                      {step.difficulty}
                    </span>
                    <span className="text-gray-600 text-sm">
                      ⏱️ {step.duration}
                    </span>
                  </div>
                </div>
                <div className="mt-4 space-y-4">
                  <p className="text-gray-600">{step.description}</p>
                  <div>
                    <h5 className="font-semibold text-gray-700 mb-2">Key Modules:</h5>
                    <ul className="list-disc list-inside space-y-1">
                      {step.modules.map((module, idx) => (
                        <li key={idx} className="text-gray-600">{module}</li>
                      ))}
                    </ul>
                  </div>
                  {step.prerequisites && step.prerequisites.length > 0 && (
                    <div>
                      <h5 className="font-semibold text-gray-700 mb-2">Prerequisites:</h5>
                      <ul className="list-disc list-inside space-y-1">
                        {step.prerequisites.map((prereq, idx) => (
                          <li key={idx} className="text-gray-600">{prereq}</li>
                        ))}
                      </ul>
                    </div>
                  )}
                  {step.learningOutcomes && step.learningOutcomes.length > 0 && (
                    <div>
                      <h5 className="font-semibold text-gray-700 mb-2">Learning Outcomes:</h5>
                      <ul className="list-disc list-inside space-y-1">
                        {step.learningOutcomes.map((outcome, idx) => (
                          <li key={idx} className="text-gray-600">{outcome}</li>
                        ))}
                      </ul>
                    </div>
                  )}
                  {step.relevanceScore !== undefined && (
                    <div className="mt-4 pt-4 border-t border-gray-100">
                      <div className="flex items-center gap-2">
                        <span className="text-blue-600">
                          🎯 Relevance Score:
                        </span>
                        <div className="flex-1 bg-gray-200 rounded-full h-2">
                          <div
                            className="bg-blue-600 h-2 rounded-full"
                            style={{ width: `${(step.relevanceScore / 10) * 100}%` }}
                          />
                        </div>
                        <span className="text-gray-600 text-sm">
                          {step.relevanceScore.toFixed(1)}/10
                        </span>
                      </div>
                    </div>
                  )}
                </div>
              </div>
            ))}
          </div>
        </div>
      )}
    </div>
  );
};
export default LearningPath;
````

## File: src/components/onboarding/ProfileSetup.tsx
````typescript
import React, { useState, useEffect } from 'react';
import { useNavigate } from 'react-router-dom';
import { useAuth } from '../../contexts/AuthContext';
import { Loader2, AlertCircle, Code, Database, Globe, Terminal, Server, Layout } from 'lucide-react';
import { getProfileData, updateProfileData, type ProfileData } from '../../services/profile.service';
interface ProfileSetupProps {
  onComplete?: () => void;
}
const ProfileSetup: React.FC<ProfileSetupProps> = ({ onComplete }) => {
  const { user } = useAuth();
  const navigate = useNavigate();
  const [step, setStep] = useState(1);
  const [isLoading, setIsLoading] = useState(true);
  const [error, setError] = useState<string | null>(null);
  const [profileData, setProfileData] = useState<ProfileData>({
    strengths: [],
    weaknesses: [],
    learningStyle: ''
  });
  // Load user's existing profile data from Firestore
  useEffect(() => {
    const loadProfileData = async () => {
      if (!user) return;
      try {
        const data = await getProfileData(user.id);
        if (data) {
          setProfileData({
            strengths: data.strengths || [],
            weaknesses: data.weaknesses || [],
            learningStyle: data.learningStyle || ''
          });
        }
      } catch (err: any) {
        setError(err.message || 'Failed to load profile data');
      } finally {
        setIsLoading(false);
      }
    };
    loadProfileData();
  }, [user]);
  const programmingSkills = [
    { id: 'frontend', label: 'Frontend Development', icon: Layout },
    { id: 'backend', label: 'Backend Development', icon: Server },
    { id: 'databases', label: 'Databases', icon: Database },
    { id: 'algorithms', label: 'Algorithms & Data Structures', icon: Code },
    { id: 'web', label: 'Web Technologies', icon: Globe },
    { id: 'cli', label: 'Command Line & Tools', icon: Terminal }
  ];
  const learningStyles = [
    { 
      id: 'visual', 
      label: 'Visual Learning', 
      description: 'Learn through diagrams, flowcharts, and visual documentation' 
    },
    { 
      id: 'reading', 
      label: 'Reading/Writing', 
      description: 'Learn through reading documentation and writing code' 
    },
    { 
      id: 'kinesthetic', 
      label: 'Hands-on Coding', 
      description: 'Learn by building projects and practicing code' 
    }
  ];
  const handleToggle = (skill: string, type: 'strengths' | 'weaknesses') => {
    setProfileData(prev => ({
      ...prev,
      [type]: prev[type].includes(skill)
        ? prev[type].filter(s => s !== skill)
        : [...prev[type], skill]
    }));
  };
  const handleSubmit = async () => {
    if (!user) return;
    setIsLoading(true);
    setError(null);
    try {
      await updateProfileData(user.id, {
        ...profileData,
        setupCompleted: true
      });
      // Call the onComplete callback if provided
      if (onComplete) {
        onComplete();
      }
    } catch (err: any) {
      setError(err.message || 'Failed to save profile');
      setIsLoading(false);
    }
  };
  if (isLoading) {
    return (
      <div className="min-h-screen flex items-center justify-center">
        <Loader2 className="h-8 w-8 animate-spin text-indigo-600" />
      </div>
    );
  }
  const renderStep = () => {
    switch (step) {
      case 1:
        return (
          <div className="space-y-6">
            <h2 className="text-2xl font-bold text-gray-900">Your Programming Strengths</h2>
            <p className="text-gray-600">Select the areas you're most confident in:</p>
            <div className="grid grid-cols-1 sm:grid-cols-2 gap-4">
              {programmingSkills.map(skill => (
                <button
                  key={skill.id}
                  onClick={() => handleToggle(skill.id, 'strengths')}
                  className={`p-4 rounded-lg border ${
                    profileData.strengths.includes(skill.id)
                      ? 'border-indigo-500 bg-indigo-50'
                      : 'border-gray-200 hover:border-indigo-300'
                  } transition-colors`}
                >
                  <skill.icon className="h-6 w-6 text-indigo-600 mb-2" />
                  <span className="font-medium">{skill.label}</span>
                </button>
              ))}
            </div>
          </div>
        );
      case 2:
        return (
          <div className="space-y-6">
            <h2 className="text-2xl font-bold text-gray-900">Areas to Improve</h2>
            <p className="text-gray-600">Select the programming areas you'd like to strengthen:</p>
            <div className="grid grid-cols-1 sm:grid-cols-2 gap-4">
              {programmingSkills.map(skill => (
                <button
                  key={skill.id}
                  onClick={() => handleToggle(skill.id, 'weaknesses')}
                  className={`p-4 rounded-lg border ${
                    profileData.weaknesses.includes(skill.id)
                      ? 'border-indigo-500 bg-indigo-50'
                      : 'border-gray-200 hover:border-indigo-300'
                  } transition-colors`}
                >
                  <skill.icon className="h-6 w-6 text-indigo-600 mb-2" />
                  <span className="font-medium">{skill.label}</span>
                </button>
              ))}
            </div>
          </div>
        );
      case 3:
        return (
          <div className="space-y-6">
            <h2 className="text-2xl font-bold text-gray-900">Learning Style</h2>
            <p className="text-gray-600">How do you prefer to learn programming?</p>
            <div className="space-y-4">
              {learningStyles.map(style => (
                <button
                  key={style.id}
                  onClick={() => setProfileData(prev => ({ 
                    ...prev, 
                    learningStyle: style.id as ProfileData['learningStyle']
                  }))}
                  className={`w-full p-4 rounded-lg border ${
                    profileData.learningStyle === style.id
                      ? 'border-indigo-500 bg-indigo-50'
                      : 'border-gray-200 hover:border-indigo-300'
                  } transition-colors text-left`}
                >
                  <p className="font-medium">{style.label}</p>
                  <p className="text-sm text-gray-600 mt-1">{style.description}</p>
                </button>
              ))}
            </div>
          </div>
        );
      default:
        return null;
    }
  };
  const canContinue = () => {
    switch (step) {
      case 1:
        return profileData.strengths.length > 0;
      case 2:
        return profileData.weaknesses.length > 0;
      case 3:
        return !!profileData.learningStyle;
      default:
        return false;
    }
  };
  return (
    <div className="min-h-screen bg-gray-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8">
      <div className="max-w-md w-full space-y-8 bg-white p-8 rounded-xl shadow-md">
        {error && (
          <div className="mb-4 p-3 bg-red-50 border border-red-200 rounded-lg flex items-center text-red-700">
            <AlertCircle className="h-5 w-5 mr-2" />
            {error}
          </div>
        )}
        <div className="mb-8">
          <div className="w-full bg-gray-200 rounded-full h-2">
            <div
              className="bg-indigo-600 h-2 rounded-full transition-all duration-300"
              style={{ width: `${(step / 3) * 100}%` }}
            />
          </div>
          <p className="text-sm text-gray-600 mt-2">Step {step} of 3</p>
        </div>
        {renderStep()}
        <div className="flex justify-between mt-8">
          {step > 1 && (
            <button
              onClick={() => setStep(prev => prev - 1)}
              className="px-4 py-2 text-indigo-600 hover:text-indigo-700"
            >
              Back
            </button>
          )}
          <button
            onClick={() => {
              if (step < 3) {
                setStep(prev => prev + 1);
              } else {
                handleSubmit();
              }
            }}
            disabled={isLoading || !canContinue()}
            className={`ml-auto bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700 
                     transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center`}
          >
            {isLoading ? (
              <>
                <Loader2 className="animate-spin h-5 w-5 mr-2" />
                Saving...
              </>
            ) : step === 3 ? (
              'Complete Setup'
            ) : (
              'Continue'
            )}
          </button>
        </div>
      </div>
    </div>
  );
};
export default ProfileSetup;
````

## File: src/components/settings/NotificationSettings.tsx
````typescript
import React, { useState } from 'react';
import { useAuth } from '../../contexts/AuthContext';
import { X, Loader2, CheckCircle, AlertCircle } from 'lucide-react';
interface NotificationSettingsProps {
  onClose: () => void;
}
const NotificationSettings = ({ onClose }: NotificationSettingsProps) => {
  const { user, updateUser } = useAuth();
  const [settings, setSettings] = useState(user?.notificationSettings || {
    email: {
      courseUpdates: true,
      progressReports: true,
      newFeatures: true
    },
    push: {
      lessonReminders: true,
      assessmentResults: true,
      achievements: true
    }
  });
  const [isLoading, setIsLoading] = useState(false);
  const [success, setSuccess] = useState(false);
  const [error, setError] = useState<string | null>(null);
  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    setIsLoading(true);
    setError(null);
    try {
      await updateUser({ notificationSettings: settings });
      setSuccess(true);
      setTimeout(() => {
        onClose();
      }, 1500);
    } catch (err: any) {
      setError(err.message || 'Failed to update notification settings');
    } finally {
      setIsLoading(false);
    }
  };
  const Toggle = ({ checked, onChange }: { checked: boolean; onChange: () => void }) => (
    <button
      type="button"
      className={`relative inline-flex h-6 w-11 items-center rounded-full ${
        checked ? 'bg-indigo-600' : 'bg-gray-200'
      }`}
      onClick={onChange}
    >
      <span
        className={`inline-block h-4 w-4 transform rounded-full bg-white transition ${
          checked ? 'translate-x-6' : 'translate-x-1'
        }`}
      />
    </button>
  );
  return (
    <div className="bg-white p-6 rounded-lg relative">
      <button
        onClick={onClose}
        className="absolute right-4 top-4 text-gray-400 hover:text-gray-600"
      >
        <X className="h-5 w-5" />
      </button>
      <h3 className="text-xl font-semibold mb-4">Notification Settings</h3>
      {error && (
        <div className="mb-4 p-3 bg-red-50 border border-red-200 rounded-lg flex items-center text-red-700">
          <AlertCircle className="h-5 w-5 mr-2" />
          {error}
        </div>
      )}
      <form onSubmit={handleSubmit} className="space-y-6">
        <div>
          <h4 className="font-medium text-gray-900 mb-3">Email Notifications</h4>
          <div className="space-y-3">
            {Object.entries(settings.email).map(([key, value]) => (
              <div key={key} className="flex items-center justify-between">
                <span className="text-gray-700">
                  {key.replace(/([A-Z])/g, ' $1').replace(/^./, str => str.toUpperCase())}
                </span>
                <Toggle
                  checked={value}
                  onChange={() => setSettings(prev => ({
                    ...prev,
                    email: { ...prev.email, [key]: !value }
                  }))}
                />
              </div>
            ))}
          </div>
        </div>
        <div>
          <h4 className="font-medium text-gray-900 mb-3">Push Notifications</h4>
          <div className="space-y-3">
            {Object.entries(settings.push).map(([key, value]) => (
              <div key={key} className="flex items-center justify-between">
                <span className="text-gray-700">
                  {key.replace(/([A-Z])/g, ' $1').replace(/^./, str => str.toUpperCase())}
                </span>
                <Toggle
                  checked={value}
                  onChange={() => setSettings(prev => ({
                    ...prev,
                    push: { ...prev.push, [key]: !value }
                  }))}
                />
              </div>
            ))}
          </div>
        </div>
        <button
          type="submit"
          disabled={isLoading}
          className="w-full bg-indigo-600 text-white py-2 rounded-lg hover:bg-indigo-700 transition-colors flex items-center justify-center"
        >
          {isLoading ? (
            <Loader2 className="animate-spin h-5 w-5" />
          ) : success ? (
            <CheckCircle className="h-5 w-5" />
          ) : (
            'Save Preferences'
          )}
        </button>
      </form>
    </div>
  );
};
export default NotificationSettings;
````

## File: src/components/settings/ProfileSettings.tsx
````typescript
import React, { useState } from 'react';
import { useAuth } from '../../contexts/AuthContext';
import { X, Loader2, CheckCircle, AlertCircle } from 'lucide-react';
interface ProfileSettingsProps {
  onClose: () => void;
}
const ProfileSettings = ({ onClose }: ProfileSettingsProps) => {
  const { user, updateUser } = useAuth();
  const [formData, setFormData] = useState({
    name: user?.name || '',
    bio: user?.bio || '',
    preferences: user?.preferences || {
      emailNotifications: true,
      pushNotifications: true
    }
  });
  const [isLoading, setIsLoading] = useState(false);
  const [success, setSuccess] = useState(false);
  const [error, setError] = useState<string | null>(null);
  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    setIsLoading(true);
    setError(null);
    try {
      await updateUser({
        name: formData.name,
        bio: formData.bio,
        preferences: formData.preferences
      });
      setSuccess(true);
      setTimeout(() => {
        onClose();
      }, 1500);
    } catch (err: any) {
      setError(err.message || 'Failed to update profile');
    } finally {
      setIsLoading(false);
    }
  };
  return (
    <div className="bg-white p-6 rounded-lg relative">
      <button
        onClick={onClose}
        className="absolute right-4 top-4 text-gray-400 hover:text-gray-600"
      >
        <X className="h-5 w-5" />
      </button>
      <h3 className="text-xl font-semibold mb-4">Profile Settings</h3>
      {error && (
        <div className="mb-4 p-3 bg-red-50 border border-red-200 rounded-lg flex items-center text-red-700">
          <AlertCircle className="h-5 w-5 mr-2" />
          {error}
        </div>
      )}
      <form onSubmit={handleSubmit} className="space-y-4">
        <div>
          <label className="block text-sm font-medium text-gray-700 mb-1">
            Display Name
          </label>
          <input
            type="text"
            value={formData.name}
            onChange={(e) => setFormData(prev => ({ ...prev, name: e.target.value }))}
            className="w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500"
            required
          />
        </div>
        <div>
          <label className="block text-sm font-medium text-gray-700 mb-1">
            Bio
          </label>
          <textarea
            value={formData.bio}
            onChange={(e) => setFormData(prev => ({ ...prev, bio: e.target.value }))}
            className="w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500"
            rows={3}
          />
        </div>
        <div className="space-y-3">
          <h4 className="font-medium text-gray-900">Preferences</h4>
          <label className="flex items-center justify-between">
            <span className="text-gray-700">Email Notifications</span>
            <input
              type="checkbox"
              checked={formData.preferences.emailNotifications}
              onChange={(e) => setFormData(prev => ({
                ...prev,
                preferences: {
                  ...prev.preferences,
                  emailNotifications: e.target.checked
                }
              }))}
              className="rounded text-indigo-600 focus:ring-indigo-500"
            />
          </label>
          <label className="flex items-center justify-between">
            <span className="text-gray-700">Push Notifications</span>
            <input
              type="checkbox"
              checked={formData.preferences.pushNotifications}
              onChange={(e) => setFormData(prev => ({
                ...prev,
                preferences: {
                  ...prev.preferences,
                  pushNotifications: e.target.checked
                }
              }))}
              className="rounded text-indigo-600 focus:ring-indigo-500"
            />
          </label>
        </div>
        <button
          type="submit"
          disabled={isLoading}
          className="w-full bg-indigo-600 text-white py-2 rounded-lg hover:bg-indigo-700 transition-colors flex items-center justify-center"
        >
          {isLoading ? (
            <Loader2 className="animate-spin h-5 w-5" />
          ) : success ? (
            <CheckCircle className="h-5 w-5" />
          ) : (
            'Save Changes'
          )}
        </button>
      </form>
    </div>
  );
};
export default ProfileSettings;
````

## File: src/components/skills/AnalysisResult.tsx
````typescript
import React from 'react';
import { CheckCircle2, XCircle } from 'lucide-react';
interface AnalysisResultProps {
  result: string;
}
const AnalysisResult: React.FC<AnalysisResultProps> = ({ result }) => {
  const isCorrect = result === 'CORRECT';
  return (
    <div className="rounded-lg border p-4 bg-white shadow-sm flex items-center gap-3">
      {isCorrect ? (
        <>
          <CheckCircle2 className="w-6 h-6 text-green-500" />
          <span className="text-lg font-medium text-green-700">Correct Solution!</span>
        </>
      ) : (
        <>
          <XCircle className="w-6 h-6 text-red-500" />
          <span className="text-lg font-medium text-red-700">Incorrect Solution</span>
        </>
      )}
    </div>
  );
};
export default AnalysisResult;
````

## File: src/components/skills/CodeEditor.tsx
````typescript
import React, { useState } from 'react';
import { Check, X } from 'lucide-react';
interface CodeEditorProps {
  language: string;
  onSubmit: (code: string) => void;
  isAnalyzing: boolean;
}
const CodeEditor: React.FC<CodeEditorProps> = ({ language, onSubmit, isAnalyzing }) => {
  const [code, setCode] = useState('');
  const handleSubmit = (e: React.FormEvent) => {
    e.preventDefault();
    onSubmit(code);
  };
  return (
    <div className="bg-white rounded-lg shadow-sm border border-gray-200 p-4">
      <form onSubmit={handleSubmit}>
        <div className="mb-4">
          <div className="flex items-center justify-between mb-2">
            <label className="block text-sm font-medium text-gray-700">
              Write your {language} code here:
            </label>
            <div className="flex items-center space-x-2">
              <div className="w-3 h-3 rounded-full bg-red-500" />
              <div className="w-3 h-3 rounded-full bg-yellow-500" />
              <div className="w-3 h-3 rounded-full bg-green-500" />
            </div>
          </div>
          <textarea
            value={code}
            onChange={(e) => setCode(e.target.value)}
            className="w-full h-64 p-4 font-mono text-sm bg-gray-900 text-gray-100 rounded-lg focus:ring-2 focus:ring-indigo-500"
            placeholder={`// Enter your ${language} code here...`}
            spellCheck="false"
          />
        </div>
        <div className="flex justify-end">
          <button
            type="submit"
            disabled={isAnalyzing || !code.trim()}
            className="bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center"
          >
            {isAnalyzing ? (
              <>
                <div className="animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent mr-2" />
                Analyzing...
              </>
            ) : (
              <>
                Analyze Code
                <Check className="ml-2 h-4 w-4" />
              </>
            )}
          </button>
        </div>
      </form>
    </div>
  );
};
export default CodeEditor;
````

## File: src/components/AuthModal.tsx
````typescript
import React, { useState, useCallback } from 'react';
import { X } from 'lucide-react';
import { useAuth } from '../contexts/AuthContext';
import { useNavigate } from 'react-router-dom';
import AuthModalContent from './auth/AuthModalContent';
interface AuthModalProps {
  isOpen: boolean;
  onClose: () => void;
  mode: 'signin' | 'signup';
  onSwitchMode: () => void;
}
const AuthModal = ({ isOpen, onClose, mode, onSwitchMode }: AuthModalProps) => {
  const { signIn, signUp, user } = useAuth();
  const navigate = useNavigate();
  const [isLoading, setIsLoading] = useState(false);
  const [error, setError] = useState<string | null>(null);
  const handleSubmit = useCallback(async (data: { name?: string; email: string; password: string }) => {
    setIsLoading(true);
    setError(null);
    try {
      if (mode === 'signin') {
        await signIn(data.email, data.password);
      } else {
        await signUp(data.email, data.password);
      }
      navigate('/dashboard');
      onClose();
    } catch (err: any) {
      setError(err.message || 'An error occurred during authentication');
    } finally {
      setIsLoading(false);
    }
  }, [mode, signIn, signUp, navigate, onClose]);
  if (!isOpen || user) return null;
  return (
    <div className="fixed inset-0 bg-black/50 flex items-center justify-center z-50">
      <div className="bg-white rounded-xl p-8 max-w-md w-full mx-4 relative">
        <button
          onClick={onClose}
          className="absolute right-4 top-4 text-gray-400 hover:text-gray-600"
        >
          <X className="h-5 w-5" />
        </button>
        <AuthModalContent
          mode={mode}
          onSubmit={handleSubmit}
          onSwitchMode={onSwitchMode}
          isLoading={isLoading}
          error={error || undefined}
        />
      </div>
    </div>
  );
};
export default AuthModal;
````

## File: src/components/Features.tsx
````typescript
import React, { useState } from 'react';
import { BookOpen, BarChart3, UserCircle, Target, Brain, Star } from 'lucide-react';
import AssessmentModal from './assessment/AssessmentModal';
interface FeaturesProps {
  onGetStarted: () => void;
}
const Features = ({ onGetStarted }: FeaturesProps) => {
  const [isAssessmentOpen, setIsAssessmentOpen] = useState(false);
  return (
    <div className="py-16 px-4 sm:px-6 lg:px-8 bg-white/40">
      <div className="max-w-7xl mx-auto">
        <div className="text-center">
          <h2 className="text-3xl font-bold text-gray-900">
            Supercharge Your Learning Experience
          </h2>
          <p className="mt-4 text-lg text-gray-600 max-w-2xl mx-auto">
            Our platform combines cutting-edge AI technology with proven learning methodologies
            to deliver an unmatched educational experience.
          </p>
        </div>
        <div className="mt-16 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
          {[
            {
              icon: <Brain className="h-6 w-6" />,
              title: "Smart Assessment",
              description: "AI-powered evaluations that adapt to your knowledge level and learning pace.",
              action: () => setIsAssessmentOpen(true)
            },
            {
              icon: <Target className="h-6 w-6" />,
              title: "Custom Learning Paths",
              description: "Personalized curriculum designed to help you achieve your specific goals."
            },
            {
              icon: <BarChart3 className="h-6 w-6" />,
              title: "Progress Analytics",
              description: "Detailed insights and visualizations to track your learning journey."
            },
            {
              icon: <BookOpen className="h-6 w-6" />,
              title: "Rich Content Library",
              description: "Access to diverse, high-quality learning materials and resources."
            },
            {
              icon: <UserCircle className="h-6 w-6" />,
              title: "1-on-1 Mentoring",
              description: "Connect with expert mentors for personalized guidance and support."
            },
            {
              icon: <Star className="h-6 w-6" />,
              title: "Gamified Learning",
              description: "Earn rewards and achievements as you progress through your courses."
            }
          ].map((feature, index) => (
            <div 
              key={index}
              className={`bg-white p-6 rounded-xl border border-gray-100 hover:shadow-lg transition-shadow duration-300 ${
                feature.action ? 'cursor-pointer' : ''
              }`}
              onClick={feature.action}
            >
              <div className="w-10 h-10 rounded-lg bg-indigo-100 flex items-center justify-center text-indigo-600">
                {feature.icon}
              </div>
              <h3 className="mt-4 text-xl font-semibold text-gray-900">
                {feature.title}
              </h3>
              <p className="mt-2 text-gray-600">
                {feature.description}
              </p>
            </div>
          ))}
        </div>
        <div className="mt-16 text-center">
          <div className="inline-flex items-center space-x-2 bg-indigo-100 px-4 py-2 rounded-full text-indigo-700">
            <span className="text-sm font-medium">Ready to transform your learning?</span>
          </div>
          <button 
            onClick={onGetStarted}
            className="mt-4 bg-indigo-600 text-white px-8 py-3 rounded-lg hover:bg-indigo-700 transition-colors text-lg font-medium"
          >
            Get Started Now
          </button>
        </div>
      </div>
      <AssessmentModal 
        isOpen={isAssessmentOpen}
        onClose={() => setIsAssessmentOpen(false)}
      />
    </div>
  );
}
export default Features;
````

## File: src/components/Hero.tsx
````typescript
import React from 'react';
import { Brain, Sparkles, Target } from 'lucide-react';
interface HeroProps {
  onGetStarted: () => void;
}
const Hero = ({ onGetStarted }: HeroProps) => {
  return (
    <div className="pt-24 pb-8 px-4 sm:px-6 lg:px-8">
      <div className="max-w-7xl mx-auto">
        <div className="text-center">
          <h1 className="text-4xl sm:text-5xl md:text-6xl font-bold tracking-tight">
            <span className="block text-gray-900">Transform Your Learning Journey with</span>
            <span className="block bg-gradient-to-r from-indigo-600 to-purple-600 text-transparent bg-clip-text mt-2">
              AI-Powered Education
            </span>
          </h1>
          <p className="mt-6 text-lg sm:text-xl text-gray-600 max-w-3xl mx-auto">
            Experience personalized learning paths, adaptive assessments, and real-time feedback
            tailored to your unique learning style and goals.
          </p>
          <div className="mt-8 flex justify-center space-x-4">
            <button 
              onClick={onGetStarted}
              className="bg-indigo-600 text-white px-8 py-3 rounded-lg hover:bg-indigo-700 transition-colors text-lg font-medium"
            >
              Start Learning
            </button>
            <button className="bg-white text-indigo-600 px-8 py-3 rounded-lg border-2 border-indigo-600 hover:bg-indigo-50 transition-colors text-lg font-medium">
              Watch Demo
            </button>
          </div>
          <div className="mt-12 grid grid-cols-1 sm:grid-cols-3 gap-8 max-w-4xl mx-auto">
            {[
              {
                icon: <Brain className="h-6 w-6" />,
                title: "AI-Powered Learning",
                description: "Adaptive pathways that evolve with your progress"
              },
              {
                icon: <Target className="h-6 w-6" />,
                title: "Personalized Goals",
                description: "Custom learning objectives tailored to you"
              },
              {
                icon: <Sparkles className="h-6 w-6" />,
                title: "Real-time Feedback",
                description: "Instant insights to optimize your learning"
              }
            ].map((feature, index) => (
              <div key={index} className="bg-white/60 backdrop-blur-sm p-6 rounded-xl border border-gray-100">
                <div className="text-indigo-600 mb-4 inline-block">{feature.icon}</div>
                <h3 className="text-lg font-semibold text-gray-900">{feature.title}</h3>
                <p className="mt-2 text-gray-600">{feature.description}</p>
              </div>
            ))}
          </div>
        </div>
      </div>
    </div>
  );
}
export default Hero;
````

## File: src/components/Navbar.tsx
````typescript
import React, { useState } from 'react';
import { useAuth } from '../contexts/AuthContext';
import { Link, useNavigate } from 'react-router-dom';
import { Menu } from 'lucide-react';
interface NavbarProps {
  onGetStarted?: () => void;
}
const Navbar: React.FC<NavbarProps> = ({ onGetStarted }) => {
  const { user, logout } = useAuth();
  const navigate = useNavigate();
  const [isMenuOpen, setIsMenuOpen] = useState(false);
  const handleSignOut = async () => {
    try {
      await logout();
      setIsMenuOpen(false);
      navigate('/');
    } catch (error) {
      console.error('Error signing out:', error);
    }
  };
  return (
    <nav className="bg-white shadow-sm fixed w-full z-20 top-0">
      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div className="flex justify-between h-16">
          <div className="flex">
            <Link to="/" className="flex-shrink-0 flex items-center">
              <span className="text-xl font-bold text-indigo-600">Learning Assessment</span>
            </Link>
          </div>
          <div className="flex items-center">
            {!user && onGetStarted && (
              <button
                onClick={onGetStarted}
                className="ml-8 inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 transition-colors"
              >
                Get Started
              </button>
            )}
            {user && (
              <div className="flex items-center space-x-4">
                <div className="relative">
                  <button
                    onClick={() => setIsMenuOpen(!isMenuOpen)}
                    className="flex items-center space-x-2 text-gray-700 hover:text-gray-900 transition-colors"
                  >
                    <div className="h-8 w-8 rounded-full bg-indigo-100 flex items-center justify-center">
                      <span className="text-sm font-medium text-indigo-600">
                        {user.name.charAt(0).toUpperCase()}
                      </span>
                    </div>
                    <span className="text-sm font-medium">{user.name}</span>
                  </button>
                  {isMenuOpen && (
                    <div className="absolute right-0 mt-2 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5">
                      <div className="py-1">
                        <Link
                          to="/dashboard"
                          className="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"
                          onClick={() => setIsMenuOpen(false)}
                        >
                          Dashboard
                        </Link>
                        <Link
                          to="/profile"
                          className="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"
                          onClick={() => setIsMenuOpen(false)}
                        >
                          Profile
                        </Link>
                        <button
                          className="w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"
                          onClick={handleSignOut}
                        >
                          Sign out
                        </button>
                      </div>
                    </div>
                  )}
                </div>
              </div>
            )}
          </div>
        </div>
      </div>
    </nav>
  );
};
export default Navbar;
````

## File: src/components/Profile.tsx
````typescript
import React, { useState } from 'react';
import { useAuth } from '../contexts/AuthContext';
import { User, Settings, BookOpen, Award, LogOut, Brain } from 'lucide-react';
import { useNavigate } from 'react-router-dom';
import Navbar from './Navbar';
import ProfileSettings from './settings/ProfileSettings';
import NotificationSettings from './settings/NotificationSettings';
const Profile = () => {
  const { user, signOut } = useAuth();
  const navigate = useNavigate();
  const [isLoading, setIsLoading] = useState(false);
  const [activeSettings, setActiveSettings] = useState<'profile' | 'notifications' | null>(null);
  const handleSignOut = async () => {
    try {
      setIsLoading(true);
      await signOut();
      navigate('/', { replace: true });
    } catch (error) {
      console.error('Error signing out:', error);
    } finally {
      setIsLoading(false);
    }
  };
  // Render loading state while user data is being fetched
  if (!user) {
    return (
      <div className="min-h-screen bg-gray-50 flex items-center justify-center">
        <div className="animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-indigo-600"></div>
      </div>
    );
  }
  return (
    <div className="min-h-screen bg-gray-50">
      <Navbar onGetStarted={() => {}} />
      {/* Main Content */}
      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-24">
        <div className="bg-white rounded-lg shadow-md overflow-hidden">
          {/* Header */}
          <div className="bg-gradient-to-r from-indigo-600 to-purple-600 px-6 py-8">
            <div className="flex items-center space-x-4">
              <div className="h-20 w-20 rounded-full bg-white/20 flex items-center justify-center">
                <User className="h-10 w-10 text-white" />
              </div>
              <div>
                <h1 className="text-2xl font-bold text-white">{user.name}</h1>
                <p className="text-indigo-100">{user.email}</p>
              </div>
            </div>
          </div>
          {/* Main Content */}
          <div className="grid grid-cols-1 md:grid-cols-3 gap-6 p-6">
            {/* Learning Progress */}
            <div className="bg-gray-50 rounded-lg p-6">
              <div className="flex items-center space-x-2 mb-4">
                <BookOpen className="h-5 w-5 text-indigo-600" />
                <h2 className="text-lg font-semibold">Learning Progress</h2>
              </div>
              <div className="space-y-4">
                <div>
                  <div className="flex justify-between mb-1">
                    <span className="text-sm font-medium">Course Completion</span>
                    <span className="text-sm text-gray-500">60%</span>
                  </div>
                  <div className="w-full bg-gray-200 rounded-full h-2">
                    <div className="bg-indigo-600 h-2 rounded-full" style={{ width: '60%' }} />
                  </div>
                </div>
                <p className="text-sm text-gray-600">
                  You've completed 3 out of 5 modules
                </p>
              </div>
            </div>
            {/* Achievements */}
            <div className="bg-gray-50 rounded-lg p-6">
              <div className="flex items-center space-x-2 mb-4">
                <Award className="h-5 w-5 text-indigo-600" />
                <h2 className="text-lg font-semibold">Achievements</h2>
              </div>
              <div className="space-y-4">
                <div className="flex items-center space-x-3">
                  <div className="h-10 w-10 rounded-full bg-indigo-100 flex items-center justify-center">
                    <Award className="h-5 w-5 text-indigo-600" />
                  </div>
                  <div>
                    <p className="font-medium">Quick Learner</p>
                    <p className="text-sm text-gray-500">Completed first module</p>
                  </div>
                </div>
              </div>
            </div>
            {/* Account Settings */}
            <div className="bg-gray-50 rounded-lg p-6">
              <div className="flex items-center space-x-2 mb-4">
                <Settings className="h-5 w-5 text-indigo-600" />
                <h2 className="text-lg font-semibold">Account Settings</h2>
              </div>
              <div className="space-y-4">
                <button 
                  onClick={() => setActiveSettings('profile')}
                  className="w-full px-4 py-2 text-left text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-lg transition-colors"
                >
                  Edit Profile
                </button>
                <button 
                  onClick={() => setActiveSettings('notifications')}
                  className="w-full px-4 py-2 text-left text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-lg transition-colors"
                >
                  Notification Settings
                </button>
                <button
                  onClick={handleSignOut}
                  disabled={isLoading}
                  className="w-full px-4 py-2 text-left text-sm font-medium text-red-600 hover:bg-red-50 rounded-lg transition-colors flex items-center space-x-2"
                >
                  <LogOut className="h-4 w-4" />
                  <span>Sign Out</span>
                </button>
              </div>
            </div>
          </div>
        </div>
        {/* Settings Modals */}
        {activeSettings && (
          <div className="fixed inset-0 bg-black/50 flex items-center justify-center z-50">
            <div className="max-w-md w-full mx-4">
              {activeSettings === 'profile' ? (
                <ProfileSettings onClose={() => setActiveSettings(null)} />
              ) : (
                <NotificationSettings onClose={() => setActiveSettings(null)} />
              )}
            </div>
          </div>
        )}
      </div>
    </div>
  );
};
export default Profile;
````

## File: src/components/VerticalNav.tsx
````typescript
import React from 'react';
import { NavLink, useLocation } from 'react-router-dom';
import { useAuth } from '../contexts/AuthContext';
import { Brain, Code, BookOpen, Target, Users, BarChart2, Award, Lightbulb, User } from 'lucide-react';
const VerticalNav = () => {
  const location = useLocation();
  const { isAdmin } = useAuth();
  const navItems = [
    {
      path: '/profile',
      icon: User,
      label: 'Profile',
      description: 'View your profile'
    },
    {
      path: '/dashboard',
      icon: Brain,
      label: 'Assessment Dashboard',
      description: 'View all assessments'
    },
    {
      path: '/assessments/knowledge',
      icon: BookOpen,
      label: 'Knowledge Assessment',
      description: 'Test your theoretical knowledge'
    },
    {
      path: '/assessments/skills',
      icon: Code,
      label: 'Skills Assessment',
      description: 'Test your practical coding skills'
    },
    {
      path: '/assessments/learning-style',
      icon: Lightbulb,
      label: 'Learning Style',
      description: 'Discover your learning style'
    },
    {
      path: '/library',
      icon: BookOpen,
      label: 'Content Library',
      description: 'Access learning resources'
    },
    {
      path: '/learning-paths',
      icon: Target,
      label: 'Learning Paths',
      description: 'Your personalized journey'
    },
    {
      path: '/mentoring',
      icon: Users,
      label: 'Mentoring',
      description: 'Connect with experts'
    },
    {
      path: '/analytics',
      icon: BarChart2,
      label: 'Analytics',
      description: 'Track your progress'
    },
    {
      path: '/achievements',
      icon: Award,
      label: 'Achievements',
      description: 'View your accomplishments'
    }
  ];
  // Add admin dashboard link only for admin users
  if (isAdmin) {
    navItems.push({
      path: '/admin',
      icon: '⚙️',
      label: 'Admin Dashboard',
      description: 'Manage admin settings'
    });
  }
  return (
    <nav className="w-64 bg-white border-r border-gray-200 min-h-screen fixed left-0 top-16 overflow-y-auto">
      <div className="p-4 space-y-1">
        {navItems.map((item) => (
          <NavLink
            key={item.path}
            to={item.path}
            className={({ isActive }) => `
              flex items-start p-3 rounded-lg transition-all duration-200
              ${isActive 
                ? 'bg-indigo-50 text-indigo-600 shadow-sm' 
                : 'text-gray-600 hover:bg-gray-50 hover:text-gray-900'}
            `}
          >
            {item.icon === '⚙️' ? <span className="h-5 w-5 mt-0.5 mr-3 flex-shrink-0">{item.icon}</span> : <item.icon className="h-5 w-5 mt-0.5 mr-3 flex-shrink-0" />}
            <div>
              <div className="font-medium text-sm">{item.label}</div>
              <div className="text-xs text-gray-500 mt-0.5">{item.description}</div>
            </div>
          </NavLink>
        ))}
      </div>
    </nav>
  );
};
export default VerticalNav;
````

## File: src/config/firebase.ts
````typescript
import { initializeApp } from 'firebase/app';
import { getAuth, setPersistence, browserLocalPersistence } from 'firebase/auth';
import { getFirestore, enableIndexedDbPersistence } from 'firebase/firestore';
import { getAnalytics } from 'firebase/analytics';
const firebaseConfig = {
  apiKey: import.meta.env.VITE_FIREBASE_API_KEY,
  authDomain: import.meta.env.VITE_FIREBASE_AUTH_DOMAIN,
  projectId: import.meta.env.VITE_FIREBASE_PROJECT_ID,
  storageBucket: import.meta.env.VITE_FIREBASE_STORAGE_BUCKET,
  messagingSenderId: import.meta.env.VITE_FIREBASE_MESSAGING_SENDER_ID,
  appId: import.meta.env.VITE_FIREBASE_APP_ID,
  measurementId: import.meta.env.VITE_FIREBASE_MEASUREMENT_ID
};
// Initialize Firebase with retry logic
const initializeFirebase = () => {
  try {
    const app = initializeApp(firebaseConfig);
    console.log('Firebase initialized successfully');
    return app;
  } catch (error) {
    console.error('Error initializing Firebase:', error);
    throw error;
  }
};
export const app = initializeFirebase();
// Initialize services with error handling
export const auth = getAuth(app);
export const db = getFirestore(app);
export let analytics;
try {
  analytics = getAnalytics(app);
} catch (error) {
  console.warn('Analytics initialization failed:', error);
  analytics = null;
}
// Set persistence with error handling
try {
  setPersistence(auth, browserLocalPersistence)
    .then(() => console.log('Auth persistence set successfully'))
    .catch(error => console.error('Error setting auth persistence:', error));
  // Enable offline persistence for Firestore
  enableIndexedDbPersistence(db)
    .then(() => console.log('Firestore offline persistence enabled'))
    .catch(error => {
      if (error.code === 'failed-precondition') {
        console.warn('Firestore persistence failed - multiple tabs open');
      } else if (error.code === 'unimplemented') {
        console.warn('Firestore persistence not available in this browser');
      }
    });
} catch (error) {
  console.error('Error setting up Firebase services:', error);
}
// Listen for auth state changes with error handling
auth.onAuthStateChanged((user) => {
  if (user) {
    user.getIdToken(true)
      .catch(error => console.error('Error refreshing token:', error));
  }
}, error => console.error('Auth state change error:', error));
````

## File: src/contexts/AuthContext.tsx
````typescript
import React, { createContext, useContext, useState, useEffect } from 'react';
import { 
  User as FirebaseUser,
  signInWithEmailAndPassword,
  createUserWithEmailAndPassword,
  signOut,
  onAuthStateChanged
} from 'firebase/auth';
import { auth } from '../config/firebase';
import { createUserDocument, getUserDocument } from '../services/firebase.service';
interface User {
  id: string;
  name: string;
  email: string | null;
  role: 'user' | 'admin';
}
interface AuthContextType {
  user: User | null;
  loading: boolean;
  error: string | null;
  isAdmin: boolean;
  signIn: (email: string, password: string) => Promise<void>;
  signUp: (email: string, password: string) => Promise<void>;
  logout: () => Promise<void>;
}
const AuthContext = createContext<AuthContextType | undefined>(undefined);
const convertFirebaseUser = (firebaseUser: FirebaseUser): User => {
  return {
    id: firebaseUser.uid,
    name: firebaseUser.displayName || firebaseUser.email?.split('@')[0] || 'User',
    email: firebaseUser.email,
    role: 'user' // You can fetch this from your database if needed
  };
};
export const AuthProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {
  const [user, setUser] = useState<User | null>(null);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState<string | null>(null);
  const [isAdmin, setIsAdmin] = useState(false);
  const checkAndSetAdminStatus = async (firebaseUser: FirebaseUser) => {
    try {
      const userDoc = await getUserDocument(firebaseUser.uid);
      const isAdminEmail = firebaseUser.email === 'naik97059@gmail.com';
      const role = isAdminEmail ? 'admin' : (userDoc?.role || 'user');
      const userData = {
        id: firebaseUser.uid,
        name: userDoc?.name || firebaseUser.displayName || firebaseUser.email?.split('@')[0] || 'User',
        email: firebaseUser.email,
        role
      };
      if (!userDoc || userDoc.role !== role) {
        // Create or update user document with correct role
        await createUserDocument(firebaseUser.uid, {
          ...userData,
          role
        });
      }
      // Store user email in localStorage
      if (firebaseUser.email) {
        localStorage.setItem('userEmail', firebaseUser.email);
      }
      setUser(userData);
      setIsAdmin(role === 'admin');
      return userData;
    } catch (error) {
      console.error('Error checking admin status:', error);
      throw error;
    }
  };
  useEffect(() => {
    const unsubscribe = onAuthStateChanged(auth, async (firebaseUser) => {
      setLoading(true);
      try {
        if (firebaseUser) {
          await checkAndSetAdminStatus(firebaseUser);
        } else {
          setUser(null);
          setIsAdmin(false);
        }
      } catch (error) {
        console.error('Auth state change error:', error);
        setError('Error setting up user profile');
      } finally {
        setLoading(false);
      }
    });
    return () => unsubscribe();
  }, []);
  const signIn = async (email: string, password: string) => {
    try {
      setError(null);
      const result = await signInWithEmailAndPassword(auth, email, password);
      await checkAndSetAdminStatus(result.user);
    } catch (err: any) {
      console.error('Sign in error:', err);
      setError(err.message || 'Failed to sign in');
      throw err;
    }
  };
  const signUp = async (email: string, password: string) => {
    try {
      setError(null);
      const result = await createUserWithEmailAndPassword(auth, email, password);
      await checkAndSetAdminStatus(result.user);
    } catch (err: any) {
      console.error('Sign up error:', err);
      setError(err.message || 'Failed to sign up');
      throw err;
    }
  };
  const logout = async () => {
    try {
      setError(null);
      await signOut(auth);
      setUser(null);
      setIsAdmin(false);
      localStorage.removeItem('user');
      localStorage.removeItem('userEmail');
      sessionStorage.clear();
    } catch (err: any) {
      console.error('Logout error:', err);
      setError(err.message || 'Failed to log out');
      throw err;
    }
  };
  const value = {
    user,
    loading,
    error,
    isAdmin,
    signIn,
    signUp,
    logout
  };
  return (
    <AuthContext.Provider value={value}>
      {children}
    </AuthContext.Provider>
  );
};
export const useAuth = () => {
  const context = useContext(AuthContext);
  if (context === undefined) {
    throw new Error('useAuth must be used within an AuthProvider');
  }
  return context;
};
export default AuthContext;
````

## File: src/pages/admin/AdminDashboard.tsx
````typescript
import React from 'react';
import { Routes, Route } from 'react-router-dom';
import { Users, BookOpen, BarChart2, Settings, Shield } from 'lucide-react';
import { AdminSidebar } from '../../components/admin/AdminSidebar';
import { AdminUsers } from '../../components/admin/AdminUsers';
import { AdminContent } from '../../components/admin/AdminContent';
import { AdminAnalytics } from '../../components/admin/AdminAnalytics';
import { AdminSettings } from '../../components/admin/AdminSettings';
import { AdminAssessments } from '../../components/admin/AdminAssessments';
import { AdminChatBot } from '../../components/admin/AdminChatBot';
import { AssessmentManagement } from '../../components/admin/AssessmentManagement'; // Assuming this component exists
const AdminDashboard: React.FC = () => {
  return (
    <div className="min-h-screen bg-gray-50">
      <div className="flex">
        <AdminSidebar />
        <main className="flex-1 p-8 ml-64">
          <Routes>
            <Route path="/" element={<AdminAnalytics />} />
            <Route path="/users" element={<AdminUsers />} />
            <Route path="/content" element={<AdminContent />} />
            <Route path="/assessments/management" element={<AssessmentManagement />} />
            <Route path="/settings" element={<AdminSettings />} />
          </Routes>
        </main>
      </div>
      <AdminChatBot />
    </div>
  );
};
export default AdminDashboard;
````

## File: src/pages/api/generateQuestions.ts
````typescript
import OpenAI from 'openai';
import { NextApiRequest, NextApiResponse } from 'next';
// Initialize OpenAI with environment variables
const GLHF_API_KEY = import.meta.env.VITE_GLHF_API_KEY;
const GLHF_API_URL = import.meta.env.VITE_GLHF_API_URL || 'https://glhf.chat/api/openai/v1';
// Validate required environment variables
if (!GLHF_API_KEY) {
  console.error('VITE_GLHF_API_KEY is not set in environment variables');
}
const openai = new OpenAI({
  apiKey: GLHF_API_KEY,
  baseURL: GLHF_API_URL,
});
const generateSystemPrompt = (domain: string) => {
  return `You are an expert assessment generator for ${domain}. Create 5 multiple-choice questions to test knowledge in ${domain}. 
  Each question should:
  1. Be relevant to ${domain}
  2. Have 4 options (A, B, C, D)
  3. Include one correct answer
  4. Be challenging but fair
  Format your response as a JSON array of questions, where each question has:
  - text: the question text
  - options: array of 4 possible answers
  - correctAnswer: the correct option (A, B, C, or D)`;
};
export default async function handler(
  req: NextApiRequest,
  res: NextApiResponse
) {
  if (req.method !== 'POST') {
    return res.status(405).json({ error: 'Method not allowed' });
  }
  if (!GLHF_API_KEY) {
    return res.status(500).json({ error: 'GLHF API key not configured' });
  }
  try {
    const { domain } = req.body;
    if (!domain) {
      return res.status(400).json({ error: 'Domain is required' });
    }
    const completion = await openai.chat.completions.create({
      model: "hf:mistralai/Mistral-7B-Instruct-v0.3",
      messages: [
        { 
          role: "system", 
          content: generateSystemPrompt(domain)
        }
      ],
      temperature: 0.7,
      max_tokens: 2000,
    });
    const response = completion.choices[0]?.message?.content;
    if (!response) {
      throw new Error('No response from AI');
    }
    try {
      const parsedQuestions = JSON.parse(response);
      const questions = parsedQuestions.map((q: any, index: number) => ({
        id: `q${index + 1}`,
        text: q.text,
        options: q.options,
        correctAnswer: q.correctAnswer
      }));
      return res.status(200).json({ questions });
    } catch (error) {
      console.error('Error parsing AI response:', error);
      return res.status(500).json({ error: 'Failed to parse AI response' });
    }
  } catch (error) {
    console.error('Error generating questions:', error);
    return res.status(500).json({ error: 'Failed to generate questions' });
  }
}
````

## File: src/pages/AchievementsPage.tsx
````typescript
import React from 'react';
import { Star, Trophy, Award, Target } from 'lucide-react';
const achievements = [
  {
    icon: Trophy,
    title: 'Quick Learner',
    description: 'Complete your first course',
    progress: 100,
    earned: true
  },
  {
    icon: Star,
    title: 'Knowledge Seeker',
    description: 'Complete 5 different assessments',
    progress: 60,
    earned: false
  },
  {
    icon: Award,
    title: 'Code Master',
    description: 'Submit 10 perfect assignments',
    progress: 30,
    earned: false
  }
];
const AchievementsPage = () => {
  return (
    <div className="p-6">
      <div className="mb-6">
        <h1 className="text-2xl font-bold text-gray-900 mb-2">Gamified Learning</h1>
        <p className="text-gray-600">Track your achievements and earn rewards as you learn.</p>
      </div>
      <div className="grid gap-6 md:grid-cols-2 lg:grid-cols-3 mb-8">
        {[
          { label: 'Total Points', value: '2,450', icon: Star },
          { label: 'Achievements', value: '8/24', icon: Trophy },
          { label: 'Current Streak', value: '5 days', icon: Target }
        ].map((stat, index) => (
          <div key={index} className="bg-white p-4 rounded-lg shadow-sm border border-gray-200">
            <div className="flex items-center justify-between">
              <div>
                <p className="text-sm text-gray-600">{stat.label}</p>
                <p className="text-2xl font-bold text-gray-900">{stat.value}</p>
              </div>
              <stat.icon className="h-8 w-8 text-indigo-600" />
            </div>
          </div>
        ))}
      </div>
      <div className="bg-white rounded-lg shadow-sm border border-gray-200">
        <div className="p-6 border-b border-gray-200">
          <h2 className="text-lg font-semibold">Achievements</h2>
        </div>
        <div className="divide-y divide-gray-200">
          {achievements.map((achievement, index) => (
            <div key={index} className="p-6">
              <div className="flex items-start">
                <div className={`h-12 w-12 rounded-lg flex items-center justify-center ${
                  achievement.earned ? 'bg-indigo-100' : 'bg-gray-100'
                }`}>
                  <achievement.icon className={`h-6 w-6 ${
                    achievement.earned ? 'text-indigo-600' : 'text-gray-400'
                  }`} />
                </div>
                <div className="ml-4 flex-1">
                  <div className="flex items-center justify-between mb-1">
                    <h3 className="font-semibold text-gray-900">{achievement.title}</h3>
                    {achievement.earned && (
                      <span className="text-sm text-indigo-600">Earned</span>
                    )}
                  </div>
                  <p className="text-sm text-gray-600 mb-2">{achievement.description}</p>
                  <div className="w-full bg-gray-200 rounded-full h-2">
                    <div 
                      className="bg-indigo-600 h-2 rounded-full transition-all duration-300"
                      style={{ width: `${achievement.progress}%` }}
                    />
                  </div>
                  <p className="text-sm text-gray-500 mt-1">{achievement.progress}% complete</p>
                </div>
              </div>
            </div>
          ))}
        </div>
      </div>
    </div>
  );
};
export default AchievementsPage;
````

## File: src/pages/AnalyticsPage.tsx
````typescript
import React from 'react';
import { BarChart3, TrendingUp, Clock, Target } from 'lucide-react';
const AnalyticsPage = () => {
  return (
    <div className="p-6">
      <div className="mb-6">
        <h1 className="text-2xl font-bold text-gray-900 mb-2">Progress Analytics</h1>
        <p className="text-gray-600">Track your learning journey and performance metrics.</p>
      </div>
      <div className="grid gap-6 md:grid-cols-2 lg:grid-cols-4 mb-6">
        {[
          { icon: TrendingUp, label: 'Course Progress', value: '68%' },
          { icon: Clock, label: 'Study Time', value: '24h' },
          { icon: Target, label: 'Goals Met', value: '8/10' },
          { icon: BarChart3, label: 'Avg. Score', value: '85%' }
        ].map((stat, index) => (
          <div key={index} className="bg-white p-4 rounded-lg shadow-sm border border-gray-200">
            <div className="flex items-center mb-2">
              <stat.icon className="h-5 w-5 text-indigo-600 mr-2" />
              <span className="text-sm text-gray-600">{stat.label}</span>
            </div>
            <div className="text-2xl font-bold text-gray-900">{stat.value}</div>
          </div>
        ))}
      </div>
      <div className="grid gap-6 md:grid-cols-2">
        <div className="bg-white p-6 rounded-lg shadow-sm border border-gray-200">
          <h2 className="text-lg font-semibold mb-4">Learning Activity</h2>
          <div className="h-64 flex items-center justify-center text-gray-500">
            Activity chart will be displayed here
          </div>
        </div>
        <div className="bg-white p-6 rounded-lg shadow-sm border border-gray-200">
          <h2 className="text-lg font-semibold mb-4">Skill Progress</h2>
          <div className="space-y-4">
            {['JavaScript', 'React', 'Node.js'].map((skill) => (
              <div key={skill}>
                <div className="flex justify-between mb-1">
                  <span className="text-sm font-medium text-gray-700">{skill}</span>
                  <span className="text-sm text-gray-500">75%</span>
                </div>
                <div className="w-full bg-gray-200 rounded-full h-2">
                  <div className="bg-indigo-600 h-2 rounded-full" style={{ width: '75%' }} />
                </div>
              </div>
            ))}
          </div>
        </div>
      </div>
    </div>
  );
};
export default AnalyticsPage;
````

## File: src/pages/AssessmentPage.tsx
````typescript
import React, { useState, useEffect } from 'react';
import { Brain, BookOpen, Target, Award, Clock, Code, ArrowRight, Lightbulb } from 'lucide-react';
import AssessmentModal from '../components/assessment/AssessmentModal';
import { useAuth } from '../contexts/AuthContext';
import { getUserAssessments, Assessment } from '../services/firebase.service';
import { useNavigate } from 'react-router-dom';
interface AssessmentType {
  icon: any;
  title: string;
  description: string;
  duration: string;
  route: string;
}
const AssessmentPage = () => {
  const [isModalOpen, setIsModalOpen] = useState(false);
  const [assessments, setAssessments] = useState<Assessment[]>([]);
  const { user } = useAuth();
  const navigate = useNavigate();
  useEffect(() => {
    if (!user) return;
    const unsubscribe = getUserAssessments(user.id, (data) => {
      setAssessments(data.sort((a, b) => b.completedAt.getTime() - a.completedAt.getTime()));
    });
    return () => unsubscribe();
  }, [user]);
  const assessmentTypes: AssessmentType[] = [
    {
      icon: Brain,
      title: 'Knowledge Assessment',
      description: 'Evaluate your current understanding and knowledge level',
      duration: '20-30 minutes',
      route: '/assessments/knowledge'
    },
    {
      icon: Code,
      title: 'Skills Assessment',
      description: 'Test your practical skills and problem-solving abilities',
      duration: '30-45 minutes',
      route: '/assessments/skills'
    },
    {
      icon: Lightbulb,
      title: 'Learning Style Assessment',
      description: 'Discover your optimal learning approach',
      duration: '15-20 minutes',
      route: '/assessments/learning-style'
    }
  ];
  return (
    <div className="p-6 max-w-7xl mx-auto">
      <div className="mb-8">
        <h1 className="text-2xl font-bold text-gray-900 mb-2">Smart Assessment</h1>
        <p className="text-gray-600">Take our adaptive assessment to personalize your learning journey.</p>
      </div>
      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        {assessmentTypes.map((type, index) => (
          <div
            key={index}
            className="bg-white rounded-lg shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow cursor-pointer"
            onClick={() => navigate(type.route)}
          >
            <div className="flex items-center justify-between mb-4">
              <div className="p-2 bg-indigo-100 rounded-lg">
                <type.icon className="h-6 w-6 text-indigo-600" />
              </div>
              <span className="text-sm text-gray-500">{type.duration}</span>
            </div>
            <h3 className="text-lg font-semibold text-gray-900 mb-2">{type.title}</h3>
            <p className="text-gray-600 mb-4">{type.description}</p>
            <button className="text-indigo-600 hover:text-indigo-700 font-medium inline-flex items-center">
              Start Assessment
              <ArrowRight className="ml-2 h-4 w-4" />
            </button>
          </div>
        ))}
      </div>
      {/* Recent Results */}
      {assessments.length > 0 && (
        <div className="bg-white rounded-lg shadow-sm border border-gray-200 mb-8">
          <div className="p-6 border-b border-gray-200">
            <h2 className="text-lg font-semibold">Recent Results</h2>
          </div>
          <div className="divide-y divide-gray-200">
            {assessments.map((assessment) => (
              <div key={assessment.id} className="p-6 flex items-center justify-between">
                <div>
                  <p className="font-medium text-gray-900">{assessment.type}</p>
                  <p className="text-sm text-gray-500">
                    {assessment.completedAt.toLocaleDateString()}
                  </p>
                </div>
                <div className="flex items-center space-x-4">
                  <div className="text-center">
                    <p className="text-2xl font-bold text-gray-900">{assessment.score}%</p>
                    {assessment.improvement && (
                      <p className="text-sm text-green-600">{assessment.improvement}</p>
                    )}
                  </div>
                  <Award className={`h-6 w-6 ${
                    assessment.score >= 80 ? 'text-yellow-400' : 'text-gray-400'
                  }`} />
                </div>
              </div>
            ))}
          </div>
        </div>
      )}
      {/* Tips Section */}
      <div className="bg-indigo-50 rounded-lg p-6">
        <h2 className="text-lg font-semibold mb-4">Assessment Tips</h2>
        <ul className="space-y-3">
          <li className="flex items-start">
            <span className="h-6 w-6 rounded-full bg-indigo-100 text-indigo-600 flex items-center justify-center mr-2 mt-0.5">1</span>
            <span>Find a quiet space where you can focus without interruptions</span>
          </li>
          <li className="flex items-start">
            <span className="h-6 w-6 rounded-full bg-indigo-100 text-indigo-600 flex items-center justify-center mr-2 mt-0.5">2</span>
            <span>Read each question carefully before answering</span>
          </li>
          <li className="flex items-start">
            <span className="h-6 w-6 rounded-full bg-indigo-100 text-indigo-600 flex items-center justify-center mr-2 mt-0.5">3</span>
            <span>Don't rush - take your time to demonstrate your best understanding</span>
          </li>
        </ul>
      </div>
      <AssessmentModal 
        isOpen={isModalOpen} 
        onClose={() => setIsModalOpen(false)} 
      />
    </div>
  );
};
export default AssessmentPage;
````

## File: src/pages/KnowledgeAssessmentPage.tsx
````typescript
import React, { useState, useEffect } from 'react';
import { collection, getDocs } from 'firebase/firestore';
import { db } from '../config/firebase';
import { Question, AssessmentResult, generateQuestions, evaluateAnswers } from '../services/knowledgeAssessmentService';
import { Brain, CheckCircle, XCircle, AlertCircle, ArrowRight, Book } from 'lucide-react';
interface Domain {
  id: string;
  name: string;
  description: string;
}
const KnowledgeAssessmentPage: React.FC = () => {
  const [domains, setDomains] = useState<Domain[]>([]);
  const [selectedDomain, setSelectedDomain] = useState<string>('');
  const [questions, setQuestions] = useState<Question[]>([]);
  const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0);
  const [userAnswers, setUserAnswers] = useState<Record<string, string>>({});
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState<string | null>(null);
  const [result, setResult] = useState<AssessmentResult | null>(null);
  const [stage, setStage] = useState<'domain' | 'assessment' | 'result'>('domain');
  useEffect(() => {
    const fetchDomains = async () => {
      try {
        const domainsCollection = collection(db, 'domains');
        const domainsSnapshot = await getDocs(domainsCollection);
        const domainsList = domainsSnapshot.docs.map(doc => ({
          id: doc.id,
          ...doc.data()
        } as Domain));
        setDomains(domainsList);
        setLoading(false);
      } catch (error) {
        console.error('Error fetching domains:', error);
        setLoading(false);
      }
    };
    fetchDomains();
  }, []);
  const handleDomainSelect = async (domainId: string) => {
    try {
      setLoading(true);
      setSelectedDomain(domainId);
      // Find the selected domain name
      const selectedDomainData = domains.find(d => d.id === domainId);
      if (!selectedDomainData) {
        throw new Error('Domain not found');
      }
      // Generate questions for the selected domain
      const generatedQuestions = await generateQuestions(selectedDomainData.name);
      setQuestions(generatedQuestions);
      setStage('assessment');
      setCurrentQuestionIndex(0);
      setUserAnswers({});
      setResult(null);
    } catch (error) {
      console.error('Error starting assessment:', error);
      setError('Failed to start assessment. Please try again.');
    } finally {
      setLoading(false);
    }
  };
  const startAssessment = async () => {
    try {
      setLoading(true);
      setError(null);
      const generatedQuestions = await generateQuestions(selectedDomain);
      setQuestions(generatedQuestions);
      setStage('assessment');
    } catch (err) {
      setError(err instanceof Error ? err.message : 'Failed to start assessment');
    } finally {
      setLoading(false);
    }
  };
  const handleAnswer = (option: string, index: number) => {
    const answerLetter = String.fromCharCode(65 + index); // Convert index to 'A', 'B', 'C', 'D'
    setUserAnswers(prev => ({
      ...prev,
      [questions[currentQuestionIndex].id]: answerLetter
    }));
  };
  const nextQuestion = () => {
    if (currentQuestionIndex < questions.length - 1) {
      setCurrentQuestionIndex(prev => prev + 1);
    } else {
      submitAssessment();
    }
  };
  const submitAssessment = async () => {
    try {
      setLoading(true);
      setError(null);
      const assessmentResult = await evaluateAnswers(questions, userAnswers);
      setResult(assessmentResult);
      setStage('result');
    } catch (err) {
      setError(err instanceof Error ? err.message : 'Failed to evaluate assessment');
    } finally {
      setLoading(false);
    }
  };
  const resetAssessment = () => {
    setSelectedDomain('');
    setQuestions([]);
    setCurrentQuestionIndex(0);
    setUserAnswers({});
    setResult(null);
    setStage('domain');
  };
  if (loading) {
    return (
      <div className="min-h-screen flex items-center justify-center">
        <div className="animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"></div>
      </div>
    );
  }
  if (error) {
    return (
      <div className="flex items-center justify-center min-h-screen">
        <div className="text-red-500 flex items-center">
          <AlertCircle className="mr-2" />
          {error}
        </div>
      </div>
    );
  }
  return (
    <div className="max-w-4xl mx-auto p-6">
      {stage === 'domain' && (
        <div>
          <div className="text-center mb-8">
            <h1 className="text-3xl font-bold text-gray-900 mb-2">Knowledge Assessment</h1>
            <p className="text-gray-600">Select your domain of interest to begin the assessment</p>
          </div>
          <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
            {domains.map((domain) => (
              <button
                key={domain.id}
                onClick={() => handleDomainSelect(domain.id)}
                className={`p-4 rounded-lg border transition-all ${
                  selectedDomain === domain.id
                    ? 'border-indigo-500 bg-indigo-50'
                    : 'border-gray-200 hover:border-indigo-200 hover:bg-gray-50'
                }`}
              >
                <div className="flex items-center space-x-3">
                  <Brain className={`w-5 h-5 ${
                    selectedDomain === domain.id ? 'text-indigo-500' : 'text-gray-400'
                  }`} />
                  <span className={selectedDomain === domain.id ? 'text-indigo-700' : 'text-gray-700'}>
                    {domain.name}
                  </span>
                </div>
              </button>
            ))}
          </div>
          {domains.length === 0 && (
            <p className="text-gray-600 text-center">No domains available. Please contact an administrator.</p>
          )}
        </div>
      )}
      {stage === 'assessment' && questions[currentQuestionIndex] && (
        <div>
          {console.log('Current question:', questions[currentQuestionIndex])}
          <div className="mb-8">
            <div className="flex justify-between items-center mb-4">
              <h2 className="text-xl font-semibold text-gray-900">
                Question {currentQuestionIndex + 1} of {questions.length}
              </h2>
              <span className="text-gray-500">{selectedDomain}</span>
            </div>
            <div className="w-full bg-gray-200 rounded-full h-2">
              <div
                className="bg-indigo-600 h-2 rounded-full transition-all"
                style={{ width: `${((currentQuestionIndex + 1) / questions.length) * 100}%` }}
              ></div>
            </div>
          </div>
          <div className="bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6">
            <p className="text-lg text-gray-900 mb-6">{questions[currentQuestionIndex].text}</p>
            <div className="space-y-3">
              {questions[currentQuestionIndex].options.map((option, index) => (
                <button
                  key={index}
                  onClick={() => handleAnswer(option, index)}
                  className={`w-full text-left p-4 rounded-lg border transition-all ${
                    userAnswers[questions[currentQuestionIndex].id] === String.fromCharCode(65 + index)
                      ? 'border-indigo-500 bg-indigo-50'
                      : 'border-gray-200 hover:border-indigo-200 hover:bg-gray-50'
                  }`}
                >
                  <div className="flex items-center space-x-3">
                    <div className={`w-6 h-6 rounded-full flex items-center justify-center ${
                      userAnswers[questions[currentQuestionIndex].id] === String.fromCharCode(65 + index)
                        ? 'bg-indigo-500 text-white'
                        : 'bg-gray-100'
                    }`}>
                      {String.fromCharCode(65 + index)}
                    </div>
                    <span>{option}</span>
                  </div>
                </button>
              ))}
            </div>
          </div>
          <div className="flex justify-end">
            <button
              onClick={nextQuestion}
              disabled={!userAnswers[questions[currentQuestionIndex].id]}
              className={`px-6 py-2 rounded-lg flex items-center space-x-2 ${
                userAnswers[questions[currentQuestionIndex].id]
                  ? 'bg-indigo-600 text-white hover:bg-indigo-700'
                  : 'bg-gray-100 text-gray-400 cursor-not-allowed'
              }`}
            >
              <span>{currentQuestionIndex === questions.length - 1 ? 'Submit' : 'Next'}</span>
              <ArrowRight className="w-4 h-4" />
            </button>
          </div>
        </div>
      )}
      {stage === 'result' && result && (
        <div>
          <div className="text-center mb-8">
            <h2 className="text-3xl font-bold text-gray-900 mb-2">Assessment Complete!</h2>
            <p className="text-gray-600">Here's your detailed performance analysis</p>
          </div>
          <div className="bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6">
            <div className="flex justify-center mb-8">
              <div className="text-center">
                <div className="text-5xl font-bold text-indigo-600 mb-2">
                  {Math.round(result.score)}%
                </div>
                <div className="text-gray-500">Overall Score</div>
              </div>
            </div>
            <div className="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8">
              <div className="text-center p-4 bg-green-50 rounded-lg">
                <CheckCircle className="w-8 h-8 text-green-500 mx-auto mb-2" />
                <div className="font-semibold text-green-700">{result.correctAnswers}</div>
                <div className="text-green-600">Correct</div>
              </div>
              <div className="text-center p-4 bg-red-50 rounded-lg">
                <XCircle className="w-8 h-8 text-red-500 mx-auto mb-2" />
                <div className="font-semibold text-red-700">{result.incorrectAnswers}</div>
                <div className="text-red-600">Incorrect</div>
              </div>
              <div className="text-center p-4 bg-blue-50 rounded-lg">
                <Book className="w-8 h-8 text-blue-500 mx-auto mb-2" />
                <div className="font-semibold text-blue-700">{result.totalQuestions}</div>
                <div className="text-blue-600">Total Questions</div>
              </div>
            </div>
            <div className="space-y-6">
              {result.detailedFeedback && (
                <div>
                  <h3 className="text-lg font-semibold text-gray-900 mb-2">Detailed Feedback</h3>
                  <p className="text-gray-600">{result.detailedFeedback}</p>
                </div>
              )}
              {result.strengthAreas && result.strengthAreas.length > 0 && (
                <div>
                  <h3 className="text-lg font-semibold text-gray-900 mb-2">Strength Areas</h3>
                  <ul className="list-disc list-inside space-y-1">
                    {result.strengthAreas.map((area, index) => (
                      <li key={index} className="text-gray-600">{area}</li>
                    ))}
                  </ul>
                </div>
              )}
              {result.improvementAreas && result.improvementAreas.length > 0 && (
                <div>
                  <h3 className="text-lg font-semibold text-gray-900 mb-2">Areas for Improvement</h3>
                  <ul className="list-disc list-inside space-y-1">
                    {result.improvementAreas.map((area, index) => (
                      <li key={index} className="text-gray-600">{area}</li>
                    ))}
                  </ul>
                </div>
              )}
              {result.recommendedTopics && result.recommendedTopics.length > 0 && (
                <div>
                  <h3 className="text-lg font-semibold text-gray-900 mb-2">Recommended Topics</h3>
                  <ul className="list-disc list-inside space-y-1">
                    {result.recommendedTopics.map((topic, index) => (
                      <li key={index} className="text-gray-600">{topic}</li>
                    ))}
                  </ul>
                </div>
              )}
            </div>
          </div>
          <div className="flex justify-center">
            <button
              onClick={resetAssessment}
              className="px-6 py-2 rounded-lg bg-indigo-600 text-white hover:bg-indigo-700 transition-colors"
            >
              Start New Assessment
            </button>
          </div>
        </div>
      )}
    </div>
  );
};
export default KnowledgeAssessmentPage;
````

## File: src/pages/LearningPathPage.tsx
````typescript
import React, { useState, useEffect } from 'react';
import { generateLearningPath, LearningStep, LearningProfile } from '../services/learningPathService';
import { BookOpen, Clock, Target, CheckCircle, AlertCircle } from 'lucide-react';
const LearningPathPage: React.FC = () => {
  const [learningPath, setLearningPath] = useState<LearningStep[]>([]);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState<string | null>(null);
  const [activeStep, setActiveStep] = useState<number>(0);
  useEffect(() => {
    const fetchLearningPath = async () => {
      try {
        setLoading(true);
        // Example profile - in a real app, this would come from user data
        const userProfile: LearningProfile = {
          completedCourses: ['Introduction to Programming', 'Basic Web Development'],
          interests: ['AI/ML', 'Web Development', 'Mobile Apps'],
          currentSkillLevel: 'intermediate',
          preferredLearningStyle: 'visual',
          learningGoals: ['Become a Full Stack Developer', 'Learn AI Development']
        };
        const path = await generateLearningPath(userProfile);
        setLearningPath(path);
      } catch (err) {
        setError(err instanceof Error ? err.message : 'Failed to generate learning path');
      } finally {
        setLoading(false);
      }
    };
    fetchLearningPath();
  }, []);
  if (loading) {
    return (
      <div className="flex items-center justify-center min-h-screen">
        <div className="animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-500"></div>
      </div>
    );
  }
  if (error) {
    return (
      <div className="flex items-center justify-center min-h-screen">
        <div className="text-red-500 flex items-center">
          <AlertCircle className="mr-2" />
          {error}
        </div>
      </div>
    );
  }
  return (
    <div className="max-w-7xl mx-auto p-6">
      <div className="mb-8">
        <h1 className="text-3xl font-bold text-gray-900">Your Personalized Learning Path</h1>
        <p className="text-gray-600 mt-2">
          Follow this AI-generated path to achieve your learning goals efficiently
        </p>
      </div>
      <div className="grid grid-cols-1 lg:grid-cols-12 gap-6">
        {/* Steps Navigation */}
        <div className="lg:col-span-3">
          <div className="bg-white rounded-lg shadow-sm border border-gray-200 p-4">
            <h3 className="font-semibold text-gray-900 mb-4">Learning Steps</h3>
            <div className="space-y-2">
              {learningPath.map((step, index) => (
                <button
                  key={step.id}
                  onClick={() => setActiveStep(index)}
                  className={`w-full text-left px-4 py-2 rounded-lg transition-colors ${
                    activeStep === index
                      ? 'bg-indigo-50 text-indigo-700'
                      : 'hover:bg-gray-50'
                  }`}
                >
                  <div className="flex items-center">
                    <span className="mr-2">
                      {index < activeStep ? (
                        <CheckCircle className="w-5 h-5 text-green-500" />
                      ) : (
                        <Target className="w-5 h-5 text-gray-400" />
                      )}
                    </span>
                    <span className="truncate">{step.title}</span>
                  </div>
                </button>
              ))}
            </div>
          </div>
        </div>
        {/* Active Step Content */}
        <div className="lg:col-span-9">
          {learningPath[activeStep] && (
            <div className="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
              <div className="mb-6">
                <h2 className="text-2xl font-bold text-gray-900 mb-2">
                  {learningPath[activeStep].title}
                </h2>
                <div className="flex items-center text-gray-500 space-x-4">
                  <span className="flex items-center">
                    <Target className="w-4 h-4 mr-1" />
                    {learningPath[activeStep].difficulty}
                  </span>
                  <span className="flex items-center">
                    <Clock className="w-4 h-4 mr-1" />
                    {learningPath[activeStep].duration}
                  </span>
                </div>
              </div>
              <div className="prose max-w-none">
                <div className="mb-6">
                  <h3 className="text-lg font-semibold mb-2">Description</h3>
                  <p className="text-gray-600">{learningPath[activeStep].description}</p>
                </div>
                <div className="mb-6">
                  <h3 className="text-lg font-semibold mb-2">Key Modules</h3>
                  <ul className="list-disc pl-5 space-y-1">
                    {learningPath[activeStep].modules.map((module, index) => (
                      <li key={index} className="text-gray-600">{module}</li>
                    ))}
                  </ul>
                </div>
                <div className="mb-6">
                  <h3 className="text-lg font-semibold mb-2">Prerequisites</h3>
                  <ul className="list-disc pl-5 space-y-1">
                    {learningPath[activeStep].prerequisites.map((prereq, index) => (
                      <li key={index} className="text-gray-600">{prereq}</li>
                    ))}
                  </ul>
                </div>
                <div>
                  <h3 className="text-lg font-semibold mb-2">Learning Outcomes</h3>
                  <ul className="list-disc pl-5 space-y-1">
                    {learningPath[activeStep].learningOutcomes.map((outcome, index) => (
                      <li key={index} className="text-gray-600">{outcome}</li>
                    ))}
                  </ul>
                </div>
              </div>
              <div className="mt-8 flex justify-between">
                <button
                  onClick={() => setActiveStep(Math.max(0, activeStep - 1))}
                  disabled={activeStep === 0}
                  className={`px-4 py-2 rounded-lg ${
                    activeStep === 0
                      ? 'bg-gray-100 text-gray-400 cursor-not-allowed'
                      : 'bg-indigo-50 text-indigo-700 hover:bg-indigo-100'
                  }`}
                >
                  Previous Step
                </button>
                <button
                  onClick={() => setActiveStep(Math.min(learningPath.length - 1, activeStep + 1))}
                  disabled={activeStep === learningPath.length - 1}
                  className={`px-4 py-2 rounded-lg ${
                    activeStep === learningPath.length - 1
                      ? 'bg-gray-100 text-gray-400 cursor-not-allowed'
                      : 'bg-indigo-600 text-white hover:bg-indigo-700'
                  }`}
                >
                  Next Step
                </button>
              </div>
            </div>
          )}
        </div>
      </div>
    </div>
  );
};
export default LearningPathPage;
````

## File: src/pages/LearningPathsPage.tsx
````typescript
import React, { useState } from 'react';
import { Target, ArrowRight, Brain, Code, Database, Globe } from 'lucide-react';
import ProfileSetup from '../components/onboarding/ProfileSetup';
interface Assessment {
  strengths: string[];
  weaknesses: string[];
  learningStyle: string;
}
const LearningPathsPage = () => {
  const [showProfileSetup, setShowProfileSetup] = useState(false);
  const [assessment, setAssessment] = useState<Assessment>({
    strengths: [],
    weaknesses: [],
    learningStyle: ''
  });
  const getRecommendedPaths = () => {
    return [
      {
        title: assessment.strengths.includes('frontend') ? 'Frontend Development Master Path' : 'Full-Stack Development Path',
        description: `Personalized path focusing on your ${assessment.weaknesses.join(', ')} with ${assessment.learningStyle} approach`,
        level: assessment.strengths.length > 3 ? 'Advanced' : 'Intermediate',
        duration: '4-6 months',
        style: assessment.learningStyle,
        modules: [
          'Core Fundamentals',
          ...assessment.weaknesses.map(w => `${w.charAt(0).toUpperCase() + w.slice(1)} Mastery`),
          'Advanced Projects'
        ]
      },
      {
        title: 'Specialized Technical Path',
        description: `Deep dive into ${assessment.strengths.join(', ')} with advanced concepts`,
        level: 'Advanced',
        duration: '3 months',
        style: assessment.learningStyle,
        modules: [
          'Advanced Concepts',
          'Real-world Projects',
          'Industry Best Practices'
        ]
      }
    ];
  };
  const LearningPaths = () => {
    const recommendedPaths = getRecommendedPaths();
    return (
      <div className="space-y-6">
        <div className="flex justify-between items-center">
          <h2 className="text-xl font-semibold">Recommended Learning Paths</h2>
          <button
            onClick={() => setShowProfileSetup(true)}
            className="text-indigo-600 hover:text-indigo-700 text-sm font-medium"
          >
            Update Learning Profile
          </button>
        </div>
        <div className="grid gap-6 md:grid-cols-2">
          {recommendedPaths.map((path, index) => (
            <div key={index} className="bg-white p-6 rounded-lg shadow-sm border border-gray-200">
              <div className="flex items-center mb-4">
                <Target className="h-6 w-6 text-indigo-600 mr-2" />
                <h2 className="text-lg font-semibold">{path.title}</h2>
              </div>
              <p className="text-gray-600 mb-4">{path.description}</p>
              <div className="flex items-center text-sm text-gray-500 mb-4">
                <span className="mr-4">Level: {path.level}</span>
                <span>Duration: {path.duration}</span>
              </div>
              <div className="mb-4">
                <h3 className="font-medium mb-2">Key Modules:</h3>
                <ul className="space-y-1 text-sm text-gray-600">
                  {path.modules.map((module, idx) => (
                    <li key={idx} className="flex items-center">
                      <ArrowRight className="h-4 w-4 mr-2 text-indigo-600" />
                      {module}
                    </li>
                  ))}
                </ul>
              </div>
              <button className="w-full bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors flex items-center justify-center">
                Start Learning
                <ArrowRight className="h-4 w-4 ml-2" />
              </button>
            </div>
          ))}
        </div>
      </div>
    );
  };
  return (
    <div className="p-6">
      <div className="mb-6">
        <h1 className="text-2xl font-bold text-gray-900 mb-2">Custom Learning Paths</h1>
        <p className="text-gray-600">Let's create a learning path tailored to your needs.</p>
      </div>
      {showProfileSetup ? (
        <div className="fixed inset-0 bg-black/50 flex items-center justify-center z-50">
          <div className="bg-white rounded-lg p-6 max-w-2xl w-full mx-4 relative">
            <button
              onClick={() => setShowProfileSetup(false)}
              className="absolute right-4 top-4 text-gray-400 hover:text-gray-600"
            >
              ×
            </button>
            <ProfileSetup onComplete={() => setShowProfileSetup(false)} />
          </div>
        </div>
      ) : (
        <LearningPaths />
      )}
    </div>
  );
};
export default LearningPathsPage;
````

## File: src/pages/LearningStyleAssessmentPage.tsx
````typescript
import React, { useState } from 'react';
import { Brain, ArrowRight, CheckCircle2 } from 'lucide-react';
import { useNavigate } from 'react-router-dom';
interface Question {
  id: string;
  text: string;
  options: string[];
  styles: ('visual' | 'auditory' | 'kinesthetic' | 'reading')[];
}
const questions: Question[] = [
  {
    id: '1',
    text: 'When learning something new, I prefer to:',
    options: [
      'Read detailed written instructions',
      'Watch a video demonstration',
      'Try it hands-on immediately',
      'Listen to verbal explanations'
    ],
    styles: ['reading', 'visual', 'kinesthetic', 'auditory']
  },
  {
    id: '2',
    text: 'I learn best when:',
    options: [
      'I can see diagrams and visual aids',
      'I can listen to explanations',
      'I can physically practice the skill',
      'I can read and take notes'
    ],
    styles: ['visual', 'auditory', 'kinesthetic', 'reading']
  },
  {
    id: '3',
    text: 'When solving problems, I tend to:',
    options: [
      'Draw diagrams or sketches',
      'Talk through the solutions',
      'Use a hands-on approach',
      'Write down the steps'
    ],
    styles: ['visual', 'auditory', 'kinesthetic', 'reading']
  },
  {
    id: '4',
    text: 'I remember information best by:',
    options: [
      'Creating visual images in my mind',
      'Repeating it out loud',
      'Moving or using my hands',
      'Writing it down multiple times'
    ],
    styles: ['visual', 'auditory', 'kinesthetic', 'reading']
  },
  {
    id: '5',
    text: 'When working on a new project, I prefer to:',
    options: [
      'Look at examples and diagrams',
      'Discuss ideas with others',
      'Build a prototype or model',
      'Read documentation and guides'
    ],
    styles: ['visual', 'auditory', 'kinesthetic', 'reading']
  }
];
interface LearningStyle {
  visual: number;
  auditory: number;
  kinesthetic: number;
  reading: number;
}
const LearningStyleAssessmentPage: React.FC = () => {
  const navigate = useNavigate();
  const [currentQuestion, setCurrentQuestion] = useState(0);
  const [answers, setAnswers] = useState<Record<string, number>>({});
  const [showResult, setShowResult] = useState(false);
  const [result, setResult] = useState<string>('');
  const [styles, setStyles] = useState<LearningStyle>({
    visual: 0,
    auditory: 0,
    kinesthetic: 0,
    reading: 0
  });
  const handleAnswer = (optionIndex: number) => {
    const question = questions[currentQuestion];
    const selectedStyle = question.styles[optionIndex];
    setAnswers(prev => ({
      ...prev,
      [question.id]: optionIndex
    }));
    setStyles(prev => ({
      ...prev,
      [selectedStyle]: prev[selectedStyle] + 1
    }));
    if (currentQuestion < questions.length - 1) {
      setCurrentQuestion(prev => prev + 1);
    } else {
      calculateResult();
    }
  };
  const calculateResult = () => {
    const totalResponses = Object.values(styles).reduce((a, b) => a + b, 0);
    const percentages = Object.entries(styles).reduce((acc, [style, count]) => {
      acc[style] = Math.round((count / totalResponses) * 100);
      return acc;
    }, {} as Record<string, number>);
    const dominantStyle = Object.entries(percentages).reduce((a, b) => 
      a[1] > b[1] ? a : b
    )[0];
    const resultDescriptions = {
      visual: 'You are a Visual Learner! You learn best through seeing and observing. Use diagrams, charts, and visual aids to enhance your learning.',
      auditory: 'You are an Auditory Learner! You learn best through listening and discussion. Try recording lectures and participating in group discussions.',
      kinesthetic: 'You are a Kinesthetic Learner! You learn best through hands-on experience. Focus on practical exercises and real-world applications.',
      reading: 'You are a Reading/Writing Learner! You learn best through written words. Take detailed notes and read comprehensive materials.'
    };
    setResult(resultDescriptions[dominantStyle as keyof typeof resultDescriptions]);
    setShowResult(true);
  };
  const resetAssessment = () => {
    setCurrentQuestion(0);
    setAnswers({});
    setShowResult(false);
    setResult('');
    setStyles({
      visual: 0,
      auditory: 0,
      kinesthetic: 0,
      reading: 0
    });
  };
  return (
    <div className="container mx-auto px-4 py-8 animate-fadeIn">
      <div className="max-w-3xl mx-auto">
        <div className="flex items-center justify-between mb-8">
          <button
            onClick={() => navigate('/dashboard')}
            className="text-gray-600 hover:text-gray-900 transition-colors"
          >
            ← Back to Dashboard
          </button>
          <div className="flex items-center space-x-2">
            <Brain className="h-6 w-6 text-indigo-600" />
            <h2 className="text-xl font-bold text-gray-900">
              Learning Style Assessment
            </h2>
          </div>
        </div>
        <div className="bg-white rounded-lg shadow-sm border border-gray-200 p-8">
          {!showResult ? (
            <div className="space-y-6">
              <div className="mb-8">
                <div className="flex justify-between text-sm text-gray-600 mb-2">
                  <span>Question {currentQuestion + 1} of {questions.length}</span>
                  <span>{Math.round(((currentQuestion + 1) / questions.length) * 100)}% Complete</span>
                </div>
                <div className="w-full bg-gray-200 rounded-full h-2">
                  <div 
                    className="bg-indigo-600 rounded-full h-2 transition-all duration-300"
                    style={{ width: `${((currentQuestion + 1) / questions.length) * 100}%` }}
                  />
                </div>
              </div>
              <h3 className="text-xl font-semibold text-gray-900 mb-6">
                {questions[currentQuestion].text}
              </h3>
              <div className="grid gap-4">
                {questions[currentQuestion].options.map((option, index) => (
                  <button
                    key={index}
                    onClick={() => handleAnswer(index)}
                    className="w-full text-left p-4 rounded-lg border border-gray-200 hover:border-indigo-500 hover:bg-indigo-50 transition-all duration-200 transform hover:scale-[1.02]"
                  >
                    <div className="flex items-center">
                      <span className="flex-1">{option}</span>
                      <ArrowRight className="h-5 w-5 text-gray-400" />
                    </div>
                  </button>
                ))}
              </div>
            </div>
          ) : (
            <div className="text-center space-y-6">
              <CheckCircle2 className="mx-auto h-12 w-12 text-green-500" />
              <div>
                <h3 className="text-2xl font-bold text-gray-900 mb-2">
                  Your Learning Style Results
                </h3>
                <p className="text-gray-600 max-w-2xl mx-auto">
                  {result}
                </p>
              </div>
              <div className="max-w-md mx-auto">
                {Object.entries(styles).map(([style, count]) => {
                  const percentage = Math.round((count / Object.values(styles).reduce((a, b) => a + b, 0)) * 100);
                  return (
                    <div key={style} className="mb-4">
                      <div className="flex justify-between text-sm text-gray-600 mb-1">
                        <span className="capitalize">{style}</span>
                        <span>{percentage}%</span>
                      </div>
                      <div className="w-full bg-gray-200 rounded-full h-2">
                        <div
                          className="bg-indigo-600 rounded-full h-2 transition-all duration-300"
                          style={{ width: `${percentage}%` }}
                        />
                      </div>
                    </div>
                  );
                })}
              </div>
              <button
                onClick={resetAssessment}
                className="inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 transition-colors"
              >
                Take Assessment Again
              </button>
            </div>
          )}
        </div>
      </div>
    </div>
  );
};
export default LearningStyleAssessmentPage;
````

## File: src/pages/LibraryPage.tsx
````typescript
import React, { useState, useEffect } from 'react';
import { BookOpen, Search, Filter, Clock } from 'lucide-react';
import { getResources } from '../services/firebase.service';
import type { Resource } from '../services/firebase.service';
const LibraryPage = () => {
  const [resources, setResources] = useState<Resource[]>([]);
  const [loading, setLoading] = useState(true);
  const [search, setSearch] = useState('');
  useEffect(() => {
    const unsubscribe = getResources((data) => {
      setResources(data);
      setLoading(false);
    });
    return () => unsubscribe();
  }, []);
  const filteredResources = resources.filter(resource =>
    resource.title.toLowerCase().includes(search.toLowerCase())
  );
  if (loading) {
    return (
      <div className="flex items-center justify-center h-64">
        <div className="animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"></div>
      </div>
    );
  }
  return (
    <div className="p-6">
      <div className="mb-6">
        <h1 className="text-2xl font-bold text-gray-900 mb-2">Content Library</h1>
        <p className="text-gray-600">Access our comprehensive collection of learning resources.</p>
      </div>
      <div className="mb-6 flex gap-4">
        <div className="flex-1 relative">
          <Search className="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5" />
          <input
            type="text"
            placeholder="Search resources..."
            value={search}
            onChange={(e) => setSearch(e.target.value)}
            className="w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500"
          />
        </div>
        <button className="flex items-center px-4 py-2 border rounded-lg hover:bg-gray-50">
          <Filter className="h-5 w-5 mr-2" />
          Filters
        </button>
      </div>
      <div className="grid gap-6 md:grid-cols-2 lg:grid-cols-3">
        {filteredResources.map((resource) => (
          <div key={resource.id} className="bg-white p-6 rounded-lg shadow-sm border border-gray-200">
            <div className="flex items-center mb-4">
              <BookOpen className="h-6 w-6 text-indigo-600 mr-2" />
              <h2 className="text-lg font-semibold">{resource.title}</h2>
            </div>
            <div className="space-y-2 mb-4">
              <div className="flex items-center text-sm text-gray-500">
                <span className="mr-4">Type: {resource.type}</span>
                <span>Level: {resource.level}</span>
              </div>
              <div className="flex items-center text-sm text-gray-500">
                <Clock className="h-4 w-4 mr-1" />
                <span>Duration: {resource.duration}</span>
              </div>
            </div>
            <button className="w-full bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors">
              Start Learning
            </button>
          </div>
        ))}
      </div>
      {filteredResources.length === 0 && (
        <div className="text-center py-12">
          <BookOpen className="h-12 w-12 text-gray-400 mx-auto mb-4" />
          <h3 className="text-lg font-medium text-gray-900 mb-2">No resources found</h3>
          <p className="text-gray-600">Try adjusting your search or filters</p>
        </div>
      )}
    </div>
  );
};
export default LibraryPage;
````

## File: src/pages/MentoringPage.tsx
````typescript
import React from 'react';
import { UserCircle, Calendar, MessageCircle, Star } from 'lucide-react';
const mentors = [
  {
    name: 'Dr. Sarah Johnson',
    expertise: 'Web Development',
    rating: 4.9,
    availability: 'Next available: Tomorrow'
  },
  {
    name: 'Prof. Michael Chen',
    expertise: 'Data Science',
    rating: 4.8,
    availability: 'Next available: Today'
  },
  {
    name: 'Emma Williams',
    expertise: 'Mobile Development',
    rating: 4.7,
    availability: 'Next available: In 2 days'
  }
];
const MentoringPage = () => {
  return (
    <div className="p-6">
      <div className="mb-6">
        <h1 className="text-2xl font-bold text-gray-900 mb-2">1-on-1 Mentoring</h1>
        <p className="text-gray-600">Connect with expert mentors for personalized guidance.</p>
      </div>
      <div className="grid gap-6 md:grid-cols-2 lg:grid-cols-3">
        {mentors.map((mentor, index) => (
          <div key={index} className="bg-white p-6 rounded-lg shadow-sm border border-gray-200">
            <div className="flex items-center mb-4">
              <div className="h-12 w-12 rounded-full bg-indigo-100 flex items-center justify-center">
                <UserCircle className="h-8 w-8 text-indigo-600" />
              </div>
              <div className="ml-3">
                <h2 className="text-lg font-semibold">{mentor.name}</h2>
                <p className="text-sm text-gray-600">{mentor.expertise}</p>
              </div>
            </div>
            <div className="space-y-2 mb-4">
              <div className="flex items-center text-sm">
                <Star className="h-4 w-4 text-yellow-400 mr-1" />
                <span>{mentor.rating} / 5.0</span>
              </div>
              <div className="flex items-center text-sm text-gray-500">
                <Calendar className="h-4 w-4 mr-1" />
                <span>{mentor.availability}</span>
              </div>
            </div>
            <div className="flex gap-2">
              <button className="flex-1 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors flex items-center justify-center">
                <Calendar className="h-4 w-4 mr-2" />
                Schedule
              </button>
              <button className="flex-1 border border-gray-200 px-4 py-2 rounded-lg hover:bg-gray-50 transition-colors flex items-center justify-center">
                <MessageCircle className="h-4 w-4 mr-2" />
                Message
              </button>
            </div>
          </div>
        ))}
      </div>
    </div>
  );
};
export default MentoringPage;
````

## File: src/pages/ProfilePage.tsx
````typescript
import React, { useEffect, useState } from 'react';
import { useAuth } from '../contexts/AuthContext';
import { getUserDocument } from '../services/firebase.service';
import { Timestamp } from 'firebase/firestore';
interface UserProfile {
  name: string;
  email: string;
  role: string;
  assessments: string[];
  createdAt: Timestamp;
  updatedAt: Timestamp;
}
const ProfilePage: React.FC = () => {
  const { user } = useAuth();
  const [profile, setProfile] = useState<UserProfile | null>(null);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState<string | null>(null);
  useEffect(() => {
    const fetchProfile = async () => {
      if (!user) return;
      try {
        const userDoc = await getUserDocument(user.id);
        if (userDoc) {
          // Ensure we have default values for optional fields
          const profileData: UserProfile = {
            name: userDoc.name || user.name || 'User',
            email: userDoc.email || user.email || '',
            role: userDoc.role || 'user',
            assessments: userDoc.assessments || [],
            createdAt: userDoc.createdAt || Timestamp.now(),
            updatedAt: userDoc.updatedAt || Timestamp.now()
          };
          setProfile(profileData);
        }
      } catch (err) {
        console.error('Error fetching profile:', err);
        setError('Failed to load profile data');
      } finally {
        setLoading(false);
      }
    };
    fetchProfile();
  }, [user]);
  const formatDate = (timestamp: Timestamp) => {
    try {
      return timestamp.toDate().toLocaleDateString('en-US', {
        year: 'numeric',
        month: 'long',
        day: 'numeric'
      });
    } catch (err) {
      console.error('Error formatting date:', err);
      return 'Date not available';
    }
  };
  if (loading) {
    return (
      <div className="flex items-center justify-center min-h-[80vh]">
        <div className="animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"></div>
      </div>
    );
  }
  if (error) {
    return (
      <div className="p-4 text-center">
        <div className="text-red-600">{error}</div>
      </div>
    );
  }
  if (!profile) {
    return (
      <div className="p-4 text-center">
        <div className="text-gray-600">Profile not found</div>
      </div>
    );
  }
  return (
    <div className="p-8">
      <div className="max-w-4xl mx-auto bg-white rounded-lg shadow-md overflow-hidden">
        <div className="px-8 py-6">
          <h1 className="text-3xl font-bold text-gray-900 mb-6">Profile</h1>
          <div className="space-y-6">
            <div>
              <h2 className="text-xl font-semibold text-gray-800 mb-2">Personal Information</h2>
              <div className="grid grid-cols-2 gap-4">
                <div>
                  <label className="block text-sm font-medium text-gray-600">Name</label>
                  <div className="mt-1 text-gray-900">{profile.name}</div>
                </div>
                <div>
                  <label className="block text-sm font-medium text-gray-600">Email</label>
                  <div className="mt-1 text-gray-900">{profile.email}</div>
                </div>
                <div>
                  <label className="block text-sm font-medium text-gray-600">Role</label>
                  <div className="mt-1 text-gray-900 capitalize">{profile.role}</div>
                </div>
                <div>
                  <label className="block text-sm font-medium text-gray-600">Member Since</label>
                  <div className="mt-1 text-gray-900">
                    {formatDate(profile.createdAt)}
                  </div>
                </div>
              </div>
            </div>
            <div>
              <h2 className="text-xl font-semibold text-gray-800 mb-2">Assessment History</h2>
              {profile.assessments && profile.assessments.length > 0 ? (
                <div className="bg-gray-50 rounded-lg p-4">
                  <div className="text-sm text-gray-600">
                    Completed Assessments: {profile.assessments.length}
                  </div>
                  {/* We can add more detailed assessment history here */}
                </div>
              ) : (
                <div className="text-gray-600">No assessments completed yet</div>
              )}
            </div>
          </div>
        </div>
      </div>
    </div>
  );
};
export default ProfilePage;
````

## File: src/pages/SkillsAssessmentPage.tsx
````typescript
import React, { useState, useRef, useEffect } from 'react';
import Editor from '@monaco-editor/react';
import { AlertCircle, BookOpen, CheckCircle2, Code, Loader2 } from 'lucide-react';
import {
  analyzeCode,
  suggestLearningResources,
  AssessmentResult
} from '../services/skillAssessmentService';
import {
  Question,
  SubmissionResult,
  generateQuestion,
  checkAnswer,
  saveScore
} from '../services/questionService';
const focusAreaOptions = [
  'Code Quality',
  'Performance',
  'Security',
  'Best Practices',
  'Design Patterns',
  'Testing',
  'Documentation',
  'Error Handling'
];
const SkillsAssessmentPage: React.FC = () => {
  const [code, setCode] = useState<string>('');
  const [language, setLanguage] = useState('typescript');
  const [skillLevel, setSkillLevel] = useState('intermediate');
  const [focusAreas, setFocusAreas] = useState<string[]>([]);
  const [loading, setLoading] = useState(false);
  const [loadingMessage, setLoadingMessage] = useState('');
  const [error, setError] = useState<string | null>(null);
  const [result, setResult] = useState<AssessmentResult | null>(null);
  const [resources, setResources] = useState<string[]>([]);
  const [currentQuestion, setCurrentQuestion] = useState<Question | null>(null);
  const [submissionResult, setSubmissionResult] = useState<SubmissionResult | null>(null);
  const handleEditorChange = (value: string | undefined) => {
    setCode(value || '');
    setError(null);
    setResult(null);
    setResources([]);
    setSubmissionResult(null);
  };
  const handleFocusAreaToggle = (area: string) => {
    setFocusAreas(prev => 
      prev.includes(area)
        ? prev.filter(a => a !== area)
        : [...prev, area]
    );
  };
  const handleGenerateQuestion = async () => {
    try {
      setLoading(true);
      setLoadingMessage('Generating question...');
      setError(null);
      setCurrentQuestion(null);
      if (focusAreas.length === 0) {
        throw new Error('Please select at least one focus area');
      }
      if (!language) {
        throw new Error('Please select a programming language');
      }
      if (!skillLevel) {
        throw new Error('Please select a skill level');
      }
      console.log('Generating question with:', { language, skillLevel, focusAreas });
      const question = await generateQuestion(language, skillLevel, focusAreas);
      console.log('Generated question:', question);
      setCurrentQuestion(question);
      setCode(''); // Clear the editor
    } catch (err: any) {
      console.error('Question generation error:', err);
      const errorMessage = err.message || 'Failed to generate question';
      setError(`Error: ${errorMessage}. Please try again or select different parameters.`);
      setCurrentQuestion(null);
    } finally {
      setLoading(false);
      setLoadingMessage('');
    }
  };
  const handleAssessment = async () => {
    try {
      setLoading(true);
      setError(null);
      if (!code.trim()) {
        throw new Error('Please enter some code to analyze');
      }
      if (focusAreas.length === 0) {
        throw new Error('Please select at least one focus area');
      }
      // If there's a current question, check the answer first
      if (currentQuestion) {
        setLoadingMessage('Checking your solution...');
        const submission = await checkAnswer(currentQuestion, code, language);
        setSubmissionResult(submission);
        // Save the score to the database (replace 'user123' with actual user ID)
        await saveScore('user123', currentQuestion.id, submission.score, language);
      }
      // Continue with regular code analysis
      setLoadingMessage('Analyzing your code...');
      const assessmentResult = await analyzeCode(
        code,
        language,
        skillLevel,
        focusAreas
      );
      setResult(assessmentResult);
      // Get learning resources
      setLoadingMessage('Finding learning resources...');
      const learningResources = await suggestLearningResources(
        assessmentResult.weaknesses,
        language,
        skillLevel
      );
      setResources(learningResources);
    } catch (err: any) {
      console.error('Assessment error:', err);
      setError(err.message || 'An unexpected error occurred');
      setResult(null);
      setResources([]);
    } finally {
      setLoading(false);
      setLoadingMessage('');
    }
  };
  return (
    <div className="p-6 max-w-7xl mx-auto">
      <div className="mb-8">
        <h1 className="text-2xl font-bold text-gray-900 mb-2">Skills Assessment</h1>
        <p className="text-gray-600">
          Practice coding questions and get personalized feedback.
        </p>
      </div>
      {error && (
        <div className="mb-6 bg-red-50 border border-red-200 rounded-lg p-4">
          <div className="flex items-start space-x-2">
            <AlertCircle className="w-5 h-5 text-red-500 mt-0.5" />
            <div>
              <h3 className="text-sm font-medium text-red-800">Error</h3>
              <p className="text-sm text-red-700 mt-1">{error}</p>
            </div>
          </div>
        </div>
      )}
      <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
        <div className="space-y-6">
          <div className="bg-white p-6 rounded-lg shadow-sm border border-gray-200">
            <div className="mb-4">
              <label className="block text-sm font-medium text-gray-700 mb-2">
                Programming Language
              </label>
              <select
                value={language}
                onChange={(e) => setLanguage(e.target.value)}
                className="w-full px-3 py-2 border border-gray-300 rounded-md"
                disabled={loading}
              >
                <option value="typescript">TypeScript</option>
                <option value="javascript">JavaScript</option>
                <option value="python">Python</option>
                <option value="java">Java</option>
                <option value="csharp">C#</option>
              </select>
            </div>
            <div className="mb-4">
              <label className="block text-sm font-medium text-gray-700 mb-2">
                Skill Level
              </label>
              <select
                value={skillLevel}
                onChange={(e) => setSkillLevel(e.target.value)}
                className="w-full px-3 py-2 border border-gray-300 rounded-md"
                disabled={loading}
              >
                <option value="beginner">Beginner</option>
                <option value="intermediate">Intermediate</option>
                <option value="advanced">Advanced</option>
              </select>
            </div>
            <div className="mb-4">
              <label className="block text-sm font-medium text-gray-700 mb-2">
                Focus Areas
              </label>
              <div className="grid grid-cols-2 gap-2">
                {focusAreaOptions.map(area => (
                  <button
                    key={area}
                    onClick={() => handleFocusAreaToggle(area)}
                    disabled={loading}
                    className={`px-3 py-2 rounded-md text-sm font-medium transition-colors ${
                      focusAreas.includes(area)
                        ? 'bg-indigo-100 text-indigo-700 border-indigo-300'
                        : 'bg-gray-50 text-gray-700 border-gray-200 hover:bg-gray-100'
                    } border disabled:opacity-50 disabled:cursor-not-allowed`}
                  >
                    {area}
                  </button>
                ))}
              </div>
            </div>
          </div>
          <div className="bg-white p-6 rounded-lg shadow-sm border border-gray-200">
            <div className="flex justify-between items-center mb-4">
              <label className="block text-sm font-medium text-gray-700">
                {currentQuestion ? 'Your Solution' : 'Your Code'}
              </label>
              <button
                onClick={handleGenerateQuestion}
                disabled={loading}
                className="px-4 py-2 text-sm font-medium text-indigo-600 hover:text-indigo-500"
              >
                Generate New Question
              </button>
            </div>
            {currentQuestion && (
              <div className="mb-4 bg-indigo-50 p-4 rounded-lg">
                <h4 className="text-sm font-medium text-indigo-900 mb-2">Question:</h4>
                <p className="text-sm text-indigo-800 mb-3">{currentQuestion.question}</p>
                {currentQuestion.hints && currentQuestion.hints.length > 0 && (
                  <div className="mt-2">
                    <h5 className="text-sm font-medium text-indigo-900 mb-1">Hints:</h5>
                    <ul className="list-disc list-inside text-sm text-indigo-800">
                      {currentQuestion.hints.map((hint, index) => (
                        <li key={index}>{hint}</li>
                      ))}
                    </ul>
                  </div>
                )}
              </div>
            )}
            {loading ? (
              <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
                <div className="bg-white p-6 rounded-lg shadow-xl max-w-sm w-full mx-4">
                  <div className="flex flex-col items-center">
                    <Loader2 className="w-12 h-12 text-indigo-600 animate-spin mb-4" />
                    <p className="text-gray-700 text-center">{loadingMessage}</p>
                  </div>
                </div>
              </div>
            ) : (
              <div className="bg-[#1e1e1e] rounded-lg p-4">
                <div className="flex items-center justify-between mb-2">
                  <div className="flex space-x-2">
                    <div className="w-3 h-3 rounded-full bg-red-500"></div>
                    <div className="w-3 h-3 rounded-full bg-yellow-500"></div>
                    <div className="w-3 h-3 rounded-full bg-green-500"></div>
                  </div>
                  <span className="text-gray-400 text-sm">Code Editor</span>
                </div>
                <Editor
                  height="400px"
                  language={language.toLowerCase()}
                  value={code}
                  onChange={handleEditorChange}
                  options={{
                    minimap: { enabled: false },
                    fontSize: 14,
                    readOnly: loading,
                    theme: 'vs-dark',
                    scrollBeyondLastLine: false,
                    lineNumbers: 'on',
                    renderLineHighlight: 'all',
                    quickSuggestions: true,
                    suggestOnTriggerCharacters: true
                  }}
                  className="rounded-md overflow-hidden border border-gray-700"
                />
              </div>
            )}
            <div className="flex space-x-2">
              <button
                onClick={handleAssessment}
                disabled={loading || !code.trim()}
                className={`flex-1 flex items-center justify-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white ${
                  loading || !code.trim()
                    ? 'bg-indigo-400 cursor-not-allowed'
                    : 'bg-indigo-600 hover:bg-indigo-700'
                }`}
              >
                {loading ? (
                  <>
                    <Loader2 className="w-4 h-4 animate-spin mr-2" />
                    {loadingMessage}
                  </>
                ) : (
                  currentQuestion ? 'Submit Solution' : 'Analyze Code'
                )}
              </button>
            </div>
          </div>
        </div>
        <div className="space-y-6">
          {submissionResult && (
            <div className={`bg-white p-6 rounded-lg shadow-sm border ${
              submissionResult.correct ? 'border-green-200' : 'border-amber-200'
            }`}>
              <h3 className="text-lg font-semibold text-gray-900 mb-3">Submission Result</h3>
              <div className="space-y-4">
                <div className="flex items-center">
                  <div className={`w-8 h-8 rounded-full flex items-center justify-center ${
                    submissionResult.correct ? 'bg-green-100' : 'bg-amber-100'
                  }`}>
                    {submissionResult.correct ? (
                      <CheckCircle2 className="w-5 h-5 text-green-600" />
                    ) : (
                      <AlertCircle className="w-5 h-5 text-amber-600" />
                    )}
                  </div>
                  <div className="ml-3">
                    <h4 className={`font-medium ${
                      submissionResult.correct ? 'text-green-900' : 'text-amber-900'
                    }`}>
                      {submissionResult.correct ? 'Correct Solution!' : 'Not Quite Right'}
                    </h4>
                    <p className="text-sm text-gray-600">Score: {submissionResult.score}/10</p>
                  </div>
                </div>
                <p className="text-sm text-gray-700">{submissionResult.feedback}</p>
              </div>
            </div>
          )}
          {result && (
            <div className="bg-white p-6 rounded-lg shadow-sm border border-gray-200">
              <h3 className="text-lg font-semibold text-gray-900 mb-3">Analysis Results</h3>
              <div className="space-y-6">
                <div>
                  <h4 className="text-sm font-medium text-gray-900">Overall Score</h4>
                  <p className="mt-1 text-3xl font-semibold text-indigo-600">
                    {result.overallScore}/10
                  </p>
                </div>
                {result.strengths.length > 0 && (
                  <div>
                    <h4 className="text-sm font-medium text-gray-700 mb-2">Strengths</h4>
                    <ul className="space-y-2">
                      {result.strengths.map((strength, index) => (
                        <li key={index} className="flex items-start space-x-2">
                          <CheckCircle2 className="w-5 h-5 text-green-500 mt-0.5" />
                          <span className="text-sm text-gray-700">{strength}</span>
                        </li>
                      ))}
                    </ul>
                  </div>
                )}
                {result.weaknesses.length > 0 && (
                  <div>
                    <h4 className="text-sm font-medium text-gray-700 mb-2">Areas for Improvement</h4>
                    <ul className="space-y-2">
                      {result.weaknesses.map((weakness, index) => (
                        <li key={index} className="flex items-start space-x-2">
                          <AlertCircle className="w-5 h-5 text-amber-500 mt-0.5" />
                          <span className="text-sm text-gray-700">{weakness}</span>
                        </li>
                      ))}
                    </ul>
                  </div>
                )}
              </div>
            </div>
          )}
          {resources.length > 0 && (
            <div className="bg-white p-6 rounded-lg shadow-sm border border-gray-200">
              <h3 className="text-lg font-semibold text-gray-900 mb-3">Learning Resources</h3>
              <ul className="space-y-3">
                {resources.map((resource, index) => {
                  if (index < 2) return null; // Skip the header and focus areas
                  if (resource === '---') return <hr key={index} className="my-2" />;
                  const lines = resource.split('\n');
                  const title = lines[0];
                  const snippet = lines[1];
                  const link = lines[2]?.replace('Link: ', '');
                  return (
                    <li key={index} className="bg-gray-50 rounded-lg p-4">
                      <h4 className="text-md font-medium text-indigo-600 mb-2">
                        {title}
                      </h4>
                      {snippet && (
                        <p className="text-sm text-gray-600 mb-2">
                          {snippet}
                        </p>
                      )}
                      {link && (
                        <a
                          href={link}
                          target="_blank"
                          rel="noopener noreferrer"
                          className="text-sm text-indigo-500 hover:text-indigo-600 flex items-center"
                        >
                          Learn More
                          <svg className="w-4 h-4 ml-1" viewBox="0 0 20 20" fill="currentColor">
                            <path fillRule="evenodd" d="M10.293 5.293a1 1 0 011.414 0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L12.586 11H5a1 1 0 110-2h7.586l-2.293-2.293a1 1 0 010-1.414z" clipRule="evenodd" />
                          </svg>
                        </a>
                      )}
                    </li>
                  );
                })}
              </ul>
            </div>
          )}
        </div>
      </div>
    </div>
  );
};
export default SkillsAssessmentPage;
````

## File: src/services/ai/api.ts
````typescript
import axios from 'axios';
import { AI_API_URL, axiosConfig } from './config';
import { defaultQuestion, defaultHints, getDefaultCodingQuestion } from './defaults';
import { AIResponse, SkillAssessmentParams, AssessmentQuestion, CodeAnalysisResult } from './types';
import { sanitizeResponse, parseArrayResponse, validateQuestion, validateCodingQuestion } from './utils';
export const generateLearningPath = async (topic: string): Promise<string[]> => {
  try {
    const response = await axios.post<AIResponse>(
      AI_API_URL,
      {
        prompt: topic,
        history: [],
        system_prompt: `Generate a learning path for ${topic}. Focus on practical, real-world applications.`
      },
      axiosConfig
    );
    return parseArrayResponse(response.data?.response || '');
  } catch (error) {
    console.error("Error generating learning path:", error);
    return [];
  }
};
export const generateSkillAssessment = async (params: SkillAssessmentParams): Promise<AssessmentQuestion> => {
  const { topic = 'JavaScript', difficulty = 'medium' } = params;
  try {
    // First try to get a random default question
    const defaultQuestion = getDefaultCodingQuestion(topic, difficulty);
    // Then try to get an AI-generated question
    try {
      const prompt = `Generate a coding challenge for ${topic} programming. Return response in this exact JSON format:
      {
        "question": "detailed problem statement",
        "sampleInput": "example input",
        "sampleOutput": "example output",
        "testCases": [
          {
            "input": "test input 1",
            "expectedOutput": "expected output 1"
          },
          {
            "input": "test input 2",
            "expectedOutput": "expected output 2"
          }
        ],
        "timeLimit": number (in minutes),
        "difficulty": "${difficulty}",
        "hints": [
          "hint 1",
          "hint 2"
        ]
      }`;
      const response = await axios.post(
        AI_API_URL,
        {
          messages: [{
            role: "system",
            content: prompt
          }]
        },
        axiosConfig
      );
      if (!response.data?.response) {
        return defaultQuestion;
      }
      let aiQuestion;
      try {
        aiQuestion = JSON.parse(response.data.response);
      } catch (e) {
        console.error('Failed to parse AI question:', response.data.response);
        return defaultQuestion;
      }
      // Validate AI question structure
      if (!aiQuestion.question || !aiQuestion.sampleInput || !aiQuestion.sampleOutput || !aiQuestion.testCases) {
        return defaultQuestion;
      }
      // Return AI question with necessary fields
      return {
        id: Math.random().toString(36).substr(2, 9),
        ...aiQuestion,
        language: topic,
        type: 'coding'
      };
    } catch (aiError) {
      console.error("Error generating AI question:", aiError);
      return defaultQuestion;
    }
  } catch (error) {
    console.error("Error in generateSkillAssessment:", error);
    return getDefaultCodingQuestion(topic, difficulty);
  }
};
export const analyzeCode = async (code: string, language: string): Promise<string> => {
  try {
    const response = await axios.post(
      AI_API_URL,
      {
        messages: [{
          role: "system",
          content: `Analyze this ${language} code and tell if it's correct or wrong. Return ONLY "CORRECT" or "WRONG":
          ${code}`
        }]
      },
      axiosConfig
    );
    if (!response.data || !response.data.response) {
      throw new Error('Invalid response from AI');
    }
    const result = response.data.response.trim().toUpperCase();
    if (result !== 'CORRECT' && result !== 'WRONG') {
      throw new Error('Invalid analysis result');
    }
    return result;
  } catch (error) {
    console.error('Code analysis error:', error);
    throw new Error('Failed to analyze code');
  }
};
export const generatePersonalizedHints = async (
  topic: string,
  strengths: string[],
  weaknesses: string[]
): Promise<string[]> => {
  try {
    const response = await axios.post<AIResponse>(
      AI_API_URL,
      {
        prompt: "Generate learning hints",
        chat_message_prompts: [{
          role: "system",
          content: `Generate personalized learning hints for ${topic}. Consider student strengths: ${strengths.join(', ')} and areas to improve: ${weaknesses.join(', ')}`
        }],
        history: []
      },
      axiosConfig
    );
    const hints = parseArrayResponse(response.data?.response || '');
    return hints.length > 0 ? hints : defaultHints;
  } catch (error) {
    console.error("Error generating hints:", error);
    return defaultHints;
  }
};
````

## File: src/services/ai/config.ts
````typescript
import { AxiosRequestConfig } from 'axios';
export const AI_API_URL = "https://47ec-34-42-208-44.ngrok-free.app/generate/";
export const axiosConfig: AxiosRequestConfig = {
  timeout: 30000, // Increased timeout to 30 seconds
  headers: {
    'Content-Type': 'application/json',
    'Accept': 'application/json',
    'Access-Control-Allow-Origin': '*'
  },
  validateStatus: (status) => {
    return status >= 200 && status < 500; // Don't reject if status is less than 500
  }
};
````

## File: src/services/ai/defaults.ts
````typescript
import { AssessmentQuestion } from './types';
const defaultQuestions: Record<string, AssessmentQuestion[]> = {
  JavaScript: [
    {
      id: 'js1',
      type: 'coding',
      language: 'JavaScript',
      question: 'Write a function that reverses a string. The function should take a string as input and return the reversed string.',
      sampleInput: '"hello"',
      sampleOutput: '"olleh"',
      testCases: [
        { input: '"hello"', expectedOutput: '"olleh"' },
        { input: '"world"', expectedOutput: '"dlrow"' }
      ],
      timeLimit: 15,
      difficulty: 'easy',
      hints: ['Try converting the string to an array', 'Use array methods to reverse']
    },
    {
      id: 'js2',
      type: 'coding',
      language: 'JavaScript',
      question: 'Write a function that finds the most frequent element in an array. Return the element that appears the most times.',
      sampleInput: '[1, 2, 3, 2, 4, 2, 5]',
      sampleOutput: '2',
      testCases: [
        { input: '[1, 2, 3, 2, 4, 2, 5]', expectedOutput: '2' },
        { input: '[1, 1, 1, 2, 2, 3]', expectedOutput: '1' }
      ],
      timeLimit: 20,
      difficulty: 'medium',
      hints: ['Use an object to count occurrences', 'Track the maximum count']
    },
    {
      id: 'js3',
      type: 'coding',
      language: 'JavaScript',
      question: 'Write a function that checks if two strings are anagrams. Return true if they are anagrams, false otherwise.',
      sampleInput: '"listen", "silent"',
      sampleOutput: 'true',
      testCases: [
        { input: '"listen", "silent"', expectedOutput: 'true' },
        { input: '"hello", "world"', expectedOutput: 'false' }
      ],
      timeLimit: 15,
      difficulty: 'easy',
      hints: ['Try sorting the characters', 'Consider case sensitivity']
    },
    {
      id: 'js4',
      type: 'coding',
      language: 'JavaScript',
      question: 'Write a function that finds all pairs of numbers in an array that sum to a target value.',
      sampleInput: '[1, 4, 2, 7, 5, 3], target = 7',
      sampleOutput: '[[4,3], [2,5]]',
      testCases: [
        { input: '[1, 4, 2, 7, 5, 3], 7', expectedOutput: '[[4,3], [2,5]]' },
        { input: '[1, 2, 3, 4], 5', expectedOutput: '[[2,3], [1,4]]' }
      ],
      timeLimit: 20,
      difficulty: 'medium',
      hints: ['Consider using a hash map', 'Think about handling duplicates']
    }
  ],
  Python: [
    {
      id: 'py1',
      type: 'coding',
      language: 'Python',
      question: 'Write a function that checks if a string is a palindrome. Return True if the string reads the same forwards and backwards, False otherwise.',
      sampleInput: '"racecar"',
      sampleOutput: 'True',
      testCases: [
        { input: '"racecar"', expectedOutput: 'True' },
        { input: '"hello"', expectedOutput: 'False' }
      ],
      timeLimit: 15,
      difficulty: 'easy',
      hints: ['Compare the string with its reverse', 'Consider using string slicing']
    },
    {
      id: 'py2',
      type: 'coding',
      language: 'Python',
      question: 'Write a function that finds all prime numbers up to a given number n. Return a list of prime numbers.',
      sampleInput: '10',
      sampleOutput: '[2, 3, 5, 7]',
      testCases: [
        { input: '10', expectedOutput: '[2, 3, 5, 7]' },
        { input: '20', expectedOutput: '[2, 3, 5, 7, 11, 13, 17, 19]' }
      ],
      timeLimit: 20,
      difficulty: 'medium',
      hints: ['Consider using the Sieve of Eratosthenes', 'Think about optimization']
    }
  ],
  Java: [
    {
      id: 'java1',
      type: 'coding',
      language: 'Java',
      question: 'Write a function that finds the sum of all even numbers in an array. Return the total sum.',
      sampleInput: '[1, 2, 3, 4, 5, 6]',
      sampleOutput: '12',
      testCases: [
        { input: '[1, 2, 3, 4, 5, 6]', expectedOutput: '12' },
        { input: '[1, 3, 5, 7]', expectedOutput: '0' }
      ],
      timeLimit: 15,
      difficulty: 'easy',
      hints: ['Use modulo operator to check for even numbers', 'Consider using a loop or stream']
    }
  ]
};
// Keep track of recently used questions to avoid repetition
let recentQuestions: string[] = [];
export const getDefaultCodingQuestion = (language: string, difficulty: string): AssessmentQuestion => {
  const questions = defaultQuestions[language] || defaultQuestions.JavaScript;
  // Filter questions by difficulty and exclude recently used ones
  const availableQuestions = questions.filter(q => 
    q.difficulty === difficulty && !recentQuestions.includes(q.id)
  );
  // If no available questions, clear recent questions and try again
  if (availableQuestions.length === 0) {
    recentQuestions = [];
    return getDefaultCodingQuestion(language, difficulty);
  }
  // Get a random question from available ones
  const randomIndex = Math.floor(Math.random() * availableQuestions.length);
  const selectedQuestion = availableQuestions[randomIndex];
  // Add to recent questions, keeping only last 3
  recentQuestions.push(selectedQuestion.id);
  if (recentQuestions.length > 3) {
    recentQuestions.shift();
  }
  return selectedQuestion;
};
export const defaultHints = [
  'Break down the problem into smaller steps',
  'Consider edge cases in your solution',
  'Think about the time complexity',
  'Test your code with different inputs'
];
````

## File: src/services/ai/types.ts
````typescript
export interface AIResponse {
  response: string;
}
export interface SkillAssessmentParams {
  strengths: string[];
  weaknesses: string[];
  topic?: string;
  difficulty?: 'easy' | 'medium' | 'hard';
}
export interface CodeAnalysisResult {
  isCorrect: boolean;
  feedback: string;
  suggestions?: string[];
  score?: number;
}
export interface AssessmentQuestion {
  id: string;
  question: string;
  type: 'coding';
  language: string;
  testCases: {
    input: string;
    expectedOutput: string;
  }[];
  sampleInput?: string;
  sampleOutput?: string;
  timeLimit?: number;
  difficulty: 'easy' | 'medium' | 'hard';
  hints?: string[];
}
````

## File: src/services/ai/utils.ts
````typescript
import { AssessmentQuestion } from './types';
export const sanitizeResponse = (response: string): string => {
  return response?.trim() || '';
};
export const parseArrayResponse = (response: string): string[] => {
  try {
    const parsed = JSON.parse(response);
    return Array.isArray(parsed) ? parsed : [];
  } catch {
    return response.split('\n').filter(line => line.trim());
  }
};
export const validateQuestion = (
  parsedData: any,
  defaultData: any
): { isValid: boolean; data: any } => {
  if (!parsedData || typeof parsedData !== 'object') {
    return { isValid: false, data: defaultData };
  }
  const hasRequiredFields = 
    typeof parsedData.question === 'string' &&
    Array.isArray(parsedData.options) &&
    typeof parsedData.correctAnswer === 'string' &&
    typeof parsedData.explanation === 'string';
  if (!hasRequiredFields) {
    return { isValid: false, data: defaultData };
  }
  const hasValidOptions = 
    parsedData.options.length === 4 &&
    parsedData.options.every((opt: any) => typeof opt === 'string');
  if (!hasValidOptions) {
    return { isValid: false, data: defaultData };
  }
  return { isValid: true, data: parsedData };
};
export const validateCodingQuestion = (
  question: any,
  defaultQuestion: AssessmentQuestion
): { isValid: boolean; data: AssessmentQuestion } => {
  if (!question || typeof question !== 'object') {
    return { isValid: false, data: defaultQuestion };
  }
  const requiredFields = [
    'question',
    'testCases',
    'hints',
    'explanation',
    'difficulty'
  ];
  const isValid = requiredFields.every(field => {
    if (field === 'testCases') {
      return Array.isArray(question[field]) && question[field].length > 0 &&
        question[field].every((tc: any) => 
          tc && typeof tc === 'object' && 
          'input' in tc && 'expectedOutput' in tc
        );
    }
    if (field === 'hints') {
      return Array.isArray(question[field]) && question[field].length > 0;
    }
    return field in question && typeof question[field] === 'string' && question[field].trim() !== '';
  });
  if (!isValid) {
    return { isValid: false, data: defaultQuestion };
  }
  return {
    isValid: true,
    data: {
      question: question.question,
      sampleInput: question.sampleInput || '',
      sampleOutput: question.sampleOutput || '',
      testCases: question.testCases,
      hints: question.hints,
      explanation: question.explanation,
      difficulty: question.difficulty,
      timeLimit: question.timeLimit || 30
    }
  };
};
````

## File: src/services/admin.service.ts
````typescript
import { db } from '../config/firebase';
import { 
  collection, 
  query, 
  where, 
  getDocs, 
  addDoc, 
  updateDoc, 
  deleteDoc,
  doc, 
  onSnapshot 
} from 'firebase/firestore';
import type { Resource } from './firebase.service';
export interface AdminUser {
  id: string;
  name: string;
  email: string;
  role: string;
  active: boolean;
  createdAt: Date;
  lastLogin: Date;
}
export interface Analytics {
  totalUsers: number;
  activeCourses: number;
  completionRate: number;
  userGrowth: number;
  popularResources: Array<{
    title: string;
    views: number;
  }>;
}
// User Management
export const getAllUsers = (callback: (users: AdminUser[]) => void) => {
  return onSnapshot(collection(db, 'users'), (snapshot) => {
    const users = snapshot.docs.map(doc => ({
      id: doc.id,
      ...doc.data(),
      createdAt: doc.data().createdAt?.toDate(),
      lastLogin: doc.data().lastLogin?.toDate()
    })) as AdminUser[];
    callback(users);
  });
};
export const updateUserRole = async (userId: string, role: string) => {
  const userRef = doc(db, 'users', userId);
  return updateDoc(userRef, { role });
};
export const grantAdminPrivileges = async (email: string) => {
  const usersRef = collection(db, 'users');
  const q = query(usersRef, where('email', '==', email));
  const querySnapshot = await getDocs(q);
  if (querySnapshot.empty) {
    throw new Error('User not found');
  }
  const userDoc = querySnapshot.docs[0];
  const userRef = doc(db, 'users', userDoc.id);
  await updateDoc(userRef, { 
    role: 'admin',
    updatedAt: new Date()
  });
  return userDoc.id;
};
export const deleteUser = async (userId: string) => {
  const userRef = doc(db, 'users', userId);
  return deleteDoc(userRef);
};
// Content Management
export const getResources = (callback: (resources: Resource[]) => void) => {
  return onSnapshot(collection(db, 'resources'), (snapshot) => {
    const resources = snapshot.docs.map(doc => ({
      id: doc.id,
      ...doc.data()
    })) as Resource[];
    callback(resources);
  });
};
export const addResource = async (resource: Omit<Resource, 'id'>) => {
  return addDoc(collection(db, 'resources'), resource);
};
export const updateResource = async (resourceId: string, data: Partial<Resource>) => {
  const resourceRef = doc(db, 'resources', resourceId);
  return updateDoc(resourceRef, data);
};
export const deleteResource = async (resourceId: string) => {
  const resourceRef = doc(db, 'resources', resourceId);
  return deleteDoc(resourceRef);
};
// Analytics
export const getAnalytics = async (): Promise<Analytics> => {
  // In a real application, you would aggregate this data from various collections
  const usersSnapshot = await getDocs(collection(db, 'users'));
  const coursesSnapshot = await getDocs(collection(db, 'resources'));
  return {
    totalUsers: usersSnapshot.size,
    activeCourses: coursesSnapshot.size,
    completionRate: 78,
    userGrowth: 25,
    popularResources: [
      { title: 'JavaScript Fundamentals', views: 1250 },
      { title: 'React Basics', views: 980 },
      { title: 'Node.js Essentials', views: 750 },
      { title: 'TypeScript Introduction', views: 620 }
    ]
  };
};
````

## File: src/services/ai.service.ts
````typescript
export * from './ai/api';
export * from './ai/types';
export * from './ai/utils';
export * from './ai/defaults';
````

## File: src/services/auth.service.ts
````typescript
import { 
  createUserWithEmailAndPassword, 
  signInWithEmailAndPassword,
  updateProfile,
  signOut as firebaseSignOut
} from 'firebase/auth';
import { doc, setDoc, getDoc, updateDoc } from 'firebase/firestore';
import { auth, db } from '../config/firebase';
import type { UserProfile } from './user.service';
const handleAuthError = (error: any) => {
  let message = 'An error occurred during authentication';
  switch (error.code) {
    case 'auth/network-request-failed':
      message = 'Network error. Please check your internet connection.';
      break;
    case 'auth/email-already-in-use':
      message = 'This email is already registered.';
      break;
    case 'auth/invalid-email':
      message = 'Invalid email address.';
      break;
    case 'auth/operation-not-allowed':
      message = 'Email/password accounts are not enabled.';
      break;
    case 'auth/weak-password':
      message = 'Password should be at least 6 characters.';
      break;
    case 'auth/user-disabled':
      message = 'This account has been disabled.';
      break;
    case 'auth/user-not-found':
    case 'auth/wrong-password':
      message = 'Invalid email or password.';
      break;
    default:
      message = error.message || 'Authentication failed.';
  }
  const enhancedError = new Error(message);
  enhancedError.name = 'AuthError';
  throw enhancedError;
};
export async function makeUserAdmin(userId: string): Promise<void> {
  try {
    const userRef = doc(db, 'users', userId);
    await updateDoc(userRef, {
      role: 'admin',
      updatedAt: new Date()
    });
  } catch (error) {
    handleAuthError(error);
  }
}
export async function signUp(name: string, email: string, password: string): Promise<void> {
  try {
    const userCredential = await createUserWithEmailAndPassword(auth, email, password);
    await updateProfile(userCredential.user, { displayName: name });
    const now = new Date();
    const userProfile: Omit<UserProfile, 'uid'> = {
      name,
      email,
      role: email === 'naik97059@gmail.com' ? 'admin' : 'user',
      preferences: {
        emailNotifications: true,
        pushNotifications: true
      },
      notificationSettings: {
        email: {
          courseUpdates: true,
          progressReports: true,
          newFeatures: true
        },
        push: {
          lessonReminders: true,
          assessmentResults: true,
          achievements: true
        }
      },
      createdAt: now,
      updatedAt: now,
      lastLogin: now
    };
    await setDoc(doc(db, 'users', userCredential.user.uid), userProfile);
  } catch (error) {
    handleAuthError(error);
  }
}
export async function signIn(email: string, password: string) {
  try {
    const userCredential = await signInWithEmailAndPassword(auth, email, password);
    const userRef = doc(db, 'users', userCredential.user.uid);
    const userDoc = await getDoc(userRef);
    const updates: any = {
      lastLogin: new Date(),
      updatedAt: new Date()
    };
    if (email === 'naik97059@gmail.com') {
      updates.role = 'admin';
    }
    if (!userDoc.exists()) {
      await setDoc(userRef, {
        name: userCredential.user.displayName || 'User',
        email: userCredential.user.email,
        role: email === 'naik97059@gmail.com' ? 'admin' : 'user',
        ...updates
      });
    } else {
      await updateDoc(userRef, updates);
    }
    return userCredential;
  } catch (error) {
    handleAuthError(error);
  }
}
export async function signOut() {
  try {
    await firebaseSignOut(auth);
  } catch (error) {
    handleAuthError(error);
  }
}
````

## File: src/services/DatabaseService.ts
````typescript
import { collection, getDocs, query, where } from 'firebase/firestore';
import { db } from '../config/firebase';
export interface UserData {
  id: string;
  email: string;
  name: string;
  role: string;
  createdAt: Date;
  lastLogin: Date;
}
export class DatabaseService {
  static async getUserCount(): Promise<number> {
    try {
      const usersRef = collection(db, 'users');
      const snapshot = await getDocs(usersRef);
      return snapshot.size;
    } catch (error) {
      console.error('Error getting user count:', error);
      throw error;
    }
  }
  static async getActiveUserCount(): Promise<number> {
    try {
      const thirtyDaysAgo = new Date();
      thirtyDaysAgo.setDate(thirtyDaysAgo.getDate() - 30);
      const usersRef = collection(db, 'users');
      const q = query(usersRef, where('lastLogin', '>=', thirtyDaysAgo));
      const snapshot = await getDocs(q);
      return snapshot.size;
    } catch (error) {
      console.error('Error getting active user count:', error);
      throw error;
    }
  }
  static async getUsersByRole(role: string): Promise<UserData[]> {
    try {
      const usersRef = collection(db, 'users');
      const q = query(usersRef, where('role', '==', role));
      const snapshot = await getDocs(q);
      return snapshot.docs.map(doc => ({
        id: doc.id,
        ...doc.data()
      })) as UserData[];
    } catch (error) {
      console.error('Error getting users by role:', error);
      throw error;
    }
  }
  static async getRecentUsers(limit: number = 5): Promise<UserData[]> {
    try {
      const usersRef = collection(db, 'users');
      const snapshot = await getDocs(query(usersRef));
      const users = snapshot.docs.map(doc => ({
        id: doc.id,
        ...doc.data()
      })) as UserData[];
      return users
        .sort((a, b) => b.createdAt.getTime() - a.createdAt.getTime())
        .slice(0, limit);
    } catch (error) {
      console.error('Error getting recent users:', error);
      throw error;
    }
  }
  static async getUserStatistics(): Promise<{
    total: number;
    active: number;
    students: number;
    teachers: number;
  }> {
    try {
      const total = await this.getUserCount();
      const active = await this.getActiveUserCount();
      const students = (await this.getUsersByRole('student')).length;
      const teachers = (await this.getUsersByRole('teacher')).length;
      return {
        total,
        active,
        students,
        teachers
      };
    } catch (error) {
      console.error('Error getting user statistics:', error);
      throw error;
    }
  }
}
````

## File: src/services/firebase.service.ts
````typescript
import { db } from '../config/firebase';
import { 
  collection, 
  addDoc, 
  updateDoc, 
  deleteDoc, 
  doc, 
  getDocs, 
  setDoc,
  getDoc,
  Timestamp
} from 'firebase/firestore';
// Interfaces
export interface Assessment {
  id: string;
  type: string;
  score: number;
  completedAt: Date;
  userId: string;
}
export interface Question {
  id: string;
  text: string;
  options: string[];
  correctAnswer?: string;
}
export interface AssessmentQuestion {
  id: string;
  text: string;
  options: string[];
  correctAnswer: string;
  difficulty: 'easy' | 'medium' | 'hard';
}
export interface Resource {
  id: string;
  title: string;
  description: string;
  url: string;
  type: 'video' | 'article' | 'tutorial' | 'course';
  level: string;
  duration: string;
  tags: string[];
}
export interface AssessmentResult {
  userId: string;
  assessmentId: string;
  score: number;
  answers: Record<string, string>;
  completedAt: Date;
}
// Resource Management
export const addResource = async (resource: Partial<Resource>) => {
  try {
    const docRef = await addDoc(collection(db, 'resources'), resource);
    return { id: docRef.id };
  } catch (error) {
    console.error('Error adding resource:', error);
    throw error;
  }
};
export const updateResource = async (id: string, data: Partial<Resource>) => {
  try {
    const resourceRef = doc(db, 'resources', id);
    await updateDoc(resourceRef, data);
  } catch (error) {
    console.error('Error updating resource:', error);
    throw error;
  }
};
export const deleteResource = async (id: string) => {
  try {
    const resourceRef = doc(db, 'resources', id);
    await deleteDoc(resourceRef);
  } catch (error) {
    console.error('Error deleting resource:', error);
    throw error;
  }
};
// Assessment Management
export const addAssessment = async (assessment: Partial<Assessment>) => {
  try {
    const docRef = await addDoc(collection(db, 'assessments'), {
      ...assessment,
      completedAt: new Date(),
    });
    return { id: docRef.id };
  } catch (error) {
    console.error('Error adding assessment:', error);
    throw error;
  }
};
// User Management
export const createUserDocument = async (userId: string, userData: any) => {
  try {
    const userRef = doc(db, 'users', userId);
    const now = Timestamp.now();
    // Check if the user should be an admin
    const isAdminEmail = userData.email === 'naik97059@gmail.com';
    const role = isAdminEmail ? 'admin' : (userData.role || 'user');
    const userDocData = {
      ...userData,
      role,
      createdAt: now,
      updatedAt: now,
      assessments: [],
      preferences: {}
    };
    await setDoc(userRef, userDocData);
    console.log('User document created/updated:', { userId, role, email: userData.email });
    return { id: userId, ...userDocData };
  } catch (error) {
    console.error('Error creating user document:', error);
    throw error;
  }
};
export const getUserDocument = async (userId: string) => {
  try {
    const userRef = doc(db, 'users', userId);
    const userDoc = await getDoc(userRef);
    if (userDoc.exists()) {
      const userData = userDoc.data();
      // Double-check admin status
      if (userData.email === 'naik97059@gmail.com' && userData.role !== 'admin') {
        // Update to admin if needed
        await setDoc(userRef, { ...userData, role: 'admin', updatedAt: Timestamp.now() }, { merge: true });
        return { ...userData, role: 'admin' };
      }
      return userData;
    }
    return null;
  } catch (error) {
    console.error('Error getting user document:', error);
    throw error;
  }
};
// Mock data functions
export const getUserAssessments = (userId: string, callback: (assessments: Assessment[]) => void) => {
  const mockAssessments: Assessment[] = [
    {
      id: '1',
      type: 'Knowledge Assessment',
      score: 85,
      completedAt: new Date(),
      userId
    },
    {
      id: '2',
      type: 'Skills Assessment',
      score: 92,
      completedAt: new Date(),
      userId
    }
  ];
  callback(mockAssessments);
  return () => {};
};
export const getAssessmentQuestions = async (domain: string): Promise<Question[]> => {
  const mockQuestions: Question[] = [
    {
      id: '1',
      text: 'What is the primary purpose of React hooks?',
      options: [
        'To add state to functional components',
        'To create class components',
        'To style components',
        'To handle routing'
      ],
      correctAnswer: 'To add state to functional components'
    },
    {
      id: '2',
      text: 'What does TypeScript add to JavaScript?',
      options: [
        'Static typing',
        'New runtime features',
        'Database integration',
        'Server-side rendering'
      ],
      correctAnswer: 'Static typing'
    }
  ];
  return mockQuestions;
};
export const getResources = (callback: (resources: Resource[]) => void) => {
  const mockResources: Resource[] = [
    {
      id: '1',
      title: 'Introduction to React',
      description: 'Learn the basics of React development',
      url: 'https://example.com/react-intro',
      type: 'tutorial',
      level: 'beginner',
      duration: '2 hours',
      tags: ['react', 'frontend', 'beginner']
    },
    {
      id: '2',
      title: 'TypeScript Best Practices',
      description: 'Master TypeScript development',
      url: 'https://example.com/typescript-best-practices',
      type: 'article',
      level: 'intermediate',
      duration: '1 hour',
      tags: ['typescript', 'javascript', 'intermediate']
    }
  ];
  callback(mockResources);
  return () => {};
};
export const saveAssessmentResult = async (userId: string, result: Partial<AssessmentResult>) => {
  try {
    // First check if user document exists
    const userDoc = await getUserDocument(userId);
    if (!userDoc) {
      // Create user document if it doesn't exist
      await createUserDocument(userId, {
        assessments: [],
        createdAt: new Date(),
        updatedAt: new Date()
      });
    }
    // Create assessment result document
    const assessmentRef = await addDoc(collection(db, 'assessmentResults'), {
      ...result,
      userId,
      completedAt: new Date()
    });
    // Update user's assessments array
    const userRef = doc(db, 'users', userId);
    await updateDoc(userRef, {
      assessments: userDoc ? [...(userDoc.assessments || []), assessmentRef.id] : [assessmentRef.id],
      updatedAt: new Date()
    });
    return { id: assessmentRef.id };
  } catch (error) {
    console.error('Error saving assessment result:', error);
    throw error;
  }
};
````

## File: src/services/knowledgeAssessmentService.ts
````typescript
import OpenAI from "openai";
const client = new OpenAI({
  apiKey: import.meta.env.VITE_GLHF_API_KEY,
  baseURL: "https://glhf.chat/api/openai/v1",
  dangerouslyAllowBrowser: true, // Required for browser usage
});
export interface Question {
  id: string;
  text: string;
  options: string[];
  correctAnswer: string;
  explanation: string;
}
export interface AssessmentResult {
  score: number;
  totalQuestions: number;
  correctAnswers: number;
  incorrectAnswers: number;
  feedback: string;
  strengths: string[];
  weaknesses: string[];
}
// API response types
interface AICompletionResponse {
  choices?: Array<{
    text?: string;
    message?: {
      content: string;
    };
  }>;
  generated_text?: string;
}
// API error types
interface APIError extends Error {
  status?: number;
  code?: string;
}
// Retry configuration
const MAX_RETRIES = 3;
const RETRY_DELAY = 1000; // 1 second
const delay = (ms: number) => new Promise(resolve => setTimeout(resolve, ms));
const generateSystemPrompt = (domain: string): string => {
  return `You are an expert assessment generator for ${domain}. Generate 5 high-quality multiple-choice questions that test understanding of key concepts in ${domain}.
Requirements for each question:
1. Test conceptual understanding rather than just factual recall
2. Include 4 options labeled as A), B), C), D)
3. Have exactly one correct answer
4. Ensure distractors (wrong options) are plausible but clearly incorrect
5. Cover different aspects or subtopics within ${domain}
6. Use clear, unambiguous language
Format each question as a JSON object with:
- "text": Clear question statement
- "options": Array of 4 options starting with A), B), C), D)
- "correctAnswer": Single letter A/B/C/D
- "explanation": Brief explanation of the correct answer
Return an array of 5 such questions in valid JSON format.`;
};
export const generateQuestions = async (domain: string): Promise<Question[]> => {
  let retries = 0;
  while (retries < MAX_RETRIES) {
    try {
      const response = await fetch("https://glhf.chat/api/openai/v1/completions", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          Authorization: `Bearer ${import.meta.env.VITE_GLHF_API_KEY}`,
        },
        body: JSON.stringify({
          model: "hf:xingyaoww/Qwen2.5-Coder-32B-Instruct-AWQ-128k",
          prompt: generateSystemPrompt(domain),
          temperature: 0.7,
          max_tokens: 2000,
          stream: false,
        }),
      });
      if (!response.ok) {
        const errorData = await response.json().catch(() => ({ message: "Unknown error" }));
        throw Object.assign(new Error(errorData.message || `API error: ${response.status}`), {
          status: response.status,
          code: errorData.code,
        });
      }
      const data: AICompletionResponse = await response.json();
      // Extract content from various possible response formats
      const aiResponse = data.choices?.[0]?.text || 
                        data.choices?.[0]?.message?.content ||
                        data.generated_text;
      if (!aiResponse) {
        throw new Error("No response content from AI");
      }
      // Extract JSON array from response
      const jsonMatch = aiResponse.match(/\[\s*\{[\s\S]*\}\s*\]/);
      if (!jsonMatch) {
        throw new Error("Could not find valid JSON array in response");
      }
      const cleanedResponse = jsonMatch[0]
        .replace(/\\n/g, "")
        .replace(/\\"/g, '"')
        .replace(/\\\\/g, '\\')
        .trim();
      const parsedQuestions = JSON.parse(cleanedResponse);
      if (!Array.isArray(parsedQuestions)) {
        throw new Error("Parsed AI response is not an array");
      }
      // Validate and transform questions
      return parsedQuestions.map((q, index) => {
        // Validate question structure
        if (!q || typeof q !== 'object') {
          throw new Error(`Invalid question object at index ${index}`);
        }
        // Validate required fields
        if (!q.text || !q.options || !q.correctAnswer) {
          throw new Error(`Missing required fields in question ${index + 1}`);
        }
        // Validate options
        if (!Array.isArray(q.options) || q.options.length !== 4) {
          throw new Error(`Question ${index + 1} must have exactly 4 options`);
        }
        // Clean and validate options format
        const cleanOptions = q.options.map((opt: string, optIndex: number) => {
          const option = opt.trim();
          const prefix = String.fromCharCode(65 + optIndex) + ')';
          if (!option.startsWith(prefix)) {
            return `${prefix} ${option}`;
          }
          return option;
        });
        // Validate correct answer
        if (!['A', 'B', 'C', 'D'].includes(q.correctAnswer)) {
          throw new Error(`Invalid correct answer "${q.correctAnswer}" for question ${index + 1}`);
        }
        return {
          id: `q${index + 1}`,
          text: q.text.trim(),
          options: cleanOptions,
          correctAnswer: q.correctAnswer,
          explanation: q.explanation || '',
        };
      });
    } catch (error) {
      console.error(`Attempt ${retries + 1} failed:, error`);
      if (retries === MAX_RETRIES - 1) {
        throw error instanceof Error ? error : new Error(String(error));
      }
      // Exponential backoff
      await delay(RETRY_DELAY * Math.pow(2, retries));
      retries++;
    }
  }
  throw new Error("Max retries exceeded");
};
export const evaluateAnswers = (
  questions: Question[],
  userAnswers: Record<string, string>
): AssessmentResult => {
  let correctAnswers = 0;
  const strengths: string[] = [];
  const weaknesses: string[] = [];
  questions.forEach((question) => {
    const userAnswer = userAnswers[question.id];
    if (userAnswer === question.correctAnswer) {
      correctAnswers++;
      strengths.push(question.text);
    } else {
      weaknesses.push(question.text);
    }
  });
  const score = (correctAnswers / questions.length) * 100;
  const incorrectAnswers = questions.length - correctAnswers;
  let feedback = "";
  if (score >= 90) {
    feedback = "Excellent! You have a strong understanding of this domain.";
  } else if (score >= 70) {
    feedback = "Good job! You have a solid grasp of the basics with room for improvement.";
  } else if (score >= 50) {
    feedback = "You're on the right track, but there's room for improvement.";
  } else {
    feedback = "Consider reviewing the fundamentals of this domain.";
  }
  return {
    score,
    totalQuestions: questions.length,
    correctAnswers,
    incorrectAnswers,
    feedback,
    strengths,
    weaknesses,
  };
};
````

## File: src/services/learningPathService.ts
````typescript
import axios from 'axios';
export interface LearningStep {
  id: string;
  title: string;
  description: string;
  difficulty: 'beginner' | 'intermediate' | 'advanced';
  duration: string;
  modules: string[];
  prerequisites: string[];
  learningOutcomes: string[];
  relevanceScore?: number;
}
export interface LearningProfile {
  completedCourses: string[];
  interests: string[];
  currentSkillLevel: string;
  preferredLearningStyle: string;
  learningGoals: string[];
}
const calculateRelevanceScore = (step: Partial<LearningStep>, profile: LearningProfile): number => {
  let score = 0;
  const weights = {
    skillLevel: 0.3,
    interests: 0.25,
    goals: 0.25,
    prerequisites: 0.2
  };
  // Skill level alignment
  const skillLevels = ['beginner', 'intermediate', 'advanced'];
  const profileSkillIndex = skillLevels.indexOf(profile.currentSkillLevel.toLowerCase());
  const stepSkillIndex = skillLevels.indexOf(step.difficulty || '');
  if (profileSkillIndex !== -1 && stepSkillIndex !== -1) {
    const skillDiff = Math.abs(profileSkillIndex - stepSkillIndex);
    score += weights.skillLevel * (1 - skillDiff * 0.3);
  }
  // Interest alignment
  const interestScore = profile.interests.reduce((acc, interest) => {
    const matchesTitle = (step.title || '').toLowerCase().includes(interest.toLowerCase());
    const matchesDescription = (step.description || '').toLowerCase().includes(interest.toLowerCase());
    return acc + (matchesTitle ? 0.6 : 0) + (matchesDescription ? 0.4 : 0);
  }, 0) / Math.max(1, profile.interests.length);
  score += weights.interests * interestScore;
  // Learning goals alignment
  const goalScore = profile.learningGoals.reduce((acc, goal) => {
    const matchesOutcomes = step.learningOutcomes?.some(outcome => 
      outcome.toLowerCase().includes(goal.toLowerCase())
    ) || false;
    const matchesDescription = (step.description || '').toLowerCase().includes(goal.toLowerCase());
    return acc + (matchesOutcomes ? 0.7 : 0) + (matchesDescription ? 0.3 : 0);
  }, 0) / Math.max(1, profile.learningGoals.length);
  score += weights.goals * goalScore;
  // Prerequisites completion
  if (step.prerequisites && step.prerequisites.length > 0) {
    const completedPrereqs = step.prerequisites.filter(prereq =>
      profile.completedCourses.some(course => 
        course.toLowerCase().includes(prereq.toLowerCase())
      )
    ).length;
    score += weights.prerequisites * (completedPrereqs / step.prerequisites.length);
  } else {
    score += weights.prerequisites;
  }
  return Math.min(10, Math.max(0, score * 10));
};
const parseAIResponse = (response: string): LearningStep[] => {
  try {
    const steps: LearningStep[] = [];
    const sections = response.split(/Step \d+:/i).filter(Boolean);
    sections.forEach((section, index) => {
      const titleMatch = section.match(/Title:\s*([^\n]+)/);
      const descriptionMatch = section.match(/Description:\s*([^\n]+)/);
      const difficultyMatch = section.match(/Difficulty:\s*(beginner|intermediate|advanced)/i);
      const durationMatch = section.match(/Duration:\s*([^\n]+)/);
      const modulesMatch = section.match(/Key Modules:\s*([\s\S]*?)(?=Prerequisites:|Learning Outcomes:|$)/);
      const prerequisitesMatch = section.match(/Prerequisites:\s*([\s\S]*?)(?=Learning Outcomes:|$)/);
      const outcomesMatch = section.match(/Learning Outcomes:\s*([\s\S]*?)(?=$)/);
      if (titleMatch) {
        const step: LearningStep = {
          id: `step-${index + 1}`,
          title: titleMatch[1].trim(),
          description: descriptionMatch ? descriptionMatch[1].trim() : '',
          difficulty: (difficultyMatch ? difficultyMatch[1].toLowerCase() : 'beginner') as 'beginner' | 'intermediate' | 'advanced',
          duration: durationMatch ? durationMatch[1].trim() : '2-3 weeks',
          modules: modulesMatch 
            ? modulesMatch[1].split('\n').map(m => m.replace(/^-\s*/, '').trim()).filter(Boolean)
            : [],
          prerequisites: prerequisitesMatch
            ? prerequisitesMatch[1].split('\n').map(p => p.replace(/^-\s*/, '').trim()).filter(Boolean)
            : [],
          learningOutcomes: outcomesMatch
            ? outcomesMatch[1].split('\n').map(o => o.replace(/^-\s*/, '').trim()).filter(Boolean)
            : []
        };
        steps.push(step);
      }
    });
    return steps;
  } catch (error) {
    console.error('Error parsing AI response:', error);
    return [];
  }
};
export const generateLearningPath = async (profile: LearningProfile): Promise<LearningStep[]> => {
  try {
    const API_ENDPOINT = 'https://glhf.chat/api/openai/v1';
    const prompt = `
      Generate a personalized learning path for a student with the following profile:
      - Current Skill Level: ${profile.currentSkillLevel}
      - Learning Style: ${profile.preferredLearningStyle}
      - Interests: ${profile.interests.join(', ')}
      - Learning Goals: ${profile.learningGoals.join(', ')}
      - Completed Courses: ${profile.completedCourses.join(', ')}
      Create a detailed, step-by-step learning path that:
      1. Matches their current skill level and gradually progresses
      2. Aligns with their preferred learning style (${profile.preferredLearningStyle})
      3. Incorporates their specific interests and goals
      4. Builds upon their completed courses
      5. Includes practical exercises and assessments
      6. Provides clear learning outcomes for each step
      Format each step as follows:
      Step [number]:
      Title: [concise title]
      Description: [detailed description]
      Difficulty: [beginner/intermediate/advanced]
      Duration: [estimated time]
      Key Modules:
      - [module 1]
      - [module 2]
      Prerequisites:
      - [prerequisite 1]
      - [prerequisite 2]
      Learning Outcomes:
      - [outcome 1]
      - [outcome 2]
    `;
    const response = await axios.post(API_ENDPOINT, {
      model: 'Qwen2.5-Coder-32B-Instruct-AWQ-128k',
      messages: [
        {
          role: 'system',
          content: 'You are an expert educational AI that creates personalized learning paths.'
        },
        {
          role: 'user',
          content: prompt
        }
      ],
      temperature: 0.7,
      max_tokens: 2000
    }, {
      headers: {
        'Authorization': `Bearer ${process.env.REACT_APP_API_KEY}`,
        'Content-Type': 'application/json'
      }
    });
    let steps = parseAIResponse(response.data.choices[0].message.content);
    // Calculate relevance scores for each step
    steps = steps.map(step => ({
      ...step,
      relevanceScore: calculateRelevanceScore(step, profile)
    }));
    // Ensure step diversity and optimize order
    steps = ensureStepDiversity(steps);
    steps = optimizeStepOrder(steps, profile);
    return steps;
  } catch (error) {
    console.error('Error generating learning path:', error);
    throw new Error('Failed to generate learning path. Please try again.');
  }
};
// Helper function to ensure step diversity
const ensureStepDiversity = (steps: LearningStep[]): LearningStep[] => {
  const uniqueSteps: LearningStep[] = [];
  const titleSimilarityThreshold = 0.6;
  const descSimilarityThreshold = 0.7;
  for (const step of steps) {
    const isDuplicate = uniqueSteps.some(existingStep => {
      const titleSimilarity = calculateStringSimilarity(step.title, existingStep.title);
      const descSimilarity = calculateStringSimilarity(step.description, existingStep.description);
      return titleSimilarity > titleSimilarityThreshold || descSimilarity > descSimilarityThreshold;
    });
    if (!isDuplicate) {
      uniqueSteps.push(step);
    }
  }
  return uniqueSteps;
};
// Helper function to calculate string similarity (Levenshtein distance based)
const calculateStringSimilarity = (str1: string, str2: string): number => {
  const longer = str1.length > str2.length ? str1 : str2;
  const shorter = str1.length > str2.length ? str2 : str1;
  if (longer.length === 0) return 1.0;
  const editDistance = levenshteinDistance(longer.toLowerCase(), shorter.toLowerCase());
  return (longer.length - editDistance) / longer.length;
};
// Levenshtein distance calculation
const levenshteinDistance = (str1: string, str2: string): number => {
  const matrix: number[][] = [];
  for (let i = 0; i <= str1.length; i++) {
    matrix[i] = [i];
  }
  for (let j = 0; j <= str2.length; j++) {
    matrix[0][j] = j;
  }
  for (let i = 1; i <= str1.length; i++) {
    for (let j = 1; j <= str2.length; j++) {
      if (str1[i-1] === str2[j-1]) {
        matrix[i][j] = matrix[i-1][j-1];
      } else {
        matrix[i][j] = Math.min(
          matrix[i-1][j-1] + 1,  // substitution
          matrix[i][j-1] + 1,    // insertion
          matrix[i-1][j] + 1     // deletion
        );
      }
    }
  }
  return matrix[str1.length][str2.length];
};
// Optimize step order based on progression logic and relevance
const optimizeStepOrder = (steps: LearningStep[], profile: LearningProfile): LearningStep[] => {
  const skillLevels = ['beginner', 'intermediate', 'advanced'];
  const currentLevelIndex = skillLevels.indexOf(profile.currentSkillLevel.toLowerCase());
  return steps.sort((a, b) => {
    // First, consider the difficulty progression
    const aDifficultyIndex = skillLevels.indexOf(a.difficulty);
    const bDifficultyIndex = skillLevels.indexOf(b.difficulty);
    // Ensure proper difficulty progression based on current level
    const aDifficultyScore = Math.abs(aDifficultyIndex - currentLevelIndex);
    const bDifficultyScore = Math.abs(bDifficultyIndex - currentLevelIndex);
    if (aDifficultyScore !== bDifficultyScore) {
      return aDifficultyScore - bDifficultyScore;
    }
    // If difficulty is the same, consider relevance score
    return (b.relevanceScore || 0) - (a.relevanceScore || 0);
  });
};
````

## File: src/services/profile.service.ts
````typescript
import { doc, getDoc, updateDoc } from 'firebase/firestore';
import { db } from '../config/firebase';
export interface ProfileData {
  strengths: string[];
  weaknesses: string[];
  learningStyle: 'visual' | 'auditory' | 'reading' | 'kinesthetic' | '';
  setupCompleted?: boolean;
}
export const getProfileData = async (userId: string): Promise<ProfileData | null> => {
  try {
    const userRef = doc(db, 'users', userId);
    const userDoc = await getDoc(userRef);
    if (userDoc.exists()) {
      const data = userDoc.data();
      return {
        strengths: data.strengths || [],
        weaknesses: data.weaknesses || [],
        learningStyle: data.learningStyle || '',
        setupCompleted: data.setupCompleted
      };
    }
    return null;
  } catch (error) {
    console.error('Error fetching profile data:', error);
    throw error;
  }
};
export const updateProfileData = async (userId: string, data: Partial<ProfileData>): Promise<void> => {
  try {
    const userRef = doc(db, 'users', userId);
    await updateDoc(userRef, {
      ...data,
      updatedAt: new Date()
    });
  } catch (error) {
    console.error('Error updating profile data:', error);
    throw error;
  }
};
````

## File: src/services/questionService.ts
````typescript
import axios, { AxiosError } from 'axios';
import { saveAssessmentResult } from './firebase.service';
import { getAuth } from 'firebase/auth';
// API Configuration
const BASE_URL = 'https://glhf.chat/api/openai/v1';
const GLHF_API_KEY = import.meta.env.VITE_GLHF_API_KEY;
// Timeout and retry configuration
const INITIAL_TIMEOUT = 15000;  // Increased initial timeout to 15 seconds
const MAX_TIMEOUT = 45000;     // Increased max timeout to 45 seconds
const MAX_RETRIES = 4;         // Increased max retries
const RETRY_DELAY = 1000;      // Base delay of 1 second
// API Response types
interface APIResponse {
  status: number;
  data?: any;
  message: string;
}
// Create axios instance with default config
const axiosInstance = axios.create({
  baseURL: BASE_URL,
  timeout: INITIAL_TIMEOUT,
  headers: {
    'Content-Type': 'application/json',
    'Authorization': `Bearer ${GLHF_API_KEY}`
  },
  validateStatus: (status) => status < 500 // Only treat 500+ as errors
});
// Utility function for delay with exponential backoff
const delay = (ms: number) => new Promise(resolve => setTimeout(resolve, ms));
// Enhanced error handling for API requests
async function makeAPIRequest(endpoint: string, data: any, retryCount = 0): Promise<APIResponse> {
  const currentTimeout = Math.min(INITIAL_TIMEOUT * Math.pow(1.5, retryCount), MAX_TIMEOUT);
  try {
    console.log(`Attempt ${retryCount + 1}/${MAX_RETRIES + 1}, timeout: ${currentTimeout}ms`);
    const response = await axiosInstance({
      method: 'POST',
      url: endpoint,
      data,
      timeout: currentTimeout
    });
    // Handle rate limiting with automatic retry
    if (response.status === 429) {
      if (retryCount < MAX_RETRIES) {
        const retryAfter = parseInt(response.headers['retry-after']) * 1000 || RETRY_DELAY * Math.pow(2, retryCount);
        console.log(`Rate limited, retrying after ${retryAfter}ms...`);
        await delay(retryAfter);
        return makeAPIRequest(endpoint, data, retryCount + 1);
      }
      throw new Error('Rate limit exceeded. Please try again later.');
    }
    // Handle successful response
    if (response.status === 200) {
      return {
        status: response.status,
        data: response.data,
        message: 'Success'
      };
    }
    // Handle other client errors
    throw new Error(response.data?.error?.message || `Request failed with status ${response.status}`);
  } catch (error) {
    if (axios.isAxiosError(error)) {
      const axiosError = error as AxiosError;
      // Handle various error scenarios
      if (axiosError.code === 'ECONNABORTED' || axiosError.message.includes('timeout')) {
        if (retryCount < MAX_RETRIES) {
          console.log(`Request timed out after ${currentTimeout}ms, retrying...`);
          await delay(RETRY_DELAY * Math.pow(1.5, retryCount));
          return makeAPIRequest(endpoint, data, retryCount + 1);
        }
        throw new Error('Request timed out. The server is taking too long to respond.');
      }
      if (axiosError.code === 'ERR_NETWORK') {
        if (retryCount < MAX_RETRIES) {
          console.log('Network error, retrying...');
          await delay(RETRY_DELAY * Math.pow(1.5, retryCount));
          return makeAPIRequest(endpoint, data, retryCount + 1);
        }
        throw new Error('Network error. Please check your internet connection.');
      }
      // Handle specific HTTP errors
      if (axiosError.response) {
        const status = axiosError.response.status;
        switch (status) {
          case 401:
            throw new Error('Authentication failed. Please check your API key.');
          case 403:
            throw new Error('Access denied. Please check your permissions.');
          case 400:
            throw new Error('Invalid request. Please check your input parameters.');
          case 404:
            throw new Error('API endpoint not found. Please check the service URL.');
          case 500:
          case 502:
          case 503:
          case 504:
            if (retryCount < MAX_RETRIES) {
              console.log(`Server error (${status}), retrying...`);
              await delay(RETRY_DELAY * Math.pow(2, retryCount));
              return makeAPIRequest(endpoint, data, retryCount + 1);
            }
            throw new Error('Server error. Please try again later.');
          default:
            throw new Error(`Request failed with status ${status}`);
        }
      }
    }
    throw new Error('An unexpected error occurred. Please try again.');
  }
}
// Validate required environment variables
if (!GLHF_API_KEY) {
  throw new Error('VITE_GLHF_API_KEY is not set in environment variables');
}
export interface Question {
  id: string;
  question: string;
  expectedOutput: string;
  difficulty: string;
  category: string;
  hints?: string[];
}
export interface SubmissionResult {
  correct: boolean;
  score: number;
  feedback: string;
}
export async function generateQuestion(language: string, skillLevel: string, focusAreas: string[]): Promise<Question> {
  try {
    console.log('Generating question with params:', { language, skillLevel, focusAreas });
    const systemPrompt = `You are a coding instructor. Generate a programming question based on these parameters:
Language: ${language}
Skill Level: ${skillLevel}
Focus Areas: ${focusAreas.join(', ')}
Return ONLY a JSON object with these exact fields:
{
  "question": "A clear problem statement",
  "expectedOutput": "What the solution should produce",
  "difficulty": "${skillLevel}",
  "category": "One of: ${focusAreas.join(', ')}",
  "hints": ["2-3 helpful hints"]
}`;
    const payload = {
      model: "hf:xingyaoww/Qwen2.5-Coder-32B-Instruct-AWQ-128k",
      messages: [
        {
          role: "system",
          content: systemPrompt
        }
      ],
      temperature: 0.7,
      max_tokens: 800,
      presence_penalty: 0.1,
      frequency_penalty: 0.1
    };
    const response = await makeAPIRequest('/chat/completions', payload);
    if (!response?.data?.choices?.[0]?.message?.content) {
      throw new Error('Invalid response format from AI service');
    }
    const content = response.data.choices[0].message.content.trim();
    let parsedQuestion: Question;
    try {
      parsedQuestion = JSON.parse(content);
    } catch (parseError) {
      console.error('Failed to parse AI response:', content);
      throw new Error('Failed to parse question format from AI service');
    }
    // Validate required fields
    const requiredFields = ['question', 'expectedOutput', 'difficulty', 'category'];
    for (const field of requiredFields) {
      if (!parsedQuestion[field]) {
        throw new Error(`Missing required field in AI response: ${field}`);
      }
    }
    // Clean and validate the question data
    return {
      id: Date.now().toString(),
      question: parsedQuestion.question.trim(),
      expectedOutput: parsedQuestion.expectedOutput.trim(),
      difficulty: parsedQuestion.difficulty.toLowerCase(),
      category: parsedQuestion.category.trim(),
      hints: Array.isArray(parsedQuestion.hints) ? parsedQuestion.hints.map(h => h.trim()) : []
    };
  } catch (error) {
    console.error('Question generation error:', error);
    throw error instanceof Error ? error : new Error('Failed to generate question');
  }
}
export async function checkAnswer(question: Question, userCode: string, language: string): Promise<SubmissionResult> {
  try {
    const systemPrompt = `Evaluate this code submission:
Question:
${question.question}
Expected Output:
${question.expectedOutput}
User's Code:
${userCode}
Return ONLY a JSON object with these exact fields:
{
  "correct": true/false,
  "score": number between 0-10,
  "feedback": "Detailed explanation of the evaluation"
}`;
    const payload = {
      model: "hf:xingyaoww/Qwen2.5-Coder-32B-Instruct-AWQ-128k",
      messages: [
        {
          role: "system",
          content: systemPrompt
        },
        {
          role: "user",
          content: "Evaluate this submission"
        }
      ],
      temperature: 0.3,
      max_tokens: 1000
    };
    const data = await makeAPIRequest('/chat/completions', payload);
    if (!data?.data?.choices?.[0]?.message?.content) {
      throw new Error('Invalid API response format');
    }
    const content = data.data.choices[0].message.content.trim();
    return JSON.parse(content);
  } catch (error: any) {
    console.error('Answer checking error:', error);
    if (error.message.includes('INTERNAL_ERROR') || error.message.includes('stream error')) {
      throw new Error('The AI service is temporarily unavailable. Please try again in a few moments.');
    }
    throw error;
  }
}
// Function to save score to database
export async function saveScore(userId: string, questionId: string, score: number, language: string) {
  try {
    const result = {
      questionId,
      score,
      language,
      completedAt: new Date(),
      answers: {},  // We'll add this for compatibility with our AssessmentResult type
      assessmentId: questionId // Using questionId as assessmentId for now
    };
    // Save to Firebase using our service
    await saveAssessmentResult(userId, result);
    console.log('Score saved successfully:', {
      userId,
      questionId,
      score,
      language,
      timestamp: new Date().toISOString()
    });
  } catch (error) {
    console.error('Error saving score:', error);
    throw new Error('Failed to save score. Please try again.');
  }
}
````

## File: src/services/skillAssessmentService.ts
````typescript
import axios, { AxiosError, AxiosRequestConfig } from 'axios';
interface SkillAssessmentResult {
  overallScore: number;
  strengths: string[];
  weaknesses: string[];
  recommendations: string[];
  detailedAnalysis: {
    codeQuality?: {
      score: number;
      feedback: string[];
    };
    bestPractices?: {
      score: number;
      feedback: string[];
    };
    performance?: {
      score: number;
      feedback: string[];
    };
    security?: {
      score: number;
      feedback: string[];
    };
  };
  skillLevel: {
    current: string;
    next: string;
    requirements: string[];
  };
}
interface ImprovedCodeResponse {
  improvedCode: string;
  changes: string[];
  explanation: string;
}
interface SkillAssessmentInput {
  code: string;
  language: string;
  skillLevel: string;
  focusAreas: string[];
}
const GLHF_API_KEY = import.meta.env.VITE_GLHF_API_KEY;
const BASE_URL = 'https://glhf.chat/api/openai/v1';
const INITIAL_TIMEOUT = 15000;  // 15 seconds
const MAX_TIMEOUT = 45000;     // 45 seconds
const MAX_RETRIES = 4;
const RETRY_DELAY = 1000;      // 1 second
const axiosInstance = axios.create({
  baseURL: BASE_URL,
  timeout: INITIAL_TIMEOUT,
  headers: {
    'Content-Type': 'application/json',
    'Authorization': `Bearer ${GLHF_API_KEY}`
  },
  validateStatus: (status) => status < 500 // Only treat 500+ as errors
});
const delay = (ms: number) => new Promise(resolve => setTimeout(resolve, ms));
interface APIRequestConfig extends AxiosRequestConfig {
  retryCount?: number;
  maxRetries?: number;
  retryDelay?: number;
}
async function makeAPIRequest(endpoint: string, payload: any, config: APIRequestConfig = {}): Promise<any> {
  const retryCount = config.retryCount || 0;
  const maxRetries = config.maxRetries || MAX_RETRIES;
  const retryDelay = config.retryDelay || RETRY_DELAY;
  const currentTimeout = Math.min(INITIAL_TIMEOUT * Math.pow(1.5, retryCount), MAX_TIMEOUT);
  try {
    console.log(`Making API request (attempt ${retryCount + 1}/${maxRetries + 1})`);
    const response = await axiosInstance({
      method: 'POST',
      url: endpoint,
      data: payload,
      timeout: currentTimeout,
      ...config
    });
    // Handle rate limiting
    if (response.status === 429) {
      if (retryCount < maxRetries) {
        const retryAfter = parseInt(response.headers['retry-after']) * 1000 || retryDelay * Math.pow(2, retryCount);
        console.log(`Rate limited, retrying after ${retryAfter}ms...`);
        await delay(retryAfter);
        return makeAPIRequest(endpoint, payload, { ...config, retryCount: retryCount + 1 });
      }
      throw new Error('Rate limit exceeded. Please try again later.');
    }
    // Handle successful response
    if (response.status === 200) {
      return response.data;
    }
    throw new Error(response.data?.error?.message || `Request failed with status ${response.status}`);
  } catch (error) {
    if (axios.isAxiosError(error)) {
      const axiosError = error as AxiosError;
      // Handle timeouts
      if (axiosError.code === 'ECONNABORTED' || axiosError.message.includes('timeout')) {
        if (retryCount < maxRetries) {
          console.log(`Request timed out after ${currentTimeout}ms, retrying...`);
          await delay(retryDelay * Math.pow(1.5, retryCount));
          return makeAPIRequest(endpoint, payload, { ...config, retryCount: retryCount + 1 });
        }
        throw new Error('The server is taking too long to respond. Please try again later.');
      }
      // Handle network errors
      if (axiosError.code === 'ERR_NETWORK') {
        if (retryCount < maxRetries) {
          console.log('Network error, retrying...');
          await delay(retryDelay * Math.pow(1.5, retryCount));
          return makeAPIRequest(endpoint, payload, { ...config, retryCount: retryCount + 1 });
        }
        throw new Error('Unable to connect to the server. Please check your internet connection.');
      }
      // Handle HTTP errors
      if (axiosError.response) {
        const status = axiosError.response.status;
        switch (status) {
          case 401:
            throw new Error('Authentication failed. Please check your API key.');
          case 403:
            throw new Error('Access denied. Please check your permissions.');
          case 400:
            throw new Error('Invalid request. Please check your input parameters.');
          case 404:
            throw new Error('API endpoint not found. Please check the service URL.');
          case 500:
          case 502:
          case 503:
          case 504:
            if (retryCount < maxRetries) {
              console.log(`Server error (${status}), retrying...`);
              await delay(retryDelay * Math.pow(2, retryCount));
              return makeAPIRequest(endpoint, payload, { ...config, retryCount: retryCount + 1 });
            }
            throw new Error('The server is experiencing issues. Please try again later.');
          default:
            throw new Error(`Request failed with status ${status}`);
        }
      }
    }
    throw new Error('An unexpected error occurred. Please try again.');
  }
}
export async function analyzeCode(
  code: string,
  language: string,
  skillLevel: string,
  focusAreas: string[]
): Promise<SkillAssessmentResult> {
  try {
    console.log('Analyzing code with params:', { language, skillLevel, focusAreas });
    const systemPrompt = `You are an expert code analyzer. Analyze this code and return a JSON object with comprehensive feedback.
The analysis should focus on: ${focusAreas.join(', ')}.
Current skill level: ${skillLevel}
Return ONLY a JSON object with these exact fields:
{
  "overallScore": number (0-10),
  "strengths": ["list of strengths"],
  "weaknesses": ["list of weaknesses"],
  "recommendations": ["specific improvement suggestions"],
  "detailedAnalysis": {
    "codeQuality": {
      "score": number (0-10),
      "feedback": ["specific feedback points"]
    },
    "bestPractices": {
      "score": number (0-10),
      "feedback": ["specific feedback points"]
    },
    "performance": {
      "score": number (0-10),
      "feedback": ["specific feedback points"]
    },
    "security": {
      "score": number (0-10),
      "feedback": ["specific feedback points"]
    }
  },
  "skillLevel": {
    "current": "assessed current level",
    "next": "next skill level to aim for",
    "requirements": ["specific requirements to reach next level"]
  }
}`;
    const payload = {
      model: "hf:xingyaoww/Qwen2.5-Coder-32B-Instruct-AWQ-128k",
      messages: [
        {
          role: "system",
          content: systemPrompt
        },
        {
          role: "user",
          content: code
        }
      ],
      temperature: 0.3,
      max_tokens: 1500,
      presence_penalty: 0.1,
      frequency_penalty: 0.1
    };
    const data = await makeAPIRequest('/chat/completions', payload, {
      timeout: 30000,
      maxRetries: 3,
      retryDelay: 2000
    });
    if (!data?.choices?.[0]?.message?.content) {
      throw new Error('Invalid response format from AI service');
    }
    const content = data.choices[0].message.content.trim();
    let result: SkillAssessmentResult;
    try {
      result = JSON.parse(content);
    } catch (parseError) {
      console.error('Failed to parse AI response:', content);
      throw new Error('Failed to parse the AI service response');
    }
    // Validate and normalize the result
    return {
      overallScore: Math.max(0, Math.min(10, Number(result.overallScore) || 0)),
      strengths: Array.isArray(result.strengths) ? result.strengths.map(String) : [],
      weaknesses: Array.isArray(result.weaknesses) ? result.weaknesses.map(String) : [],
      recommendations: Array.isArray(result.recommendations) ? result.recommendations.map(String) : [],
      detailedAnalysis: {
        codeQuality: normalizeAnalysis(result.detailedAnalysis?.codeQuality),
        bestPractices: normalizeAnalysis(result.detailedAnalysis?.bestPractices),
        performance: normalizeAnalysis(result.detailedAnalysis?.performance),
        security: normalizeAnalysis(result.detailedAnalysis?.security)
      },
      skillLevel: {
        current: result.skillLevel?.current || skillLevel,
        next: result.skillLevel?.next || getNextLevel(skillLevel),
        requirements: Array.isArray(result.skillLevel?.requirements) 
          ? result.skillLevel.requirements.map(String)
          : []
      }
    };
  } catch (error) {
    console.error('Code analysis error:', error);
    throw error instanceof Error ? error : new Error('Failed to analyze code');
  }
}
function normalizeAnalysis(analysis: any) {
  return {
    score: Math.max(0, Math.min(10, Number(analysis?.score) || 0)),
    feedback: Array.isArray(analysis?.feedback) ? analysis.feedback.map(String) : []
  };
}
function getNextLevel(currentLevel: string): string {
  const levels = ['beginner', 'intermediate', 'advanced', 'expert'];
  const currentIndex = levels.indexOf(currentLevel.toLowerCase());
  return currentIndex >= 0 && currentIndex < levels.length - 1 
    ? levels[currentIndex + 1] 
    : 'expert';
}
export async function generateImprovedCode(
  code: string,
  language: string,
  improvements: string[]
): Promise<ImprovedCodeResponse> {
  console.log('Starting code improvement with:', { language, improvements });
  try {
    // Input validation
    if (!code?.trim()) {
      console.error('Empty code provided');
      throw new Error('Please provide some code to analyze');
    }
    if (!language?.trim()) {
      console.error('No language specified');
      throw new Error('Programming language must be specified');
    }
    if (!improvements?.length) {
      console.error('No improvements specified');
      throw new Error('Please select at least one improvement area');
    }
    // First try with Mixtral API
    try {
      console.log('Attempting Mixtral API...');
      const mixtralResponse = await axios.post(
        'https://iiced-mixtral-46-7b-fastapi.hf.space/generate/',
        {
          inputs: `You are an expert code improver. Improve the following ${language} code based on these improvements: ${improvements.join(', ')}.
Please provide the response in this exact JSON format:
{
  "description": "A brief description of the improvements made",
  "code": "The complete improved code",
  "explanation": "A detailed explanation of what the code does and why the improvements help"
}
Code to improve:
${code}`,
          parameters: {
            temperature: 0.3,
            max_new_tokens: 2000,
            repetition_penalty: 1.1
          }
        },
        {
          timeout: 30000 // 30 second timeout
        }
      );
      console.log('Mixtral API response received');
      if (mixtralResponse.data && mixtralResponse.data.generated_text) {
        const jsonMatch = mixtralResponse.data.generated_text.match(/\{[\s\S]*\}/);
        if (jsonMatch) {
          try {
            const result = JSON.parse(jsonMatch[0]);
            if (result.description && result.code && result.explanation) {
              console.log('Successfully parsed Mixtral response');
              return {
                improvedCode: result.code,
                changes: improvements,
                explanation: result.explanation
              };
            }
          } catch (parseError) {
            console.error('Failed to parse Mixtral response:', parseError);
          }
        }
      }
    } catch (mixtralError) {
      console.error('Mixtral API error:', mixtralError);
    }
    console.log('Falling back to GLHF API...');
    // Fallback to GLHF API
    const systemPrompt = `You are an expert code improver. Your task is to improve the provided code while maintaining its core functionality.
Focus on these specific improvements: ${improvements.join(', ')}.
Respond with a JSON object in this exact format:
{
  "description": "A brief description of the improvements made",
  "code": "The complete improved code with all necessary imports and dependencies",
  "explanation": "A detailed explanation of what the code does and why the improvements help"
}
Important:
1. Keep descriptions clear and concise
2. Include all necessary imports and dependencies in the code
3. Maintain proper code formatting with correct indentation
4. Explain improvements in plain English
5. Focus on readability and best practices
6. Ensure the code is complete and can run immediately`;
    const response = await axios.post(
      `${BASE_URL}/chat/completions`,
      {
        model: "hf:xingyaoww/Qwen2.5-Coder-32B-Instruct-AWQ-128k",
        messages: [
          {
            role: "system",
            content: systemPrompt
          },
          {
            role: "user",
            content: `Please improve this ${language} code:\n\n${code}`
          }
        ],
        temperature: 0.3,
        max_tokens: 2000
      },
      {
        headers: {
          'Authorization': `Bearer ${GLHF_API_KEY}`,
          'Content-Type': 'application/json'
        },
        timeout: 30000 // 30 second timeout
      }
    );
    console.log('GLHF API response received');
    if (!response.data?.choices?.[0]?.message?.content) {
      console.error('Invalid response structure from GLHF API');
      throw new Error('Invalid response from API');
    }
    const content = response.data.choices[0].message.content.trim();
    const jsonMatch = content.match(/\{[\s\S]*\}/);
    if (!jsonMatch) {
      console.error('No JSON found in GLHF response');
      throw new Error('Invalid response format from API');
    }
    try {
      const result = JSON.parse(jsonMatch[0]);
      // Validate the response format
      if (!result.description || !result.code || !result.explanation) {
        console.error('Missing required fields in API response');
        return {
          improvedCode: code,  // Return original code if improvement fails
          changes: improvements,
          explanation: `The code has been analyzed for ${improvements.join(', ')}. 
The core functionality remains the same, with improvements focused on best practices and readability.
Key improvements attempted:
${improvements.map(imp => `- ${imp}`).join('\n')}`
        };
      }
      console.log('Successfully generated improved code');
      return {
        improvedCode: result.code,
        changes: improvements,
        explanation: result.explanation
      };
    } catch (parseError) {
      console.error('Failed to parse GLHF response:', parseError);
      throw new Error('Failed to parse API response');
    }
  } catch (error: any) {
    console.error('Error in generateImprovedCode:', error);
    // Return a graceful fallback response
    return {
      improvedCode: code,  // Return original code if improvement fails
      changes: improvements,
      explanation: `We attempted to improve the code focusing on:
${improvements.map(imp => `- ${imp}`).join('\n')}
However, we encountered an issue during the improvement process: ${error.message}
The original code has been preserved to maintain functionality.
You can try again or modify the code manually based on the suggested improvements.`
    };
  }
}
export async function suggestLearningResources(
  weaknesses: string[],
  language: string,
  skillLevel: string
): Promise<string[]> {
  try {
    const systemPrompt = `Based on these code weaknesses, suggest learning resources.
Return ONLY a JSON array of strings, each containing a specific resource suggestion.
Focus on ${language} at ${skillLevel} level.
Example: ["Specific resource 1", "Specific resource 2"]`;
    const payload = {
      model: "hf:xingyaoww/Qwen2.5-Coder-32B-Instruct-AWQ-128k",
      messages: [
        {
          role: "system",
          content: systemPrompt
        },
        {
          role: "user",
          content: JSON.stringify(weaknesses)
        }
      ],
      temperature: 0.5,
      max_tokens: 1000
    };
    const data = await makeAPIRequest('/chat/completions', payload);
    if (!data?.choices?.[0]?.message?.content) {
      throw new Error('Invalid API response format');
    }
    const content = data.choices[0].message.content.trim();
    console.log('Raw resources content:', content);
    try {
      const resources = JSON.parse(content);
      if (!Array.isArray(resources)) {
        throw new Error('Resources must be an array');
      }
      return resources.map(String);
    } catch (parseError) {
      console.error('Error parsing resources:', parseError);
      return ['Error: Could not generate learning resources. Please try again.'];
    }
  } catch (error: any) {
    console.error('Resource suggestion error:', error);
    return ['Error: Could not fetch learning resources. Please try again.'];
  }
}
````

## File: src/services/user.service.ts
````typescript
import { 
  doc, 
  getDoc, 
  updateDoc,
  arrayUnion,
  DocumentReference,
  serverTimestamp 
} from 'firebase/firestore';
import { auth, db } from '../config/firebase';
export interface UserProfile {
  uid: string;
  name: string;
  email: string;
  bio?: string;
  age?: string;
  grade?: string;
  interests?: string[];
  strengths?: string[];
  learningStyle?: 'visual' | 'auditory' | 'kinesthetic';
  preferences?: {
    emailNotifications: boolean;
    pushNotifications: boolean;
  };
  notificationSettings?: {
    email: {
      courseUpdates: boolean;
      progressReports: boolean;
      newFeatures: boolean;
    };
    push: {
      lessonReminders: boolean;
      assessmentResults: boolean;
      achievements: boolean;
    };
  };
  setupCompleted?: boolean;
  createdAt: Date;
  updatedAt: Date;
  lastLogin: Date;
}
export const getUserProfile = async (uid: string): Promise<UserProfile | null> => {
  try {
    const currentUser = auth.currentUser;
    if (!currentUser || currentUser.uid !== uid) {
      throw new Error('Unauthorized access');
    }
    const userRef = doc(db, 'users', uid);
    const userSnap = await getDoc(userRef);
    if (userSnap.exists()) {
      const data = userSnap.data();
      return {
        ...data,
        createdAt: data.createdAt?.toDate(),
        updatedAt: data.updatedAt?.toDate(),
        lastLogin: data.lastLogin?.toDate(),
      } as UserProfile;
    }
    return null;
  } catch (error) {
    console.error('Error fetching user profile:', error);
    throw error;
  }
};
export const updateUserProfile = async (uid: string, userData: Partial<UserProfile>): Promise<void> => {
  try {
    const currentUser = auth.currentUser;
    if (!currentUser || currentUser.uid !== uid) {
      throw new Error('Unauthorized access');
    }
    await currentUser.getIdToken(true);
    const userRef = doc(db, 'users', uid);
    const updateData: Record<string, any> = {
      updatedAt: serverTimestamp()
    };
    Object.entries(userData).forEach(([key, value]) => {
      if (value !== undefined) {
        updateData[key] = value;
      }
    });
    await updateDoc(userRef, updateData);
  } catch (error: any) {
    console.error('Error updating user profile:', error);
    if (error.code === 'permission-denied') {
      throw new Error('You do not have permission to update this profile');
    }
    throw new Error('Failed to update profile. Please try again.');
  }
};
export const updateUserProgress = async (
  uid: string,
  lessonId: string,
  score: number
): Promise<void> => {
  try {
    const currentUser = auth.currentUser;
    if (!currentUser || currentUser.uid !== uid) {
      throw new Error('Unauthorized access');
    }
    await currentUser.getIdToken(true);
    const userRef: DocumentReference = doc(db, 'users', uid);
    await updateDoc(userRef, {
      'progress.completedLessons': arrayUnion(lessonId),
      [`progress.assessmentScores.${lessonId}`]: score,
      updatedAt: serverTimestamp()
    });
  } catch (error) {
    console.error('Error updating user progress:', error);
    throw error;
  }
};
````

## File: src/services/VectorDBService.ts
````typescript
import { getEmbeddingModel } from '../utils/modelConfig';
import { db } from '../config/firebase';
import { collection, getDocs, query, where, orderBy, limit, addDoc, deleteDoc } from 'firebase/firestore';
interface UserData {
  createdAt: any;
  email: string;
  lastLogin: any;
  name: string;
  notificationSettings: {
    email: {
      courseUpdates: boolean;
      newFeatures: boolean;
      progressReports: boolean;
    };
    push: {
      achievements: boolean;
      assessmentResults: boolean;
      lessonReminders: boolean;
    };
  };
  preferences: {
    emailNotifications: boolean;
    pushNotifications: boolean;
  };
  role: string;
  updatedAt: any;
}
interface UserEmbedding {
  id: string;
  name: string;
  email: string;
  role: string;
  metadata: {
    joinDate: string;
    lastActive: string;
    notifications: {
      email: {
        courseUpdates: boolean;
        newFeatures: boolean;
        progressReports: boolean;
      };
      push: {
        achievements: boolean;
        assessmentResults: boolean;
        lessonReminders: boolean;
      };
    };
    preferences: {
      emailNotifications: boolean;
      pushNotifications: boolean;
    };
  };
  embedding?: number[];
}
interface DomainData {
  description: string;
  name: string;
}
interface AssessmentData {
  completedAt: any;
  createdAt: any;
  improvement: string;
  score: number;
  type: string;
  userId: string;
}
interface AssessmentResultData {
  answers: Record<string, any>;
  assessmentId: string;
  completedAt: any;
  language: string;
  questionId: string;
  score: number;
  userId: string;
}
class VectorDBService {
  private users: any[] = [];
  private static instance: VectorDBService;
  private embeddingModel: any;
  private modelLoading: Promise<void>;
  private constructor() {
    // Initialize model first
    this.modelLoading = this.initializeModel().catch(error => {
      console.error('Failed to initialize model:', error);
      return Promise.reject(error);
    });
    // Only initialize data after model is ready
    this.modelLoading.then(() => {
      return this.initializeData().catch(error => {
        console.error('Failed to initialize data:', error);
      });
    });
  }
  public static getInstance(): VectorDBService {
    if (!VectorDBService.instance) {
      VectorDBService.instance = new VectorDBService();
    }
    return VectorDBService.instance;
  }
  private async initializeModel() {
    try {
      console.log('Starting model initialization...');
      this.embeddingModel = await getEmbeddingModel();
      const testEmbedding = await this.generateEmbedding('test');
      if (!testEmbedding || testEmbedding.length === 0) {
        throw new Error('Model validation failed');
      }
      console.log('Embedding model loaded and validated successfully');
    } catch (error) {
      console.error('Error loading embedding model:', error);
      throw error;
    }
  }
  private async initializeData() {
    try {
      // Wait for model to be ready before initializing data
      await this.modelLoading;
      // Fetch real data from Firestore
      const usersRef = collection(db, 'users');
      const querySnapshot = await getDocs(usersRef);
      const users = querySnapshot.docs.map(doc => {
        const data = doc.data() as UserData;
        return {
          id: doc.id,
          name: data.name || data.email?.split('@')[0] || 'Anonymous',
          email: data.email || 'No email provided',
          role: data.role?.toLowerCase() || 'user',
          metadata: {
            notifications: {
              email: data.notificationSettings?.email || {},
              push: data.notificationSettings?.push || {}
            },
            preferences: data.preferences || {},
            joinDate: data.createdAt ? new Date(data.createdAt.seconds * 1000).toLocaleDateString() : 'Unknown',
            lastActive: data.lastLogin ? new Date(data.lastLogin.seconds * 1000).toLocaleDateString() : 'Never'
          }
        };
      });
      // Generate embeddings for the fetched users
      for (const user of users) {
        const userText = `${user.name} ${user.email} ${user.role}`;
        const embedding = await this.generateEmbedding(userText);
        this.addToIndex(user, embedding);
      }
      console.log('Sample data initialized successfully');
    } catch (error) {
      console.error('Error initializing sample data:', error);
    }
  }
  private async generateEmbedding(text: string): Promise<number[]> {
    try {
      if (!this.embeddingModel) {
        await this.modelLoading;
        if (!this.embeddingModel) {
          throw new Error('Model not initialized');
        }
      }
      console.log('Generating embedding for:', text);
      const result = await this.embeddingModel.__call__(text);
      if (!result || !result.data) {
        throw new Error('Invalid model output');
      }
      // Convert Float32Array to regular array
      const embedding = Array.from(result.data);
      console.log('Generated embedding length:', embedding.length);
      return embedding;
    } catch (error) {
      console.error('Error generating embedding:', error);
      throw error;
    }
  }
  private cosineSimilarity(a: number[], b: number[]): number {
    if (!a || !b || a.length !== b.length) {
      console.warn('Invalid vectors for similarity calculation');
      return 0;
    }
    try {
      let dotProduct = 0;
      let normA = 0;
      let normB = 0;
      for (let i = 0; i < a.length; i++) {
        dotProduct += a[i] * b[i];
        normA += a[i] * a[i];
        normB += b[i] * b[i];
      }
      const similarity = dotProduct / (Math.sqrt(normA) * Math.sqrt(normB));
      return isNaN(similarity) ? 0 : similarity;
    } catch (error) {
      console.error('Error calculating similarity:', error);
      return 0;
    }
  }
  async addUser(user: UserEmbedding): Promise<void> {
    try {
      const text = `${user.name} ${user.email} ${user.role}`;
      const embedding = await this.generateEmbedding(text);
      this.users.push({ ...user, embedding });
    } catch (error) {
      console.error('Error adding user:', error);
      throw error;
    }
  }
  async getUserCount(): Promise<number> {
    return this.users.length;
  }
  async getActiveUsers(daysAgo: number = 30): Promise<number> {
    const date = new Date();
    date.setDate(date.getDate() - daysAgo);
    return this.users.filter(user => 
      new Date(user.metadata.lastActive) >= date
    ).length;
  }
  async getUsersByRole(role: string): Promise<any[]> {
    try {
      const usersRef = collection(db, 'users');
      // Don't filter by role initially, get all users
      const querySnapshot = await getDocs(usersRef);
      console.log('Raw Firestore data:', 
        querySnapshot.docs.map(doc => ({
          id: doc.id,
          ...doc.data()
        }))
      );
      const users = querySnapshot.docs
        .map(doc => {
          const data = doc.data() as UserData;
          return {
            id: doc.id,
            name: data.name || data.email?.split('@')[0] || 'Anonymous',
            email: data.email || 'No email provided',
            role: data.role?.toLowerCase() || 'user',
            metadata: {
              notifications: {
                email: data.notificationSettings?.email || {},
                push: data.notificationSettings?.push || {}
              },
              preferences: data.preferences || {},
              joinDate: data.createdAt ? new Date(data.createdAt.seconds * 1000).toLocaleDateString() : 'Unknown',
              lastActive: data.lastLogin ? new Date(data.lastLogin.seconds * 1000).toLocaleDateString() : 'Never'
            }
          };
        })
        .filter(user => user.role === role.toLowerCase());
      console.log(`Filtered users for role ${role}:`, users);
      return users;
    } catch (error) {
      console.error('Error fetching users by role:', error);
      throw error;
    }
  }
  async getAllUsers(): Promise<any[]> {
    try {
      const usersRef = collection(db, 'users');
      const q = query(usersRef);
      const querySnapshot = await getDocs(q);
      console.log('Raw query snapshot:', querySnapshot);
      console.log('Number of documents:', querySnapshot.size);
      console.log('All users raw data:', 
        querySnapshot.docs.map(doc => ({
          id: doc.id,
          ...doc.data()
        }))
      );
      if (querySnapshot.empty) {
        console.log('No users found in Firestore');
        return [];
      }
      const users = querySnapshot.docs.map(doc => {
        const data = doc.data() as UserData;
        console.log('Processing user document:', { id: doc.id, data });
        return {
          id: doc.id,
          name: data.name || data.email?.split('@')[0] || 'Anonymous',
          email: data.email || 'No email provided',
          role: data.role?.toLowerCase() || 'user',
          metadata: {
            notifications: {
              email: data.notificationSettings?.email || {},
              push: data.notificationSettings?.push || {}
            },
            preferences: data.preferences || {},
            joinDate: data.createdAt ? new Date(data.createdAt.seconds * 1000).toLocaleDateString() : 'Unknown',
            lastActive: data.lastLogin ? new Date(data.lastLogin.seconds * 1000).toLocaleDateString() : 'Never'
          }
        };
      });
      console.log('Processed users:', users);
      return users;
    } catch (error) {
      console.error('Error fetching all users:', error);
      throw error;
    }
  }
  async searchSimilar(query: string, limit: number = 3): Promise<any[]> {
    try {
      // Use the getAllUsers method to get consistent data
      const users = await this.getAllUsers();
      if (query.trim() === '') {
        // If no query, return all users up to limit
        return users.slice(0, limit);
      }
      // Generate embeddings and add to index
      this.users = []; // Clear previous index
      for (const user of users) {
        const userText = `${user.name} ${user.email} ${user.role}`;
        const embedding = await this.generateEmbedding(userText);
        this.addToIndex(user, embedding);
      }
      // Perform similarity search
      const queryEmbedding = await this.generateEmbedding(query);
      return this.searchIndex(queryEmbedding, limit);
    } catch (error) {
      console.error('Error performing similarity search:', error);
      throw error;
    }
  }
  async getUserStatistics(): Promise<any> {
    try {
      const users = await this.getAllUsers();
      console.log('Users for statistics:', users);
      const now = new Date();
      const thirtyDaysAgo = new Date(now.getTime() - 30 * 24 * 60 * 60 * 1000);
      const stats = {
        total: users.length,
        active: users.filter(user => {
          const lastActive = user.metadata.lastActive !== 'Never' 
            ? new Date(user.metadata.lastActive) 
            : null;
          return lastActive && lastActive > thirtyDaysAgo;
        }).length,
        students: users.filter(user => user.role === 'student').length,
        teachers: users.filter(user => user.role === 'teacher').length,
        admins: users.filter(user => user.role === 'admin').length,
        users: users.filter(user => user.role === 'user').length
      };
      console.log('Calculated statistics:', stats);
      return stats;
    } catch (error) {
      console.error('Error getting user statistics:', error);
      throw error;
    }
  }
  async getDomains(): Promise<DomainData[]> {
    try {
      const domainsRef = collection(db, 'domains');
      const querySnapshot = await getDocs(domainsRef);
      console.log('Raw domains data:', 
        querySnapshot.docs.map(doc => ({
          id: doc.id,
          ...doc.data()
        }))
      );
      const domains = querySnapshot.docs.map(doc => {
        const data = doc.data() as DomainData;
        return {
          id: doc.id,
          name: data.name || 'Unnamed Domain',
          description: data.description?.trim() || 'No description available'
        };
      });
      console.log('Processed domains:', domains);
      return domains;
    } catch (error) {
      console.error('Error fetching domains:', error);
      throw error;
    }
  }
  async addDomain(name: string, description: string = ''): Promise<boolean> {
    try {
      const domainsRef = collection(db, 'domains');
      await addDoc(domainsRef, {
        name: name.toLowerCase(),
        description
      });
      return true;
    } catch (error) {
      console.error('Error adding domain:', error);
      return false;
    }
  }
  async deleteDomain(name: string): Promise<boolean> {
    try {
      const domainsRef = collection(db, 'domains');
      const q = query(domainsRef, where('name', '==', name.toLowerCase()));
      const querySnapshot = await getDocs(q);
      if (querySnapshot.empty) {
        return false;
      }
      const deletePromises = querySnapshot.docs.map(doc => deleteDoc(doc.ref));
      await Promise.all(deletePromises);
      return true;
    } catch (error) {
      console.error('Error deleting domain:', error);
      return false;
    }
  }
  async deleteUser(email: string): Promise<boolean> {
    try {
      const usersRef = collection(db, 'users');
      const q = query(usersRef, where('email', '==', email.toLowerCase()));
      const querySnapshot = await getDocs(q);
      if (querySnapshot.empty) {
        return false;
      }
      const deletePromises = querySnapshot.docs.map(doc => deleteDoc(doc.ref));
      await Promise.all(deletePromises);
      return true;
    } catch (error) {
      console.error('Error deleting user:', error);
      return false;
    }
  }
  async getAssessments(userId?: string): Promise<AssessmentData[]> {
    try {
      const assessmentsRef = collection(db, 'assessments');
      let q = assessmentsRef;
      if (userId) {
        q = query(assessmentsRef, where('userId', '==', userId));
      }
      const querySnapshot = await getDocs(q);
      console.log('Raw assessments data:', 
        querySnapshot.docs.map(doc => ({
          id: doc.id,
          ...doc.data()
        }))
      );
      const assessments = querySnapshot.docs.map(doc => {
        const data = doc.data() as AssessmentData;
        return {
          id: doc.id,
          type: data.type || 'Unknown Assessment',
          score: data.score || 0,
          improvement: data.improvement || 'N/A',
          completedAt: data.completedAt ? new Date(data.completedAt.seconds * 1000).toLocaleDateString() : 'Not completed',
          createdAt: data.createdAt ? new Date(data.createdAt.seconds * 1000).toLocaleDateString() : 'Unknown',
          userId: data.userId
        };
      });
      console.log('Processed assessments:', assessments);
      return assessments;
    } catch (error) {
      console.error('Error fetching assessments:', error);
      throw error;
    }
  }
  async getAssessmentStatistics(): Promise<any> {
    try {
      const assessments = await this.getAssessments();
      const stats = {
        total: assessments.length,
        completed: assessments.filter(a => a.completedAt !== 'Not completed').length,
        averageScore: 0,
        byType: {} as Record<string, { count: number; avgScore: number }>,
        improvements: {
          positive: 0,
          negative: 0,
          noChange: 0
        }
      };
      // Calculate statistics
      assessments.forEach(assessment => {
        // Track by type
        if (!stats.byType[assessment.type]) {
          stats.byType[assessment.type] = { count: 0, avgScore: 0 };
        }
        stats.byType[assessment.type].count++;
        stats.byType[assessment.type].avgScore += assessment.score;
        // Track improvements
        if (assessment.improvement) {
          const improvement = parseFloat(assessment.improvement);
          if (improvement > 0) stats.improvements.positive++;
          else if (improvement < 0) stats.improvements.negative++;
          else stats.improvements.noChange++;
        }
        // Add to average score
        stats.averageScore += assessment.score;
      });
      // Calculate averages
      if (assessments.length > 0) {
        stats.averageScore /= assessments.length;
        Object.keys(stats.byType).forEach(type => {
          stats.byType[type].avgScore /= stats.byType[type].count;
        });
      }
      console.log('Assessment statistics:', stats);
      return stats;
    } catch (error) {
      console.error('Error getting assessment statistics:', error);
      throw error;
    }
  }
  async getUserAssessments(userId: string): Promise<any> {
    try {
      const assessments = await this.getAssessments(userId);
      const stats = {
        total: assessments.length,
        completed: assessments.filter(a => a.completedAt !== 'Not completed').length,
        averageScore: 0,
        latestImprovement: 'N/A',
        assessments: assessments.sort((a, b) => 
          new Date(b.completedAt).getTime() - new Date(a.completedAt).getTime()
        )
      };
      if (assessments.length > 0) {
        stats.averageScore = assessments.reduce((acc, curr) => acc + curr.score, 0) / assessments.length;
        stats.latestImprovement = assessments[0].improvement;
      }
      return stats;
    } catch (error) {
      console.error('Error getting user assessments:', error);
      throw error;
    }
  }
  async getAssessmentResults(userId?: string, assessmentId?: string): Promise<AssessmentResultData[]> {
    try {
      const resultsRef = collection(db, 'assessment_results');
      let q = resultsRef;
      if (userId && assessmentId) {
        q = query(resultsRef, 
          where('userId', '==', userId),
          where('assessmentId', '==', assessmentId)
        );
      } else if (userId) {
        q = query(resultsRef, where('userId', '==', userId));
      } else if (assessmentId) {
        q = query(resultsRef, where('assessmentId', '==', assessmentId));
      }
      const querySnapshot = await getDocs(q);
      console.log('Raw assessment results:', 
        querySnapshot.docs.map(doc => ({
          id: doc.id,
          ...doc.data()
        }))
      );
      const results = querySnapshot.docs.map(doc => {
        const data = doc.data() as AssessmentResultData;
        return {
          id: doc.id,
          assessmentId: data.assessmentId,
          questionId: data.questionId,
          language: data.language || 'unknown',
          score: data.score || 0,
          answers: data.answers || {},
          completedAt: data.completedAt ? new Date(data.completedAt.seconds * 1000).toLocaleDateString() : 'Not completed',
          userId: data.userId
        };
      });
      console.log('Processed assessment results:', results);
      return results;
    } catch (error) {
      console.error('Error fetching assessment results:', error);
      throw error;
    }
  }
  async getUserAssessmentSummary(userId: string): Promise<any> {
    try {
      const results = await this.getAssessmentResults(userId);
      const summary = {
        totalAssessments: results.length,
        totalScore: 0,
        averageScore: 0,
        byLanguage: {} as Record<string, {
          count: number;
          totalScore: number;
          averageScore: number;
        }>,
        recentResults: results
          .sort((a, b) => new Date(b.completedAt).getTime() - new Date(a.completedAt).getTime())
          .slice(0, 5)
      };
      results.forEach(result => {
        summary.totalScore += result.score;
        if (!summary.byLanguage[result.language]) {
          summary.byLanguage[result.language] = {
            count: 0,
            totalScore: 0,
            averageScore: 0
          };
        }
        summary.byLanguage[result.language].count++;
        summary.byLanguage[result.language].totalScore += result.score;
      });
      if (results.length > 0) {
        summary.averageScore = summary.totalScore / results.length;
        Object.keys(summary.byLanguage).forEach(lang => {
          const langStats = summary.byLanguage[lang];
          langStats.averageScore = langStats.totalScore / langStats.count;
        });
      }
      return summary;
    } catch (error) {
      console.error('Error getting user assessment summary:', error);
      throw error;
    }
  }
  async getAssessmentResultStatistics(): Promise<any> {
    try {
      const results = await this.getAssessmentResults();
      const stats = {
        total: results.length,
        averageScore: 0,
        byLanguage: {} as Record<string, {
          count: number;
          averageScore: number;
          highestScore: number;
        }>,
        scoreDistribution: {
          excellent: 0,  // > 90%
          good: 0,      // 70-90%
          average: 0,   // 50-70%
          poor: 0       // < 50%
        }
      };
      results.forEach(result => {
        // Language stats
        if (!stats.byLanguage[result.language]) {
          stats.byLanguage[result.language] = {
            count: 0,
            averageScore: 0,
            highestScore: 0
          };
        }
        const langStats = stats.byLanguage[result.language];
        langStats.count++;
        langStats.averageScore += result.score;
        langStats.highestScore = Math.max(langStats.highestScore, result.score);
        // Score distribution
        const scorePercentage = (result.score / 100) * 100;
        if (scorePercentage > 90) stats.scoreDistribution.excellent++;
        else if (scorePercentage > 70) stats.scoreDistribution.good++;
        else if (scorePercentage > 50) stats.scoreDistribution.average++;
        else stats.scoreDistribution.poor++;
        // Overall average
        stats.averageScore += result.score;
      });
      // Calculate final averages
      if (results.length > 0) {
        stats.averageScore /= results.length;
        Object.keys(stats.byLanguage).forEach(lang => {
          stats.byLanguage[lang].averageScore /= stats.byLanguage[lang].count;
        });
      }
      return stats;
    } catch (error) {
      console.error('Error getting assessment result statistics:', error);
      throw error;
    }
  }
  private addToIndex(user: any, embedding: number[]) {
    // Add user to index with generated embedding
    this.users.push({ ...user, embedding });
  }
  private searchIndex(queryEmbedding: number[], k: number): any[] {
    // Perform similarity search on index
    return this.users
      .map(user => ({
        ...user,
        similarity: this.cosineSimilarity(queryEmbedding, user.embedding!)
      }))
      .sort((a, b) => (b.similarity || 0) - (a.similarity || 0))
      .slice(0, k)
      .map(({ similarity, ...user }) => user);
  }
}
export const vectorDB = VectorDBService.getInstance();
````

## File: src/utils/modelConfig.ts
````typescript
import { env } from '@xenova/transformers';
// Configure environment for local model loading
env.localModelPath = '/models';
env.allowLocalModels = true;
env.useLocalModel = true;
// Initialize the model
let modelPromise: Promise<any> | null = null;
// Simple text encoder that converts text to numerical embeddings
class SimpleEmbeddingModel {
  async __call__(text: string) {
    try {
      // Convert text to a fixed-size embedding
      const chars = text.toLowerCase().split('');
      const embedding = new Float32Array(384); // Same size as MiniLM-L6-v2
      // Fill the embedding array with character codes
      for (let i = 0; i < chars.length && i < embedding.length; i++) {
        embedding[i] = chars[i].charCodeAt(0) / 255;
      }
      // Normalize the embedding
      const norm = Math.sqrt(embedding.reduce((sum, val) => sum + val * val, 0));
      for (let i = 0; i < embedding.length; i++) {
        embedding[i] = embedding[i] / (norm || 1);
      }
      return {
        data: embedding
      };
    } catch (error) {
      console.error('Error in model inference:', error);
      throw error;
    }
  }
}
export const getEmbeddingModel = async () => {
  if (!modelPromise) {
    try {
      console.log('Initializing embedding model...');
      modelPromise = Promise.resolve(new SimpleEmbeddingModel());
      console.log('Using simplified embedding model for testing');
    } catch (error) {
      console.error('Error creating model pipeline:', error);
      throw error;
    }
  }
  return modelPromise;
};
````

## File: src/App.tsx
````typescript
import React, { useState, useEffect } from 'react';
import { Routes, Route, Navigate, useNavigate } from 'react-router-dom';
import { useAuth } from './contexts/AuthContext';
import Navbar from './components/Navbar';
import Hero from './components/Hero';
import Features from './components/Features';
import AuthModal from './components/AuthModal';
import AssessmentPage from './pages/AssessmentPage';
import SkillsAssessmentPage from './pages/SkillsAssessmentPage';
import KnowledgeAssessmentPage from './pages/KnowledgeAssessmentPage';
import LearningStyleAssessmentPage from './pages/LearningStyleAssessmentPage';
import LibraryPage from './pages/LibraryPage';
import LearningPathsPage from './pages/LearningPathsPage';
import MentoringPage from './pages/MentoringPage';
import AnalyticsPage from './pages/AnalyticsPage';
import AchievementsPage from './pages/AchievementsPage';
import AdminDashboard from './pages/admin/AdminDashboard';
import ProfilePage from './pages/ProfilePage';
import VerticalNav from './components/VerticalNav';
const PrivateRoute = ({ children }: { children: React.ReactNode }) => {
  const { user, loading } = useAuth();
  if (loading) {
    return (
      <div className="min-h-screen flex items-center justify-center">
        <div className="animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"></div>
      </div>
    );
  }
  return user ? <>{children}</> : <Navigate to="/" replace />;
};
const AdminRoute = ({ children }: { children: React.ReactNode }) => {
  const { user, loading, isAdmin } = useAuth();
  if (loading) {
    return (
      <div className="min-h-screen flex items-center justify-center">
        <div className="animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"></div>
      </div>
    );
  }
  if (!user || !isAdmin) {
    console.log('Access denied. User:', user?.email, 'IsAdmin:', isAdmin);
    return <Navigate to="/" replace />;
  }
  return <>{children}</>;
};
const DashboardLayout = ({ children }: { children: React.ReactNode }) => {
  return (
    <div className="min-h-screen bg-gray-50">
      <Navbar />
      <VerticalNav />
      <main className="pt-16 pl-64">
        <div className="max-w-7xl mx-auto">
          {children}
        </div>
      </main>
    </div>
  );
};
const App = () => {
  const [authModalOpen, setAuthModalOpen] = useState(false);
  const [authMode, setAuthMode] = useState<'signin' | 'signup'>('signin');
  const { user, isAdmin } = useAuth();
  const navigate = useNavigate();
  useEffect(() => {
    if (!user) {
      navigate('/');
    }
  }, [user, navigate]);
  const handleGetStarted = () => {
    setAuthMode('signup');
    setAuthModalOpen(true);
  };
  const handleSwitchMode = () => {
    setAuthMode(prevMode => prevMode === 'signin' ? 'signup' : 'signin');
  };
  return (
    <>
      <Routes>
        <Route
          path="/"
          element={
            user ? (
              <Navigate to="/dashboard" replace />
            ) : (
              <>
                <Navbar onGetStarted={handleGetStarted} />
                <Hero onGetStarted={handleGetStarted} />
                <Features />
              </>
            )
          }
        />
        {/* Protected Routes */}
        <Route path="/dashboard" element={<PrivateRoute><DashboardLayout><AssessmentPage /></DashboardLayout></PrivateRoute>} />
        <Route path="/assessments/skills" element={<PrivateRoute><DashboardLayout><SkillsAssessmentPage /></DashboardLayout></PrivateRoute>} />
        <Route path="/assessments/knowledge" element={<PrivateRoute><DashboardLayout><KnowledgeAssessmentPage /></DashboardLayout></PrivateRoute>} />
        <Route path="/assessments/learning-style" element={<PrivateRoute><DashboardLayout><LearningStyleAssessmentPage /></DashboardLayout></PrivateRoute>} />
        <Route path="/library" element={<PrivateRoute><DashboardLayout><LibraryPage /></DashboardLayout></PrivateRoute>} />
        <Route path="/learning-paths" element={<PrivateRoute><DashboardLayout><LearningPathsPage /></DashboardLayout></PrivateRoute>} />
        <Route path="/mentoring" element={<PrivateRoute><DashboardLayout><MentoringPage /></DashboardLayout></PrivateRoute>} />
        <Route path="/analytics" element={<PrivateRoute><DashboardLayout><AnalyticsPage /></DashboardLayout></PrivateRoute>} />
        <Route path="/achievements" element={<PrivateRoute><DashboardLayout><AchievementsPage /></DashboardLayout></PrivateRoute>} />
        <Route path="/profile" element={<PrivateRoute><DashboardLayout><ProfilePage /></DashboardLayout></PrivateRoute>} />
        {/* Admin Routes */}
        <Route path="/admin/*" element={<AdminRoute><DashboardLayout><AdminDashboard /></DashboardLayout></AdminRoute>} />
      </Routes>
      <AuthModal
        isOpen={authModalOpen}
        onClose={() => setAuthModalOpen(false)}
        mode={authMode}
        onSwitchMode={handleSwitchMode}
      />
    </>
  );
};
export default App;
````

## File: src/index.css
````css
@tailwind base;
@tailwind components;
@tailwind utilities;
@keyframes fadeIn {
  from {
    opacity: 0;
    transform: scale(0.95);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
.animate-fadeIn {
  animation: fadeIn 0.2s ease-out;
}
````

## File: src/index.tsx
````typescript
import React from 'react';
import ReactDOM from 'react-dom/client';
import { BrowserRouter } from 'react-router-dom';
import './index.css';
import App from './App';
import { AuthProvider } from './contexts/AuthContext';
const root = ReactDOM.createRoot(
  document.getElementById('root') as HTMLElement
);
root.render(
  <React.StrictMode>
    <BrowserRouter>
      <AuthProvider>
        <App />
      </AuthProvider>
    </BrowserRouter>
  </React.StrictMode>
);
````

## File: src/main.tsx
````typescript
import { StrictMode } from 'react';
import { createRoot } from 'react-dom/client';
import { BrowserRouter } from 'react-router-dom';
import { AuthProvider } from './contexts/AuthContext';
import App from './App.tsx';
import './index.css';
createRoot(document.getElementById('root')!).render(
  <StrictMode>
    <BrowserRouter>
      <AuthProvider>
        <App />
      </AuthProvider>
    </BrowserRouter>
  </StrictMode>
);
````

## File: src/vite-env.d.ts
````typescript
/// <reference types="vite/client" />
````

## File: .gitignore
````
# Logs
logs
*.log
npm-debug.log*
yarn-debug.log*
yarn-error.log*
pnpm-debug.log*
lerna-debug.log*

node_modules
dist
dist-ssr
*.local

# Editor directories and files
.vscode/*
!.vscode/extensions.json
.idea
.DS_Store
*.suo
*.ntvs*
*.njsproj
*.sln
*.sw?
````

## File: eslint.config.js
````javascript
import js from '@eslint/js';
import globals from 'globals';
import reactHooks from 'eslint-plugin-react-hooks';
import reactRefresh from 'eslint-plugin-react-refresh';
import tseslint from 'typescript-eslint';
export default tseslint.config(
  { ignores: ['dist'] },
  {
    extends: [js.configs.recommended, ...tseslint.configs.recommended],
    files: ['**/*.{ts,tsx}'],
    languageOptions: {
      ecmaVersion: 2020,
      globals: globals.browser,
    },
    plugins: {
      'react-hooks': reactHooks,
      'react-refresh': reactRefresh,
    },
    rules: {
      ...reactHooks.configs.recommended.rules,
      'react-refresh/only-export-components': [
        'warn',
        { allowConstantExport: true },
      ],
    },
  }
);
````

## File: firebase.rules
````
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // Helper function to check if user is authenticated
    function isAuthenticated() {
      return request.auth != null;
    }
    
    // Helper function to check if user owns the document
    function isOwner(userId) {
      return request.auth.uid == userId;
    }
    
    // Users collection rules
    match /users/{userId} {
      allow read: if isAuthenticated() && isOwner(userId);
      allow create: if isAuthenticated() && isOwner(userId);
      allow update: if isAuthenticated() && isOwner(userId);
      allow delete: if false; // Prevent user deletion through client
      
      // Nested collections
      match /{document=**} {
        allow read: if isAuthenticated() && isOwner(userId);
        allow write: if isAuthenticated() && isOwner(userId);
      }
    }
  }
}
````

## File: index.html
````html
<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vite + React + TS</title>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
````

## File: next.config.js
````javascript
/** @type {import('next').NextConfig} */
const nextConfig = {
  reactStrictMode: true,
  swcMinify: true,
  api: {
    bodyParser: true,
  },
  rewrites: async () => {
    return [
      {
        source: '/api/:path*',
        destination: '/api/:path*',
      },
    ];
  },
};
module.exports = nextConfig;
````

## File: package.json
````json
{
  "name": "vite-react-typescript-starter",
  "private": true,
  "version": "0.0.0",
  "type": "module",
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "lint": "eslint .",
    "preview": "vite preview",
    "server": "node server/index.js"
  },
  "dependencies": {
    "@monaco-editor/react": "^4.6.0",
    "@xenova/transformers": "^2.15.0",
    "axios": "^1.7.7",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.18.3",
    "firebase": "^10.8.1",
    "firebase-admin": "^12.0.0",
    "jsonwebtoken": "^9.0.2",
    "lucide-react": "^0.344.0",
    "next": "^15.0.3",
    "onnxruntime-web": "^1.20.0",
    "openai": "^4.72.0",
    "react": "^18.3.1",
    "react-dom": "^18.3.1",
    "react-markdown": "^9.0.1",
    "react-router-dom": "^6.22.2"
  },
  "devDependencies": {
    "@eslint/js": "^9.9.1",
    "@types/node": "^22.9.0",
    "@types/react": "^18.3.5",
    "@types/react-dom": "^18.3.0",
    "@vitejs/plugin-react": "^4.3.1",
    "autoprefixer": "^10.4.18",
    "eslint": "^9.9.1",
    "eslint-plugin-react-hooks": "^5.1.0-rc.0",
    "eslint-plugin-react-refresh": "^0.4.11",
    "globals": "^15.9.0",
    "postcss": "^8.4.35",
    "tailwindcss": "^3.4.1",
    "typescript": "^5.5.3",
    "typescript-eslint": "^8.3.0",
    "vite": "^5.4.2"
  }
}
````

## File: postcss.config.js
````javascript
export default {
  plugins: {
    tailwindcss: {},
    autoprefixer: {},
  },
};
````

## File: README.md
````markdown
# Learning Assessment Platform

A comprehensive platform for assessing and improving programming skills through interactive assessments and real-time feedback.

<div align="center">

[![GitHub license](https://img.shields.io/github/license/ManojINaik/Ai-learning)](https://github.com/ManojINaik/Ai-learning/blob/main/LICENSE)
[![GitHub stars](https://img.shields.io/github/stars/ManojINaik/Ai-learning)](https://github.com/ManojINaik/Ai-learning/stargazers)
[![GitHub issues](https://img.shields.io/github/issues/ManojINaik/Ai-learning)](https://github.com/ManojINaik/Ai-learning/issues)
[![GitHub forks](https://img.shields.io/github/forks/ManojINaik/Ai-learning)](https://github.com/ManojINaik/Ai-learning/network)

<p align="center">
  <img src="docs/images/banner.png" alt="Learning Assessment Platform Banner" width="800"/>
</p>

## Features

### For Students
- **Skill Assessment**: Take programming assessments in various languages and domains
- **Knowledge Testing**: Test theoretical understanding of programming concepts
- **Real-time Feedback**: Get instant feedback on your code submissions
- **Progress Tracking**: Monitor your learning progress over time
- **Personalized Learning Path**: Get recommendations based on your performance

### For Teachers
- **Assessment Creation**: Create custom assessments for students
- **Performance Monitoring**: Track student progress and identify areas for improvement
- **Automated Grading**: Automatic evaluation of student submissions
- **Detailed Analytics**: Access comprehensive reports on student performance

### For Administrators
- **User Management**: Add, view, and manage users through an intuitive admin dashboard
- **Domain Management**: Add and remove programming domains and topics
- **Assessment Management**: Organize and manage all assessments
- **Admin Assistant**: AI-powered chatbot for quick administrative tasks
  - View user statistics and performance
  - Manage domains and users through chat commands
  - Access assessment results and analytics
  - Monitor platform usage

### Technical Features
- **Firebase Integration**: Secure authentication and real-time database
- **AI-Powered Analysis**: Advanced code analysis and feedback
- **Responsive Design**: Works seamlessly across devices
- **Real-time Updates**: Instant updates for assessments and results

## Screenshots

<div align="center">
  <img src="docs/images/ProgressAnalytics.png" alt="Dashboard" width="400"/>
  <p><em>Dashboard - Track your learning progress</em></p>
  
  <img src="docs/images/assessment.png" alt="Assessment" width="400"/>
  <p><em>Assessment Interface - AI-powered question generation</em></p>
  
  <img src="docs/images/contentLibrary.png" alt="ContentLibrary" width="400"/>
  <p><em>Content Library - Content Library</em></p>
</div>

## Getting Started

1. **Clone the repository**
   ```bash
   git clone https://github.com/ManojINaik/Ai-learning.git
   cd Ai-learning
   ```

2. **Install dependencies**
   ```bash
   npm install
   ```

3. **Set up environment variables**
   ```env
    VITE_FIREBASE_API_KEY=<your-api-key>
    VITE_FIREBASE_AUTH_DOMAIN=<your-api-key>
    VITE_FIREBASE_PROJECT_ID=<your-api-key>
    VITE_FIREBASE_STORAGE_BUCKET=<your-api-key>
    VITE_FIREBASE_MESSAGING_SENDER_ID=<your-api-key>
    VITE_FIREBASE_APP_ID=<your-api-key>
    VITE_FIREBASE_MEASUREMENT_ID=<your-api-key>
    
    # GLHF API Configuration
    VITE_GLHF_API_KEY=<your-api-key>
    VITE_GLHF_API_URL=https://glhf.chat/api/openai/v1
   ```

4. **Start development server**
   ```bash
   npm run dev
   ```

## Admin Assistant Commands

The Admin Assistant chatbot supports the following commands:

### User Management
- `show all users` or `list users`: View all users in the system
- `show statistics`: View platform usage statistics
- `delete user [email]`: Remove a user from the system

### Domain Management
- `show domains` or `list domains`: View all available domains
- `add domain [name]`: Add a new programming domain
- `add domain [name] [description]`: Add a domain with description
- `delete domain [name]`: Remove a domain

### Assessment Management
- `show assessments` or `assessment stats`: View assessment statistics
- `show results` or `result stats`: View assessment result statistics
- `show results for [userId]`: View results for a specific user

## Tech Stack

- **Frontend**: React, TypeScript, Tailwind CSS
- **Backend**: Firebase (Authentication, Firestore)
- **APIs**: GLHF Chat API for code analysis
- **State Management**: React Context
- **UI Components**: Custom components with Tailwind

## Project Structure

```
project/
├── 📁 src/
│   ├── 📁 api/           # API endpoints
│   ├── 📁 components/    # Reusable components
│   ├── 📁 config/       # Configuration files
│   ├── 📁 contexts/     # React contexts
│   ├── 📁 hooks/        # Custom hooks
│   ├── 📁 pages/        # Page components
│   ├── 📁 services/     # Business logic
│   ├── 📁 styles/       # Global styles
│   └── 📁 types/        # TypeScript types
└── 📁 public/           # Static assets
```

## Contributing

1. Fork the repository
2. Create your feature branch (`git checkout -b feature/AmazingFeature`)
3. Commit your changes (`git commit -m 'Add some AmazingFeature'`)
4. Push to the branch (`git push origin feature/AmazingFeature`)
5. Open a Pull Request

## License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

## Author

**Manoj Naik**
- GitHub: [@ManojINaik](https://github.com/ManojINaik)

## Acknowledgments

- GLHF Chat for AI capabilities
- React and TypeScript communities

<div align="center">

Made with ❤️ by [Manoj Naik](https://github.com/ManojINaik)

</div>
````

## File: tailwind.config.js
````javascript
/** @type {import('tailwindcss').Config} */
export default {
  content: ['./index.html', './src/**/*.{js,ts,jsx,tsx}'],
  theme: {
    extend: {},
  },
  plugins: [],
};
````

## File: tsconfig.app.json
````json
{
  "compilerOptions": {
    "target": "ES2020",
    "useDefineForClassFields": true,
    "lib": ["ES2020", "DOM", "DOM.Iterable"],
    "module": "ESNext",
    "skipLibCheck": true,

    /* Bundler mode */
    "moduleResolution": "bundler",
    "allowImportingTsExtensions": true,
    "isolatedModules": true,
    "moduleDetection": "force",
    "noEmit": true,
    "jsx": "react-jsx",

    /* Linting */
    "strict": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "noFallthroughCasesInSwitch": true
  },
  "include": ["src"]
}
````

## File: tsconfig.json
````json
{
  "files": [],
  "references": [
    { "path": "./tsconfig.app.json" },
    { "path": "./tsconfig.node.json" }
  ]
}
````

## File: tsconfig.node.json
````json
{
  "compilerOptions": {
    "target": "ES2022",
    "lib": ["ES2023"],
    "module": "ESNext",
    "skipLibCheck": true,

    /* Bundler mode */
    "moduleResolution": "bundler",
    "allowImportingTsExtensions": true,
    "isolatedModules": true,
    "moduleDetection": "force",
    "noEmit": true,

    /* Linting */
    "strict": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "noFallthroughCasesInSwitch": true
  },
  "include": ["vite.config.ts"]
}
````

## File: vite.config.ts
````typescript
import { defineConfig } from 'vite';
import react from '@vitejs/plugin-react';
import { loadEnv } from 'vite';
import path from 'path';
// https://vitejs.dev/config/
export default defineConfig(({ mode }) => {
  const env = loadEnv(mode, process.cwd(), '');
  return {
    plugins: [react()],
    optimizeDeps: {
      exclude: ['lucide-react'],
    },
    define: {
      'process.env': env
    },
    server: {
      port: 3000,
      open: true,
      host: true,
      proxy: {
        '/api': {
          target: 'http://localhost:3000',
          changeOrigin: true,
          rewrite: (path) => path.replace(/^\/api/, ''),
          headers: {
            'Authorization': `Bearer ${env.VITE_GLHF_API_KEY}`
          }
        }
      }
    },
    build: {
      target: 'esnext',
      outDir: 'dist',
      assetsDir: 'assets',
      rollupOptions: {
        output: {
          manualChunks: {
            vendor: ['react', 'react-dom'],
            transformers: ['@xenova/transformers']
          }
        }
      }
    },
    publicDir: 'public'
  };
});
````
